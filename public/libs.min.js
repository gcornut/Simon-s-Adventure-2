(function(e,t){var i,n,r=typeof t,s=e.location,o=e.document,a=o.documentElement,l=e.jQuery,u=e.$,h={},c=[],f="1.10.2",d=c.concat,p=c.push,m=c.slice,g=c.indexOf,y=h.toString,v=h.hasOwnProperty,T=f.trim,w=function(e,t){return new w.fn.init(e,t,n)},b=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,x=/\S+/g,A=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,S=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,C=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,I=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,L=/^-ms-/,O=/-([\da-z])/gi,P=function(e,t){return t.toUpperCase()},X=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(N(),w.ready())},N=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",X,!1),e.removeEventListener("load",X,!1)):(o.detachEvent("onreadystatechange",X),e.detachEvent("onload",X))};w.fn=w.prototype={jquery:f,constructor:w,init:function(e,i,n){var r,s;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:M.exec(e),!r||!r[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(r[1]){if(i=i instanceof w?i[0]:i,w.merge(this,w.parseHTML(r[1],i&&i.nodeType?i.ownerDocument||i:o,!0)),S.test(r[1])&&w.isPlainObject(i))for(r in i)w.isFunction(this[r])?this[r](i[r]):this.attr(r,i[r]);return this}if(s=o.getElementById(r[2]),s&&s.parentNode){if(s.id!==r[2])return n.find(e);this.length=1,this[0]=s}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return m.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(m.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,i,n,r,s,o,a=arguments[0]||{},l=1,u=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},l=2),"object"==typeof a||w.isFunction(a)||(a={}),u===l&&(a=this,--l);u>l;l++)if(null!=(s=arguments[l]))for(r in s)e=a[r],n=s[r],a!==n&&(h&&n&&(w.isPlainObject(n)||(i=w.isArray(n)))?(i?(i=!1,o=e&&w.isArray(e)?e:[]):o=e&&w.isPlainObject(e)?e:{},a[r]=w.extend(h,o,n)):n!==t&&(a[r]=n));return a},w.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===w&&(e.$=u),t&&e.jQuery===w&&(e.jQuery=l),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(e===!0?!--w.readyWait:!w.isReady){if(!o.body)return setTimeout(w.ready);w.isReady=!0,e!==!0&&--w.readyWait>0||(i.resolveWith(o,[w]),w.fn.trigger&&w(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===w.type(e)},isArray:Array.isArray||function(e){return"array"===w.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[y.call(e)]||"object":typeof e},isPlainObject:function(e){var i;if(!e||"object"!==w.type(e)||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,"constructor")&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(w.support.ownLast)for(i in e)return v.call(e,i);for(i in e);return i===t||v.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||o;var n=S.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=w.buildFragment([e],t,r),r&&w(r).remove(),w.merge([],n.childNodes))},parseJSON:function(i){return e.JSON&&e.JSON.parse?e.JSON.parse(i):null===i?i:"string"==typeof i&&(i=w.trim(i),i&&_.test(i.replace(C,"@").replace(I,"]").replace(E,"")))?Function("return "+i)():(w.error("Invalid JSON: "+i),t)},parseXML:function(i){var n,r;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(s){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&w.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(L,"ms-").replace(O,P)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var n,r=0,s=e.length,o=k(e);if(i){if(o){for(;s>r;r++)if(n=t.apply(e[r],i),n===!1)break}else for(r in e)if(n=t.apply(e[r],i),n===!1)break}else if(o){for(;s>r;r++)if(n=t.call(e[r],r,e[r]),n===!1)break}else for(r in e)if(n=t.call(e[r],r,e[r]),n===!1)break;return e},trim:T&&!T.call("﻿ ")?function(e){return null==e?"":T.call(e)}:function(e){return null==e?"":(e+"").replace(A,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(k(Object(e))?w.merge(i,"string"==typeof e?[e]:e):p.call(i,e)),i},inArray:function(e,t,i){var n;if(t){if(g)return g.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,r=e.length,s=0;if("number"==typeof n)for(;n>s;s++)e[r++]=i[s];else while(i[s]!==t)e[r++]=i[s++];return e.length=r,e},grep:function(e,t,i){var n,r=[],s=0,o=e.length;for(i=!!i;o>s;s++)n=!!t(e[s],s),i!==n&&r.push(e[s]);return r},map:function(e,t,i){var n,r=0,s=e.length,o=k(e),a=[];if(o)for(;s>r;r++)n=t(e[r],r,i),null!=n&&(a[a.length]=n);else for(r in e)n=t(e[r],r,i),null!=n&&(a[a.length]=n);return d.apply([],a)},guid:1,proxy:function(e,i){var n,r,s;return"string"==typeof i&&(s=e[i],i=e,e=s),w.isFunction(e)?(n=m.call(arguments,2),r=function(){return e.apply(i||this,n.concat(m.call(arguments)))},r.guid=e.guid=e.guid||w.guid++,r):t},access:function(e,i,n,r,s,o,a){var l=0,u=e.length,h=null==n;if("object"===w.type(n)){s=!0;for(l in n)w.access(e,i,l,n[l],!0,o,a)}else if(r!==t&&(s=!0,w.isFunction(r)||(a=!0),h&&(a?(i.call(e,r),i=null):(h=i,i=function(e,t,i){return h.call(w(e),i)})),i))for(;u>l;l++)i(e[l],n,a?r:r.call(e[l],l,i(e[l],n)));return s?e:h?i.call(e):u?i(e[0],n):o},now:function(){return(new Date).getTime()},swap:function(e,t,i,n){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];r=i.apply(e,n||[]);for(s in t)e.style[s]=o[s];return r}}),w.ready.promise=function(t){if(!i)if(i=w.Deferred(),"complete"===o.readyState)setTimeout(w.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",X,!1),e.addEventListener("load",X,!1);else{o.attachEvent("onreadystatechange",X),e.attachEvent("onload",X);var n=!1;try{n=null==e.frameElement&&o.documentElement}catch(r){}n&&n.doScroll&&function s(){if(!w.isReady){try{n.doScroll("left")}catch(e){return setTimeout(s,50)}N(),w.ready()}}()}return i.promise(t)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});function k(e){var t=e.length,i=w.type(e);return w.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}n=w(o),function(e,t){var i,n,r,s,o,a,l,u,h,c,f,d,p,m,g,y,v,T="sizzle"+-new Date,b=e.document,x=0,A=0,M=at(),S=at(),_=at(),E=!1,C=function(e,t){return e===t?(E=!0,0):0},I=typeof t,L=1<<31,O={}.hasOwnProperty,P=[],X=P.pop,N=P.push,k=P.push,R=P.slice,D=P.indexOf||function(e){var t=0,i=this.length;for(;i>t;t++)if(this[t]===e)return t;return-1},G="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",H=B.replace("w","w#"),F="\\["+j+"*("+B+")"+j+"*(?:([*^$|!~]?=)"+j+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+H+")|)|)"+j+"*\\]",V=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+F.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=RegExp("^"+j+"*,"+j+"*"),q=RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),Y=RegExp(j+"*[+~]"),J=RegExp("="+j+"*([^\\]'\"]*)"+j+"*\\]","g"),U=RegExp(V),$=RegExp("^"+H+"$"),K={ID:RegExp("^#("+B+")"),CLASS:RegExp("^\\.("+B+")"),TAG:RegExp("^("+B.replace("w","w*")+")"),ATTR:RegExp("^"+F),PSEUDO:RegExp("^"+V),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:RegExp("^(?:"+G+")$","i"),needsContext:RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,it=/'|\\/g,nt=RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),rt=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{k.apply(P=R.call(b.childNodes),b.childNodes),P[b.childNodes.length].nodeType}catch(st){k={apply:P.length?function(e,t){N.apply(e,R.call(t))}:function(e,t){var i=e.length,n=0;while(e[i++]=t[n++]);e.length=i-1}}}function ot(e,t,i,r){var s,o,a,l,u,h,d,g,y,w;if((t?t.ownerDocument||t:b)!==f&&c(t),t=t||f,i=i||[],!e||"string"!=typeof e)return i;if(1!==(l=t.nodeType)&&9!==l)return[];if(p&&!r){if(s=Z.exec(e))if(a=s[1]){if(9===l){if(o=t.getElementById(a),!o||!o.parentNode)return i;if(o.id===a)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&v(t,o)&&o.id===a)return i.push(o),i}else{if(s[2])return k.apply(i,t.getElementsByTagName(e)),i;if((a=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return k.apply(i,t.getElementsByClassName(a)),i}if(n.qsa&&(!m||!m.test(e))){if(g=d=T,y=t,w=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){h=gt(e),(d=t.getAttribute("id"))?g=d.replace(it,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=h.length;while(u--)h[u]=g+yt(h[u]);y=Y.test(e)&&t.parentNode||t,w=h.join(",")}if(w)try{return k.apply(i,y.querySelectorAll(w)),i}catch(x){}finally{d||t.removeAttribute("id")}}}return St(e.replace(z,"$1"),t,i,r)}function at(){var e=[];function t(i,n){return e.push(i+=" ")>s.cacheLength&&delete t[e.shift()],t[i]=n}return t}function lt(e){return e[T]=!0,e}function ut(e){var t=f.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ht(e,t){var i=e.split("|"),n=e.length;while(n--)s.attrHandle[i[n]]=t}function ct(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(n)return n;if(i)while(i=i.nextSibling)if(i===t)return-1;return e?1:-1}function ft(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function dt(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function pt(e){return lt(function(t){return t=+t,lt(function(i,n){var r,s=e([],i.length,t),o=s.length;while(o--)i[r=s[o]]&&(i[r]=!(n[r]=i[r]))})})}a=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},n=ot.support={},c=ot.setDocument=function(e){var i=e?e.ownerDocument||e:b,r=i.defaultView;return i!==f&&9===i.nodeType&&i.documentElement?(f=i,d=i.documentElement,p=!a(i),r&&r.attachEvent&&r!==r.top&&r.attachEvent("onbeforeunload",function(){c()}),n.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ut(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=ut(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),n.getById=ut(function(e){return d.appendChild(e).id=T,!i.getElementsByName||!i.getElementsByName(T).length}),n.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==I&&p){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},s.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var i=typeof e.getAttributeNode!==I&&e.getAttributeNode("id");return i&&i.value===t}}),s.find.TAG=n.getElementsByTagName?function(e,i){return typeof i.getElementsByTagName!==I?i.getElementsByTagName(e):t}:function(e,t){var i,n=[],r=0,s=t.getElementsByTagName(e);if("*"===e){while(i=s[r++])1===i.nodeType&&n.push(i);return n}return s},s.find.CLASS=n.getElementsByClassName&&function(e,i){return typeof i.getElementsByClassName!==I&&p?i.getElementsByClassName(e):t},g=[],m=[],(n.qsa=Q.test(i.querySelectorAll))&&(ut(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+G+")"),e.querySelectorAll(":checked").length||m.push(":checked")}),ut(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Q.test(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",V)}),m=m.length&&RegExp(m.join("|")),g=g.length&&RegExp(g.join("|")),v=Q.test(d.contains)||d.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},C=d.compareDocumentPosition?function(e,t){if(e===t)return E=!0,0;var r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return r?1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||v(b,e)?-1:t===i||v(b,t)?1:h?D.call(h,e)-D.call(h,t):0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,r=0,s=e.parentNode,o=t.parentNode,a=[e],l=[t];if(e===t)return E=!0,0;if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:h?D.call(h,e)-D.call(h,t):0;if(s===o)return ct(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)l.unshift(n);while(a[r]===l[r])r++;return r?ct(a[r],l[r]):a[r]===b?-1:l[r]===b?1:0},i):f},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&c(e),t=t.replace(J,"='$1']"),!(!n.matchesSelector||!p||g&&g.test(t)||m&&m.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return ot(t,f,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==f&&c(e),v(e,t)},ot.attr=function(e,i){(e.ownerDocument||e)!==f&&c(e);var r=s.attrHandle[i.toLowerCase()],o=r&&O.call(s.attrHandle,i.toLowerCase())?r(e,i,!p):t;return o===t?n.attributes||!p?e.getAttribute(i):(o=e.getAttributeNode(i))&&o.specified?o.value:null:o},ot.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,i=[],r=0,s=0;if(E=!n.detectDuplicates,h=!n.sortStable&&e.slice(0),e.sort(C),E){while(t=e[s++])t===e[s]&&(r=i.push(s));while(r--)e.splice(i[r],1)}return e},o=ot.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n];n++)i+=o(t);return i},s=ot.selectors={cacheLength:50,createPseudo:lt,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var i,n=!e[5]&&e[2];return K.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:n&&U.test(n)&&(i=gt(n,!0))&&(i=n.indexOf(")",n.length-i)-n.length)&&(e[0]=e[0].slice(0,i),e[2]=n.slice(0,i)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=M[e+" "];return t||(t=RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&M(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==I&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var r=ot.attr(n,e);return null==r?"!="===t:t?(r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&r.indexOf(i)>-1:"$="===t?i&&r.slice(-i.length)===i:"~="===t?(" "+r+" ").indexOf(i)>-1:"|="===t?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,i,n,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var u,h,c,f,d,p,m=s!==o?"nextSibling":"previousSibling",g=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!l&&!a;if(g){if(s){while(m){c=t;while(c=c[m])if(a?c.nodeName.toLowerCase()===y:1===c.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?g.firstChild:g.lastChild],o&&v){h=g[T]||(g[T]={}),u=h[e]||[],d=u[0]===x&&u[1],f=u[0]===x&&u[2],c=d&&g.childNodes[d];while(c=++d&&c&&c[m]||(f=d=0)||p.pop())if(1===c.nodeType&&++f&&c===t){h[e]=[x,d,f];break}}else if(v&&(u=(t[T]||(t[T]={}))[e])&&u[0]===x)f=u[1];else while(c=++d&&c&&c[m]||(f=d=0)||p.pop())if((a?c.nodeName.toLowerCase()===y:1===c.nodeType)&&++f&&(v&&((c[T]||(c[T]={}))[e]=[x,f]),c===t))break;return f-=r,f===n||0===f%n&&f/n>=0}}},PSEUDO:function(e,t){var i,n=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return n[T]?n(t):n.length>1?(i=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?lt(function(e,i){var r,s=n(e,t),o=s.length;while(o--)r=D.call(e,s[o]),e[r]=!(i[r]=s[o])}):function(e){return n(e,0,i)}):n}},pseudos:{not:lt(function(e){var t=[],i=[],n=l(e.replace(z,"$1"));return n[T]?lt(function(e,t,i,r){var s,o=n(e,null,r,[]),a=e.length;while(a--)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,r,s){return t[0]=e,n(t,null,s,i),!i.pop()}}),has:lt(function(e){return function(t){return ot(e,t).length>0}}),contains:lt(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:lt(function(e){return $.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var i;do if(i=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,i){return[0>i?i+t:i]}),even:pt(function(e,t){var i=0;for(;t>i;i+=2)e.push(i);return e}),odd:pt(function(e,t){var i=1;for(;t>i;i+=2)e.push(i);return e}),lt:pt(function(e,t,i){var n=0>i?i+t:i;for(;--n>=0;)e.push(n);return e}),gt:pt(function(e,t,i){var n=0>i?i+t:i;for(;t>++n;)e.push(n);return e})}},s.pseudos.nth=s.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[i]=ft(i);for(i in{submit:!0,reset:!0})s.pseudos[i]=dt(i);function mt(){}mt.prototype=s.filters=s.pseudos,s.setFilters=new mt;function gt(e,t){var i,n,r,o,a,l,u,h=S[e+" "];if(h)return t?0:h.slice(0);a=e,l=[],u=s.preFilter;while(a){(!i||(n=W.exec(a)))&&(n&&(a=a.slice(n[0].length)||a),l.push(r=[])),i=!1,(n=q.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(z," ")}),a=a.slice(i.length));for(o in s.filter)!(n=K[o].exec(a))||u[o]&&!(n=u[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return t?a.length:a?ot.error(e):S(e,l).slice(0)}function yt(e){var t=0,i=e.length,n="";for(;i>t;t++)n+=e[t].value;return n}function vt(e,t,i){var n=t.dir,s=i&&"parentNode"===n,o=A++;return t.first?function(t,i,r){while(t=t[n])if(1===t.nodeType||s)return e(t,i,r)}:function(t,i,a){var l,u,h,c=x+" "+o;if(a){while(t=t[n])if((1===t.nodeType||s)&&e(t,i,a))return!0}else while(t=t[n])if(1===t.nodeType||s)if(h=t[T]||(t[T]={}),(u=h[n])&&u[0]===c){if((l=u[1])===!0||l===r)return l===!0}else if(u=h[n]=[c],u[1]=e(t,i,a)||r,u[1]===!0)return!0}}function Tt(e){return e.length>1?function(t,i,n){var r=e.length;while(r--)if(!e[r](t,i,n))return!1;return!0}:e[0]}function wt(e,t,i,n,r){var s,o=[],a=0,l=e.length,u=null!=t;for(;l>a;a++)(s=e[a])&&(!i||i(s,n,r))&&(o.push(s),u&&t.push(a));return o}function bt(e,t,i,n,r,s){return n&&!n[T]&&(n=bt(n)),r&&!r[T]&&(r=bt(r,s)),lt(function(s,o,a,l){var u,h,c,f=[],d=[],p=o.length,m=s||Mt(t||"*",a.nodeType?[a]:a,[]),g=!e||!s&&t?m:wt(m,f,e,a,l),y=i?r||(s?e:p||n)?[]:o:g;if(i&&i(g,y,a,l),n){u=wt(y,d),n(u,[],a,l),h=u.length;while(h--)(c=u[h])&&(y[d[h]]=!(g[d[h]]=c))}if(s){if(r||e){if(r){u=[],h=y.length;while(h--)(c=y[h])&&u.push(g[h]=c);r(null,y=[],u,l)}h=y.length;while(h--)(c=y[h])&&(u=r?D.call(s,c):f[h])>-1&&(s[u]=!(o[u]=c))}}else y=wt(y===o?y.splice(p,y.length):y),r?r(null,o,y,l):k.apply(o,y)})}function xt(e){var t,i,n,r=e.length,o=s.relative[e[0].type],a=o||s.relative[" "],l=o?1:0,h=vt(function(e){return e===t},a,!0),c=vt(function(e){return D.call(t,e)>-1},a,!0),f=[function(e,i,n){return!o&&(n||i!==u)||((t=i).nodeType?h(e,i,n):c(e,i,n))}];for(;r>l;l++)if(i=s.relative[e[l].type])f=[vt(Tt(f),i)];else{if(i=s.filter[e[l].type].apply(null,e[l].matches),i[T]){for(n=++l;r>n;n++)if(s.relative[e[n].type])break;return bt(l>1&&Tt(f),l>1&&yt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),i,n>l&&xt(e.slice(l,n)),r>n&&xt(e=e.slice(n)),r>n&&yt(e))}f.push(i)}return Tt(f)}function At(e,t){var i=0,n=t.length>0,o=e.length>0,a=function(a,l,h,c,d){var p,m,g,y=[],v=0,T="0",w=a&&[],b=null!=d,A=u,M=a||o&&s.find.TAG("*",d&&l.parentNode||l),S=x+=null==A?1:Math.random()||.1;for(b&&(u=l!==f&&l,r=i);null!=(p=M[T]);T++){if(o&&p){m=0;while(g=e[m++])if(g(p,l,h)){c.push(p);break}b&&(x=S,r=++i)}n&&((p=!g&&p)&&v--,a&&w.push(p))}if(v+=T,n&&T!==v){m=0;while(g=t[m++])g(w,y,l,h);if(a){if(v>0)while(T--)w[T]||y[T]||(y[T]=X.call(c));y=wt(y)}k.apply(c,y),b&&!a&&y.length>0&&v+t.length>1&&ot.uniqueSort(c)}return b&&(x=S,u=A),w};return n?lt(a):a}l=ot.compile=function(e,t){var i,n=[],r=[],s=_[e+" "];if(!s){t||(t=gt(e)),i=t.length;while(i--)s=xt(t[i]),s[T]?n.push(s):r.push(s);s=_(e,At(r,n))}return s};function Mt(e,t,i){var n=0,r=t.length;for(;r>n;n++)ot(e,t[n],i);return i}function St(e,t,i,r){var o,a,u,h,c,f=gt(e);if(!r&&1===f.length){if(a=f[0]=f[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&n.getById&&9===t.nodeType&&p&&s.relative[a[1].type]){if(t=(s.find.ID(u.matches[0].replace(nt,rt),t)||[])[0],!t)return i;e=e.slice(a.shift().value.length)}o=K.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],s.relative[h=u.type])break;if((c=s.find[h])&&(r=c(u.matches[0].replace(nt,rt),Y.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&yt(a),!e)return k.apply(i,r),i;break}}}return l(e,f)(r,t,!p,i,Y.test(e)),i}n.sortStable=T.split("").sort(C).join("")===T,n.detectDuplicates=E,c(),n.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),ut(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ht("type|href|height|width",function(e,i,n){return n?t:e.getAttribute(i,"type"===i.toLowerCase()?1:2)}),n.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ht("value",function(e,i,n){return n||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ut(function(e){return null==e.getAttribute("disabled")})||ht(G,function(e,i,n){var r;return n?t:(r=e.getAttributeNode(i))&&r.specified?r.value:e[i]===!0?i.toLowerCase():null}),w.find=ot,w.expr=ot.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ot.uniqueSort,w.text=ot.getText,w.isXMLDoc=ot.isXML,w.contains=ot.contains}(e);var R={};function D(e){var t=R[e]={};return w.each(e.match(x)||[],function(e,i){t[i]=!0}),t}w.Callbacks=function(e){e="string"==typeof e?R[e]||D(e):w.extend({},e);var i,n,r,s,o,a,l=[],u=!e.once&&[],h=function(t){for(n=e.memory&&t,r=!0,o=a||0,a=0,s=l.length,i=!0;l&&s>o;o++)if(l[o].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,l&&(u?u.length&&h(u.shift()):n?l=[]:c.disable())},c={add:function(){if(l){var t=l.length;(function r(t){w.each(t,function(t,i){var n=w.type(i);"function"===n?e.unique&&c.has(i)||l.push(i):i&&i.length&&"string"!==n&&r(i)})})(arguments),i?s=l.length:n&&(a=t,h(n))}return this},remove:function(){return l&&w.each(arguments,function(e,t){var n;while((n=w.inArray(t,l,n))>-1)l.splice(n,1),i&&(s>=n&&s--,o>=n&&o--)}),this},has:function(e){return e?w.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=u=n=t,this},disabled:function(){return!l},lock:function(){return u=t,n||c.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||r&&!u||(t=t||[],t=[e,t.slice?t.slice():t],i?u.push(t):h(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(i){w.each(t,function(t,s){var o=s[0],a=w.isFunction(e[t])&&e[t];r[s[1]](function(){var e=a&&a.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o+"With"](this===n?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?w.extend(e,n):n}},r={};return n.pipe=n.then,w.each(t,function(e,s){var o=s[2],a=s[3];n[s[1]]=o.add,a&&o.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?n:this,arguments),this},r[s[0]+"With"]=o.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t=0,i=m.call(arguments),n=i.length,r=1!==n||e&&w.isFunction(e.promise)?n:0,s=1===r?e:w.Deferred(),o=function(e,t,i){return function(n){t[e]=this,i[e]=arguments.length>1?m.call(arguments):n,i===a?s.notifyWith(t,i):--r||s.resolveWith(t,i)}},a,l,u;if(n>1)for(a=Array(n),l=Array(n),u=Array(n);n>t;t++)i[t]&&w.isFunction(i[t].promise)?i[t].promise().done(o(t,u,i)).fail(s.reject).progress(o(t,l,a)):--r;return r||s.resolveWith(u,i),s.promise()}}),w.support=function(t){var i,n,s,a,l,u,h,c,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=d.getElementsByTagName("*")||[],n=d.getElementsByTagName("a")[0],!n||!n.style||!i.length)return t;a=o.createElement("select"),u=a.appendChild(o.createElement("option")),s=d.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(n.getAttribute("style")),t.hrefNormalized="/a"===n.getAttribute("href"),t.opacity=/^0.5/.test(n.style.opacity),t.cssFloat=!!n.style.cssFloat,t.checkOn=!!s.value,t.optSelected=u.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!u.disabled;try{delete d.test}catch(p){t.deleteExpando=!1}s=o.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),l=o.createDocumentFragment(),l.appendChild(s),t.appendChecked=s.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(h="on"+f,"t"),t[f+"Bubbles"]=h in e||d.attributes[h].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(f in w(t))break;return t.ownLast="0"!==f,w(function(){var i,n,s,a="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=o.getElementsByTagName("body")[0];l&&(i=o.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(i).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=d.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,n=d.appendChild(o.createElement("div")),n.style.cssText=d.style.cssText=a,n.style.marginRight=n.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),typeof d.style.zoom!==r&&(d.innerHTML="",d.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(i),i=d=s=n=null)}),i=a=l=u=n=s=null,t}({});
var G=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,j=/([A-Z])/g;function B(e,i,n,r){if(w.acceptData(e)){var s,o,a=w.expando,l=e.nodeType,u=l?w.cache:e,h=l?e[a]:e[a]&&a;if(h&&u[h]&&(r||u[h].data)||n!==t||"string"!=typeof i)return h||(h=l?e[a]=c.pop()||w.guid++:a),u[h]||(u[h]=l?{}:{toJSON:w.noop}),("object"==typeof i||"function"==typeof i)&&(r?u[h]=w.extend(u[h],i):u[h].data=w.extend(u[h].data,i)),o=u[h],r||(o.data||(o.data={}),o=o.data),n!==t&&(o[w.camelCase(i)]=n),"string"==typeof i?(s=o[i],null==s&&(s=o[w.camelCase(i)])):s=o,s}}function H(e,t,i){if(w.acceptData(e)){var n,r,s=e.nodeType,o=s?w.cache:e,a=s?e[w.expando]:w.expando;if(o[a]){if(t&&(n=i?o[a]:o[a].data)){w.isArray(t)?t=t.concat(w.map(t,w.camelCase)):t in n?t=[t]:(t=w.camelCase(t),t=t in n?[t]:t.split(" ")),r=t.length;while(r--)delete n[t[r]];if(i?!V(n):!w.isEmptyObject(n))return}(i||(delete o[a].data,V(o[a])))&&(s?w.cleanData([e],!0):w.support.deleteExpando||o!=o.window?delete o[a]:o[a]=null)}}}w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?w.cache[e[w.expando]]:e[w.expando],!!e&&!V(e)},data:function(e,t,i){return B(e,t,i)},removeData:function(e,t){return H(e,t)},_data:function(e,t,i){return B(e,t,i,!0)},_removeData:function(e,t){return H(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,i){var n,r,s=null,o=0,a=this[0];if(e===t){if(this.length&&(s=w.data(a),1===a.nodeType&&!w._data(a,"parsedAttrs"))){for(n=a.attributes;n.length>o;o++)r=n[o].name,0===r.indexOf("data-")&&(r=w.camelCase(r.slice(5)),F(a,r,s[r]));w._data(a,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,i)}):a?F(a,e,w.data(a,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}});function F(e,i,n){if(n===t&&1===e.nodeType){var r="data-"+i.replace(j,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:G.test(n)?w.parseJSON(n):n}catch(s){}w.data(e,i,n)}else n=t}return n}function V(e){var t;for(t in e)if(("data"!==t||!w.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}w.extend({queue:function(e,i,n){var r;return e?(i=(i||"fx")+"queue",r=w._data(e,i),n&&(!r||w.isArray(n)?r=w._data(e,i,w.makeArray(n)):r.push(n)),r||[]):t},dequeue:function(e,t){t=t||"fx";var i=w.queue(e,t),n=i.length,r=i.shift(),s=w._queueHooks(e,t),o=function(){w.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete s.stop,r.call(e,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return w._data(e,i)||w._data(e,i,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,i)})})}}),w.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),n>arguments.length?w.queue(this[0],e):i===t?this:this.each(function(){var t=w.queue(this,e,i);w._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx?w.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,r=1,s=w.Deferred(),o=this,a=this.length,l=function(){--r||s.resolveWith(o,[o])};"string"!=typeof e&&(i=e,e=t),e=e||"fx";while(a--)n=w._data(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(l));return l(),s.promise(i)}});var z,W,q=/[\t\r\n\f]/g,Y=/\r/g,J=/^(?:input|select|textarea|button|object)$/i,U=/^(?:a|area)$/i,$=/^(?:checked|selected)$/i,K=w.support.getSetAttribute,Q=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,r,s,o=0,a=this.length,l="string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(x)||[];a>o;o++)if(i=this[o],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(q," "):" ")){s=0;while(r=t[s++])0>n.indexOf(" "+r+" ")&&(n+=r+" ");i.className=w.trim(n)}return this},removeClass:function(e){var t,i,n,r,s,o=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(x)||[];a>o;o++)if(i=this[o],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(q," "):"")){s=0;while(r=t[s++])while(n.indexOf(" "+r+" ")>=0)n=n.replace(" "+r+" "," ");i.className=e?w.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):w.isFunction(e)?this.each(function(i){w(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i){var t,n=0,s=w(this),o=e.match(x)||[];while(t=o[n++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(i===r||"boolean"===i)&&(this.className&&w._data(this,"__className__",this.className),this.className=this.className||e===!1?"":w._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",i=0,n=this.length;for(;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,r,s=this[0];{if(arguments.length)return r=w.isFunction(e),this.each(function(i){var s;1===this.nodeType&&(s=r?e.call(this,i,w(this).val()):e,null==s?s="":"number"==typeof s?s+="":w.isArray(s)&&(s=w.map(s,function(e){return null==e?"":e+""})),n=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,s,"value")!==t||(this.value=s))});if(s)return n=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(s,"value"))!==t?i:(i=s.value,"string"==typeof i?i.replace(Y,""):null==i?"":i)}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){var t,i,n=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,o=s?null:[],a=s?r+1:n.length,l=0>r?a:s?r:0;for(;a>l;l++)if(i=n[l],!(!i.selected&&l!==r||(w.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&w.nodeName(i.parentNode,"optgroup"))){if(t=w(i).val(),s)return t;o.push(t)}return o},set:function(e,t){var i,n,r=e.options,s=w.makeArray(t),o=r.length;while(o--)n=r[o],(n.selected=w.inArray(w(n).val(),s)>=0)&&(i=!0);return i||(e.selectedIndex=-1),s}}},attr:function(e,i,n){var s,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===r?w.prop(e,i,n):(1===a&&w.isXMLDoc(e)||(i=i.toLowerCase(),s=w.attrHooks[i]||(w.expr.match.bool.test(i)?W:z)),n===t?s&&"get"in s&&null!==(o=s.get(e,i))?o:(o=w.find.attr(e,i),null==o?t:o):null!==n?s&&"set"in s&&(o=s.set(e,n,i))!==t?o:(e.setAttribute(i,n+""),n):(w.removeAttr(e,i),t))},removeAttr:function(e,t){var i,n,r=0,s=t&&t.match(x);if(s&&1===e.nodeType)while(i=s[r++])n=w.propFix[i]||i,w.expr.match.bool.test(i)?Q&&K||!$.test(i)?e[n]=!1:e[w.camelCase("default-"+i)]=e[n]=!1:w.attr(e,i,""),e.removeAttribute(K?i:n)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&"radio"===t&&w.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,i,n){var r,s,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!w.isXMLDoc(e),o&&(i=w.propFix[i]||i,s=w.propHooks[i]),n!==t?s&&"set"in s&&(r=s.set(e,n,i))!==t?r:e[i]=n:s&&"get"in s&&null!==(r=s.get(e,i))?r:e[i]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):J.test(e.nodeName)||U.test(e.nodeName)&&e.href?0:-1}}}}),W={set:function(e,t,i){return t===!1?w.removeAttr(e,i):Q&&K||!$.test(i)?e.setAttribute(!K&&w.propFix[i]||i,i):e[w.camelCase("default-"+i)]=e[i]=!0,i}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,i){var n=w.expr.attrHandle[i]||w.find.attr;w.expr.attrHandle[i]=Q&&K||!$.test(i)?function(e,i,r){var s=w.expr.attrHandle[i],o=r?t:(w.expr.attrHandle[i]=t)!=n(e,i,r)?i.toLowerCase():null;return w.expr.attrHandle[i]=s,o}:function(e,i,n){return n?t:e[w.camelCase("default-"+i)]?i.toLowerCase():null}}),Q&&K||(w.attrHooks.value={set:function(e,i,n){return w.nodeName(e,"input")?(e.defaultValue=i,t):z&&z.set(e,i,n)}}),K||(z={set:function(e,i,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=i+="","value"===n||i===e.getAttribute(n)?i:t}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,i,n){var r;return n?t:(r=e.getAttributeNode(i))&&""!==r.value?r.value:null},w.valHooks.button={get:function(e,i){var n=e.getAttributeNode(i);return n&&n.specified?n.value:t},set:z.set},w.attrHooks.contenteditable={set:function(e,t,i){z.set(e,""===t?!1:t,i)}},w.each(["width","height"],function(e,i){w.attrHooks[i]={set:function(e,n){return""===n?(e.setAttribute(i,"auto"),n):t}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,i){return w.isArray(i)?e.checked=w.inArray(w(e).val(),i)>=0:t}},w.support.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,it=/^(?:focusinfocus|focusoutblur)$/,nt=/^([^.]*)(?:\.(.+)|)$/;function rt(){return!0}function st(){return!1}function ot(){try{return o.activeElement}catch(e){}}w.event={global:{},add:function(e,i,n,s,o){var a,l,u,h,c,f,d,p,m,g,y,v=w._data(e);if(v){n.handler&&(h=n,n=h.handler,o=h.selector),n.guid||(n.guid=w.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof w===r||e&&w.event.triggered===e.type?t:w.event.dispatch.apply(f.elem,arguments)},f.elem=e),i=(i||"").match(x)||[""],u=i.length;while(u--)a=nt.exec(i[u])||[],m=y=a[1],g=(a[2]||"").split(".").sort(),m&&(c=w.event.special[m]||{},m=(o?c.delegateType:c.bindType)||m,c=w.event.special[m]||{},d=w.extend({type:m,origType:y,data:s,handler:n,guid:n.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:g.join(".")},h),(p=l[m])||(p=l[m]=[],p.delegateCount=0,c.setup&&c.setup.call(e,s,g,f)!==!1||(e.addEventListener?e.addEventListener(m,f,!1):e.attachEvent&&e.attachEvent("on"+m,f))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),w.event.global[m]=!0);e=null}},remove:function(e,t,i,n,r){var s,o,a,l,u,h,c,f,d,p,m,g=w.hasData(e)&&w._data(e);if(g&&(h=g.events)){t=(t||"").match(x)||[""],u=t.length;while(u--)if(a=nt.exec(t[u])||[],d=m=a[1],p=(a[2]||"").split(".").sort(),d){c=w.event.special[d]||{},d=(n?c.delegateType:c.bindType)||d,f=h[d]||[],a=a[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=f.length;while(s--)o=f[s],!r&&m!==o.origType||i&&i.guid!==o.guid||a&&!a.test(o.namespace)||n&&n!==o.selector&&("**"!==n||!o.selector)||(f.splice(s,1),o.selector&&f.delegateCount--,c.remove&&c.remove.call(e,o));l&&!f.length&&(c.teardown&&c.teardown.call(e,p,g.handle)!==!1||w.removeEvent(e,d,g.handle),delete h[d])}else for(d in h)w.event.remove(e,d+t[u],i,n,!0);w.isEmptyObject(h)&&(delete g.handle,w._removeData(e,"events"))}},trigger:function(i,n,r,s){var a,l,u,h,c,f,d,p=[r||o],m=v.call(i,"type")?i.type:i,g=v.call(i,"namespace")?i.namespace.split("."):[];if(u=f=r=r||o,3!==r.nodeType&&8!==r.nodeType&&!it.test(m+w.event.triggered)&&(m.indexOf(".")>=0&&(g=m.split("."),m=g.shift(),g.sort()),l=0>m.indexOf(":")&&"on"+m,i=i[w.expando]?i:new w.Event(m,"object"==typeof i&&i),i.isTrigger=s?2:3,i.namespace=g.join("."),i.namespace_re=i.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=t,i.target||(i.target=r),n=null==n?[i]:w.makeArray(n,[i]),c=w.event.special[m]||{},s||!c.trigger||c.trigger.apply(r,n)!==!1)){if(!s&&!c.noBubble&&!w.isWindow(r)){for(h=c.delegateType||m,it.test(h+m)||(u=u.parentNode);u;u=u.parentNode)p.push(u),f=u;f===(r.ownerDocument||o)&&p.push(f.defaultView||f.parentWindow||e)}d=0;while((u=p[d++])&&!i.isPropagationStopped())i.type=d>1?h:c.bindType||m,a=(w._data(u,"events")||{})[i.type]&&w._data(u,"handle"),a&&a.apply(u,n),a=l&&u[l],a&&w.acceptData(u)&&a.apply&&a.apply(u,n)===!1&&i.preventDefault();if(i.type=m,!s&&!i.isDefaultPrevented()&&(!c._default||c._default.apply(p.pop(),n)===!1)&&w.acceptData(r)&&l&&r[m]&&!w.isWindow(r)){f=r[l],f&&(r[l]=null),w.event.triggered=m;try{r[m]()}catch(y){}w.event.triggered=t,f&&(r[l]=f)}return i.result}},dispatch:function(e){e=w.event.fix(e);var i,n,r,s,o,a=[],l=m.call(arguments),u=(w._data(this,"events")||{})[e.type]||[],h=w.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,e)!==!1){a=w.event.handlers.call(this,e,u),i=0;while((s=a[i++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((r=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=((w.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,l),n!==t&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()))}return h.postDispatch&&h.postDispatch.call(this,e),e.result}},handlers:function(e,i){var n,r,s,o,a=[],l=i.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(s=[],o=0;l>o;o++)r=i[o],n=r.selector+" ",s[n]===t&&(s[n]=r.needsContext?w(n,this).index(u)>=0:w.find(n,this,null,[u]).length),s[n]&&s.push(r);s.length&&a.push({elem:u,handlers:s})}return i.length>l&&a.push({elem:this,handlers:i.slice(l)}),a},fix:function(e){if(e[w.expando])return e;var t,i,n,r=e.type,s=e,a=this.fixHooks[r];a||(this.fixHooks[r]=a=tt.test(r)?this.mouseHooks:et.test(r)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,e=new w.Event(s),t=n.length;while(t--)i=n[t],e[i]=s[i];return e.target||(e.target=s.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,r,s,a=i.button,l=i.fromElement;return null==e.pageX&&null!=i.clientX&&(r=e.target.ownerDocument||o,s=r.documentElement,n=r.body,e.pageX=i.clientX+(s&&s.scrollLeft||n&&n.scrollLeft||0)-(s&&s.clientLeft||n&&n.clientLeft||0),e.pageY=i.clientY+(s&&s.scrollTop||n&&n.scrollTop||0)-(s&&s.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?i.toElement:l),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ot()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===ot()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return w.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=w.extend(new w.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?w.event.trigger(r,null,t):w.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},w.removeEvent=o.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===r&&(e[n]=null),e.detachEvent(n,i))},w.Event=function(e,i){return this instanceof w.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?rt:st):this.type=e,i&&w.extend(this,i),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0,t):new w.Event(e,i)},w.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=rt,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=rt,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=rt,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,s=e.handleObj;return(!r||r!==n&&!w.contains(n,r))&&(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){return w.nodeName(this,"form")?!1:(w.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=w.nodeName(i,"input")||w.nodeName(i,"button")?i.form:t;n&&!w._data(n,"submitBubbles")&&(w.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),w._data(n,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return w.nodeName(this,"form")?!1:(w.event.remove(this,"._submit"),t)}}),w.support.changeBubbles||(w.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(w.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)})),!1):(w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))}),t)},handle:function(e){var i=e.target;return this!==i||e.isSimulated||e.isTrigger||"radio"!==i.type&&"checkbox"!==i.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){0===i++&&o.addEventListener(e,n,!0)},teardown:function(){0===--i&&o.removeEventListener(e,n,!0)}}}),w.fn.extend({on:function(e,i,n,r,s){var o,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(o in e)this.on(o,i,n,e[o],s);return this}if(null==n&&null==r?(r=i,n=i=t):null==r&&("string"==typeof i?(r=n,n=t):(r=n,n=i,i=t)),r===!1)r=st;else if(!r)return this;return 1===s&&(a=r,r=function(e){return w().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=w.guid++)),this.each(function(){w.event.add(this,e,r,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var r,s;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(s in e)this.off(s,i,e[s]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=st),this.each(function(){w.event.remove(this,e,n,i)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,i){var n=this[0];return n?w.event.trigger(e,i,n,!0):t}});var at=/^.[^:#\[\.,]*$/,lt=/^(?:parents|prev(?:Until|All))/,ut=w.expr.match.needsContext,ht={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(e){var t,i=[],n=this,r=n.length;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;r>t;t++)if(w.contains(n[t],this))return!0}));for(t=0;r>t;t++)w.find(e,n[t],i);return i=this.pushStack(r>1?w.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},has:function(e){var t,i=w(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(w.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(ft(this,e||[],!0))},filter:function(e){return this.pushStack(ft(this,e||[],!1))},is:function(e){return!!ft(this,"string"==typeof e&&ut.test(e)?w(e):e||[],!1).length},closest:function(e,t){var i,n=0,r=this.length,s=[],o=ut.test(e)||"string"!=typeof e?w(e,t||this.context):0;for(;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(11>i.nodeType&&(o?o.index(i)>-1:1===i.nodeType&&w.find.matchesSelector(i,e))){i=s.push(i);break}return this.pushStack(s.length>1?w.unique(s):s)},index:function(e){return e?"string"==typeof e?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),n=w.merge(this.get(),i);return this.pushStack(w.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function ct(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,i){return w.dir(e,"parentNode",i)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,i){return w.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return w.dir(e,"previousSibling",i)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(i,n){var r=w.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=w.filter(n,r)),this.length>1&&(ht[e]||(r=w.unique(r)),lt.test(e)&&(r=r.reverse())),this.pushStack(r)}}),w.extend({filter:function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?w.find.matchesSelector(n,e)?[n]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,i,n){var r=[],s=e[i];while(s&&9!==s.nodeType&&(n===t||1!==s.nodeType||!w(s).is(n)))1===s.nodeType&&r.push(s),s=s[i];return r},sibling:function(e,t){var i=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});function ft(e,t,i){if(w.isFunction(t))return w.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return w.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(at.test(t))return w.filter(t,e,i);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==i})}function dt(e){var t=pt.split("|"),i=e.createDocumentFragment();if(i.createElement)while(t.length)i.createElement(t.pop());return i}var pt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",mt=/ jQuery\d+="(?:null|\d+)"/g,gt=RegExp("<(?:"+pt+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Tt=/<([\w:]+)/,wt=/<tbody/i,bt=/<|&#?\w+;/,xt=/<(?:script|style|link)/i,At=/^(?:checkbox|radio)$/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,St=/^$|\/(?:java|ecma)script/i,_t=/^true\/(.*)/,Et=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ct={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},It=dt(o),Lt=It.appendChild(o.createElement("div"));Ct.optgroup=Ct.option,Ct.tbody=Ct.tfoot=Ct.colgroup=Ct.caption=Ct.thead,Ct.th=Ct.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===t?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ot(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ot(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var i,n=e?w.filter(e,this):this,r=0;for(;null!=(i=n[r]);r++)t||1!==i.nodeType||w.cleanData(Dt(i)),i.parentNode&&(t&&w.contains(i.ownerDocument,i)&&Nt(Dt(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&w.cleanData(Dt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var i=this[0]||{},n=0,r=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(mt,""):t;if(!("string"!=typeof e||xt.test(e)||!w.support.htmlSerialize&&gt.test(e)||!w.support.leadingWhitespace&&yt.test(e)||Ct[(Tt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;r>n;n++)i=this[n]||{},1===i.nodeType&&(w.cleanData(Dt(i,!1)),i.innerHTML=e);i=0}catch(s){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(i){var n=e[t++],r=e[t++];r&&(n&&n.parentNode!==r&&(n=this.nextSibling),w(this).remove(),r.insertBefore(i,n))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,i){e=d.apply([],e);var n,r,s,o,a,l,u=0,h=this.length,c=this,f=h-1,p=e[0],m=w.isFunction(p);if(m||!(1>=h||"string"!=typeof p||w.support.checkClone)&&Mt.test(p))return this.each(function(n){var r=c.eq(n);m&&(e[0]=p.call(this,n,r.html())),r.domManip(e,t,i)});if(h&&(l=w.buildFragment(e,this[0].ownerDocument,!1,!i&&this),n=l.firstChild,1===l.childNodes.length&&(l=n),n)){for(o=w.map(Dt(l,"script"),Pt),s=o.length;h>u;u++)r=l,u!==f&&(r=w.clone(r,!0,!0),s&&w.merge(o,Dt(r,"script"))),t.call(this[u],r,u);if(s)for(a=o[o.length-1].ownerDocument,w.map(o,Xt),u=0;s>u;u++)r=o[u],St.test(r.type||"")&&!w._data(r,"globalEval")&&w.contains(a,r)&&(r.src?w._evalUrl(r.src):w.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Et,"")));l=n=null}return this}});function Ot(e,t){return w.nodeName(e,"table")&&w.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Pt(e){return e.type=(null!==w.find.attr(e,"type"))+"/"+e.type,e}function Xt(e){var t=_t.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Nt(e,t){var i,n=0;for(;null!=(i=e[n]);n++)w._data(i,"globalEval",!t||w._data(t[n],"globalEval"))}function kt(e,t){if(1===t.nodeType&&w.hasData(e)){var i,n,r,s=w._data(e),o=w._data(t,s),a=s.events;if(a){delete o.handle,o.events={};for(i in a)for(n=0,r=a[i].length;r>n;n++)w.event.add(t,i,a[i][n])}o.data&&(o.data=w.extend({},o.data))}}function Rt(e,t){var i,n,r;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!w.support.noCloneEvent&&t[w.expando]){r=w._data(t);for(n in r.events)w.removeEvent(t,n,r.handle);t.removeAttribute(w.expando)}"script"===i&&t.text!==e.text?(Pt(t).text=e.text,Xt(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&At.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){var i,n=0,r=[],s=w(e),o=s.length-1;for(;o>=n;n++)i=n===o?this:this.clone(!0),w(s[n])[t](i),p.apply(r,i.get());return this.pushStack(r)}});function Dt(e,i){var n,s,o=0,a=typeof e.getElementsByTagName!==r?e.getElementsByTagName(i||"*"):typeof e.querySelectorAll!==r?e.querySelectorAll(i||"*"):t;if(!a)for(a=[],n=e.childNodes||e;null!=(s=n[o]);o++)!i||w.nodeName(s,i)?a.push(s):w.merge(a,Dt(s,i));return i===t||i&&w.nodeName(e,i)?w.merge([e],a):a}function Gt(e){At.test(e.type)&&(e.defaultChecked=e.checked)}w.extend({clone:function(e,t,i){var n,r,s,o,a,l=w.contains(e.ownerDocument,e);if(w.support.html5Clone||w.isXMLDoc(e)||!gt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Lt.innerHTML=e.outerHTML,Lt.removeChild(s=Lt.firstChild)),!(w.support.noCloneEvent&&w.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(n=Dt(s),a=Dt(e),o=0;null!=(r=a[o]);++o)n[o]&&Rt(r,n[o]);if(t)if(i)for(a=a||Dt(e),n=n||Dt(s),o=0;null!=(r=a[o]);o++)kt(r,n[o]);else kt(e,s);return n=Dt(s,"script"),n.length>0&&Nt(n,!l&&Dt(e,"script")),n=a=r=null,s},buildFragment:function(e,t,i,n){var r,s,o,a,l,u,h,c=e.length,f=dt(t),d=[],p=0;for(;c>p;p++)if(s=e[p],s||0===s)if("object"===w.type(s))w.merge(d,s.nodeType?[s]:s);else if(bt.test(s)){a=a||f.appendChild(t.createElement("div")),l=(Tt.exec(s)||["",""])[1].toLowerCase(),h=Ct[l]||Ct._default,a.innerHTML=h[1]+s.replace(vt,"<$1></$2>")+h[2],r=h[0];while(r--)a=a.lastChild;if(!w.support.leadingWhitespace&&yt.test(s)&&d.push(t.createTextNode(yt.exec(s)[0])),!w.support.tbody){s="table"!==l||wt.test(s)?"<table>"!==h[1]||wt.test(s)?0:a:a.firstChild,r=s&&s.childNodes.length;while(r--)w.nodeName(u=s.childNodes[r],"tbody")&&!u.childNodes.length&&s.removeChild(u)}w.merge(d,a.childNodes),a.textContent="";while(a.firstChild)a.removeChild(a.firstChild);a=f.lastChild}else d.push(t.createTextNode(s));a&&f.removeChild(a),w.support.appendChecked||w.grep(Dt(d,"input"),Gt),p=0;while(s=d[p++])if((!n||-1===w.inArray(s,n))&&(o=w.contains(s.ownerDocument,s),a=Dt(f.appendChild(s),"script"),o&&Nt(a),i)){r=0;while(s=a[r++])St.test(s.type||"")&&i.push(s)}return a=null,f},cleanData:function(e,t){var i,n,s,o,a=0,l=w.expando,u=w.cache,h=w.support.deleteExpando,f=w.event.special;for(;null!=(i=e[a]);a++)if((t||w.acceptData(i))&&(s=i[l],o=s&&u[s])){if(o.events)for(n in o.events)f[n]?w.event.remove(i,n):w.removeEvent(i,n,o.handle);
u[s]&&(delete u[s],h?delete i[l]:typeof i.removeAttribute!==r?i.removeAttribute(l):i[l]=null,c.push(s))}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(i){w(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var jt,Bt,Ht,Ft=/alpha\([^)]*\)/i,Vt=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Wt=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Yt=RegExp("^("+b+")(.*)$","i"),Jt=RegExp("^("+b+")(?!px)[a-z%]+$","i"),Ut=RegExp("^([+-])=("+b+")","i"),$t={BODY:"block"},Kt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],ei=["Webkit","O","Moz","ms"];function ti(e,t){if(t in e)return t;var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,r=ei.length;while(r--)if(t=ei[r]+i,t in e)return t;return n}function ii(e,t){return e=t||e,"none"===w.css(e,"display")||!w.contains(e.ownerDocument,e)}function ni(e,t){var i,n,r,s=[],o=0,a=e.length;for(;a>o;o++)n=e[o],n.style&&(s[o]=w._data(n,"olddisplay"),i=n.style.display,t?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&ii(n)&&(s[o]=w._data(n,"olddisplay",ai(n.nodeName)))):s[o]||(r=ii(n),(i&&"none"!==i||!r)&&w._data(n,"olddisplay",r?i:w.css(n,"display"))));for(o=0;a>o;o++)n=e[o],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[o]||"":"none"));return e}w.fn.extend({css:function(e,i){return w.access(this,function(e,i,n){var r,s,o={},a=0;if(w.isArray(i)){for(s=Bt(e),r=i.length;r>a;a++)o[i[a]]=w.css(e,i[a],!1,s);return o}return n!==t?w.style(e,i,n):w.css(e,i)},e,i,arguments.length>1)},show:function(){return ni(this,!0)},hide:function(){return ni(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ii(this)?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ht(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,a,l=w.camelCase(i),u=e.style;if(i=w.cssProps[l]||(w.cssProps[l]=ti(u,l)),a=w.cssHooks[i]||w.cssHooks[l],n===t)return a&&"get"in a&&(s=a.get(e,!1,r))!==t?s:u[i];if(o=typeof n,"string"===o&&(s=Ut.exec(n))&&(n=(s[1]+1)*s[2]+parseFloat(w.css(e,i)),o="number"),!(null==n||"number"===o&&isNaN(n)||("number"!==o||w.cssNumber[l]||(n+="px"),w.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(u[i]="inherit"),a&&"set"in a&&(n=a.set(e,n,r))===t)))try{u[i]=n}catch(h){}}},css:function(e,i,n,r){var s,o,a,l=w.camelCase(i);return i=w.cssProps[l]||(w.cssProps[l]=ti(e.style,l)),a=w.cssHooks[i]||w.cssHooks[l],a&&"get"in a&&(o=a.get(e,!0,n)),o===t&&(o=Ht(e,i,r)),"normal"===o&&i in Qt&&(o=Qt[i]),""===n||n?(s=parseFloat(o),n===!0||w.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(Bt=function(t){return e.getComputedStyle(t,null)},Ht=function(e,i,n){var r,s,o,a=n||Bt(e),l=a?a.getPropertyValue(i)||a[i]:t,u=e.style;return a&&(""!==l||w.contains(e.ownerDocument,e)||(l=w.style(e,i)),Jt.test(l)&&qt.test(i)&&(r=u.width,s=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=a.width,u.width=r,u.minWidth=s,u.maxWidth=o)),l}):o.documentElement.currentStyle&&(Bt=function(e){return e.currentStyle},Ht=function(e,i,n){var r,s,o,a=n||Bt(e),l=a?a[i]:t,u=e.style;return null==l&&u&&u[i]&&(l=u[i]),Jt.test(l)&&!zt.test(i)&&(r=u.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),u.left="fontSize"===i?"1em":l,l=u.pixelLeft+"px",u.left=r,o&&(s.left=o)),""===l?"auto":l});function ri(e,t,i){var n=Yt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function si(e,t,i,n,r){var s=i===(n?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===i&&(o+=w.css(e,i+Zt[s],!0,r)),n?("content"===i&&(o-=w.css(e,"padding"+Zt[s],!0,r)),"margin"!==i&&(o-=w.css(e,"border"+Zt[s]+"Width",!0,r))):(o+=w.css(e,"padding"+Zt[s],!0,r),"padding"!==i&&(o+=w.css(e,"border"+Zt[s]+"Width",!0,r)));return o}function oi(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=Bt(e),o=w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,s);if(0>=r||null==r){if(r=Ht(e,t,s),(0>r||null==r)&&(r=e.style[t]),Jt.test(r))return r;n=o&&(w.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+si(e,t,i||(o?"border":"content"),n,s)+"px"}function ai(e){var t=o,i=$t[e];return i||(i=li(e,t),"none"!==i&&i||(jt=(jt||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(jt[0].contentWindow||jt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),i=li(e,t),jt.detach()),$t[e]=i),i}function li(e,t){var i=w(t.createElement(e)).appendTo(t.body),n=w.css(i[0],"display");return i.remove(),n}w.each(["height","width"],function(e,i){w.cssHooks[i]={get:function(e,n,r){return n?0===e.offsetWidth&&Wt.test(w.css(e,"display"))?w.swap(e,Kt,function(){return oi(e,i,r)}):oi(e,i,r):t},set:function(e,t,n){var r=n&&Bt(e);return ri(e,t,n?si(e,i,n,w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,r),r):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return Vt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,r=w.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===w.trim(s.replace(Ft,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=Ft.test(s)?s.replace(Ft,r):s+" "+r)}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,i){return i?w.swap(e,{display:"inline-block"},Ht,[e,"marginRight"]):t}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,i){w.cssHooks[i]={get:function(e,n){return n?(n=Ht(e,i),Jt.test(n)?w(e).position()[i]+"px":n):t}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!w.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||w.css(e,"display"))},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(i){var n=0,r={},s="string"==typeof i?i.split(" "):[i];for(;4>n;n++)r[e+Zt[n]+t]=s[n]||s[n-2]||s[0];return r}},qt.test(e)||(w.cssHooks[e+t].set=ri)});var ui=/%20/g,hi=/\[\]$/,ci=/\r?\n/g,fi=/^(?:submit|button|image|reset|file)$/i,di=/^(?:input|select|textarea|keygen)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&di.test(this.nodeName)&&!fi.test(e)&&(this.checked||!At.test(e))}).map(function(e,t){var i=w(this).val();return null==i?null:w.isArray(i)?w.map(i,function(e){return{name:t.name,value:e.replace(ci,"\r\n")}}):{name:t.name,value:i.replace(ci,"\r\n")}}).get()}}),w.param=function(e,i){var n,r=[],s=function(e,t){t=w.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=w.ajaxSettings&&w.ajaxSettings.traditional),w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){s(this.name,this.value)});else for(n in e)pi(n,e[n],i,s);return r.join("&").replace(ui,"+")};function pi(e,t,i,n){var r;if(w.isArray(t))w.each(t,function(t,r){i||hi.test(e)?n(e,r):pi(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==w.type(t))n(e,t);else for(r in t)pi(e+"["+r+"]",t[r],i,n)}w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var mi,gi,yi=w.now(),vi=/\?/,Ti=/#.*$/,wi=/([?&])_=[^&]*/,bi=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ai=/^(?:GET|HEAD)$/,Mi=/^\/\//,Si=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_i=w.fn.load,Ei={},Ci={},Ii="*/".concat("*");try{gi=s.href}catch(Li){gi=o.createElement("a"),gi.href="",gi=gi.href}mi=Si.exec(gi.toLowerCase())||[];function Oi(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,s=t.toLowerCase().match(x)||[];if(w.isFunction(i))while(n=s[r++])"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Pi(e,i,n,r){var s={},o=e===Ci;function a(l){var u;return s[l]=!0,w.each(e[l]||[],function(e,l){var h=l(i,n,r);return"string"!=typeof h||o||s[h]?o?!(u=h):t:(i.dataTypes.unshift(h),a(h),!1)}),u}return a(i.dataTypes[0])||!s["*"]&&a("*")}function Xi(e,i){var n,r,s=w.ajaxSettings.flatOptions||{};for(r in i)i[r]!==t&&((s[r]?e:n||(n={}))[r]=i[r]);return n&&w.extend(!0,e,n),e}w.fn.load=function(e,i,n){if("string"!=typeof e&&_i)return _i.apply(this,arguments);var r,s,o,a=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l,e.length),e=e.slice(0,l)),w.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(o="POST"),a.length>0&&w.ajax({url:e,type:o,dataType:"html",data:i}).done(function(e){s=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,s||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gi,type:"GET",isLocal:xi.test(mi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ii,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Xi(Xi(e,w.ajaxSettings),t):Xi(w.ajaxSettings,e)},ajaxPrefilter:Oi(Ei),ajaxTransport:Oi(Ci),ajax:function(e,i){"object"==typeof e&&(i=e,e=t),i=i||{};var n,r,s,o,a,l,u,h,c=w.ajaxSetup({},i),f=c.context||c,d=c.context&&(f.nodeType||f.jquery)?w(f):w.event,p=w.Deferred(),m=w.Callbacks("once memory"),g=c.statusCode||{},y={},v={},T=0,b="canceled",A={readyState:0,getResponseHeader:function(e){var t;if(2===T){if(!h){h={};while(t=bi.exec(o))h[t[1].toLowerCase()]=t[2]}t=h[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===T?o:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return T||(e=v[i]=v[i]||e,y[e]=t),this},overrideMimeType:function(e){return T||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>T)for(t in e)g[t]=[g[t],e[t]];else A.always(e[A.status]);return this},abort:function(e){var t=e||b;return u&&u.abort(t),S(0,t),this}};if(p.promise(A).complete=m.add,A.success=A.done,A.error=A.fail,c.url=((e||c.url||gi)+"").replace(Ti,"").replace(Mi,mi[1]+"//"),c.type=i.method||i.type||c.method||c.type,c.dataTypes=w.trim(c.dataType||"*").toLowerCase().match(x)||[""],null==c.crossDomain&&(n=Si.exec(c.url.toLowerCase()),c.crossDomain=!(!n||n[1]===mi[1]&&n[2]===mi[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(mi[3]||("http:"===mi[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=w.param(c.data,c.traditional)),Pi(Ei,c,i,A),2===T)return A;l=c.global,l&&0===w.active++&&w.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Ai.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(vi.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=wi.test(s)?s.replace(wi,"$1_="+yi++):s+(vi.test(s)?"&":"?")+"_="+yi++)),c.ifModified&&(w.lastModified[s]&&A.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&A.setRequestHeader("If-None-Match",w.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||i.contentType)&&A.setRequestHeader("Content-Type",c.contentType),A.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Ii+"; q=0.01":""):c.accepts["*"]);for(r in c.headers)A.setRequestHeader(r,c.headers[r]);if(c.beforeSend&&(c.beforeSend.call(f,A,c)===!1||2===T))return A.abort();b="abort";for(r in{success:1,error:1,complete:1})A[r](c[r]);if(u=Pi(Ci,c,i,A)){A.readyState=1,l&&d.trigger("ajaxSend",[A,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){A.abort("timeout")},c.timeout));try{T=1,u.send(y,S)}catch(M){if(!(2>T))throw M;S(-1,M)}}else S(-1,"No Transport");function S(e,i,n,r){var h,y,v,b,x,M=i;2!==T&&(T=2,a&&clearTimeout(a),u=t,o=r||"",A.readyState=e>0?4:0,h=e>=200&&300>e||304===e,n&&(b=Ni(c,A,n)),b=ki(c,b,A,h),h?(c.ifModified&&(x=A.getResponseHeader("Last-Modified"),x&&(w.lastModified[s]=x),x=A.getResponseHeader("etag"),x&&(w.etag[s]=x)),204===e||"HEAD"===c.type?M="nocontent":304===e?M="notmodified":(M=b.state,y=b.data,v=b.error,h=!v)):(v=M,(e||!M)&&(M="error",0>e&&(e=0))),A.status=e,A.statusText=(i||M)+"",h?p.resolveWith(f,[y,M,A]):p.rejectWith(f,[A,M,v]),A.statusCode(g),g=t,l&&d.trigger(h?"ajaxSuccess":"ajaxError",[A,c,h?y:v]),m.fireWith(f,[A,M]),l&&(d.trigger("ajaxComplete",[A,c]),--w.active||w.event.trigger("ajaxStop")))}return A},getJSON:function(e,t,i){return w.get(e,t,i,"json")},getScript:function(e,i){return w.get(e,t,i,"script")}}),w.each(["get","post"],function(e,i){w[i]=function(e,n,r,s){return w.isFunction(n)&&(s=s||r,r=n,n=t),w.ajax({url:e,type:i,dataType:s,data:n,success:r})}});function Ni(e,i,n){var r,s,o,a,l=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),s===t&&(s=e.mimeType||i.getResponseHeader("Content-Type"));if(s)for(a in l)if(l[a]&&l[a].test(s)){u.unshift(a);break}if(u[0]in n)o=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){o=a;break}r||(r=a)}o=o||r}return o?(o!==u[0]&&u.unshift(o),n[o]):t}function ki(e,t,i,n){var r,s,o,a,l,u={},h=e.dataTypes.slice();if(h[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];s=h.shift();while(s)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=h.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=u[l+" "+s]||u["* "+s],!o)for(r in u)if(a=r.split(" "),a[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){o===!0?o=u[r]:u[r]!==!0&&(s=a[0],h.unshift(a[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=o.head||w("head")[0]||o.documentElement;return{send:function(t,r){i=o.createElement("script"),i.async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t||r(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(t,!0)}}}});var Ri=[],Di=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ri.pop()||w.expando+"_"+yi++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(i,n,r){var s,o,a,l=i.jsonp!==!1&&(Di.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Di.test(i.data)&&"data");return l||"jsonp"===i.dataTypes[0]?(s=i.jsonpCallback=w.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(Di,"$1"+s):i.jsonp!==!1&&(i.url+=(vi.test(i.url)?"&":"?")+i.jsonp+"="+s),i.converters["script json"]=function(){return a||w.error(s+" was not called"),a[0]},i.dataTypes[0]="json",o=e[s],e[s]=function(){a=arguments},r.always(function(){e[s]=o,i[s]&&(i.jsonpCallback=n.jsonpCallback,Ri.push(s)),a&&w.isFunction(o)&&o(a[0]),a=o=t}),"script"):t});var Gi,ji,Bi=0,Hi=e.ActiveXObject&&function(){var e;for(e in Gi)Gi[e](t,!0)};function Fi(){try{return new e.XMLHttpRequest}catch(t){}}function Vi(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}w.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fi()||Vi()}:Fi,ji=w.ajaxSettings.xhr(),w.support.cors=!!ji&&"withCredentials"in ji,ji=w.support.ajax=!!ji,ji&&w.ajaxTransport(function(i){if(!i.crossDomain||w.support.cors){var n;return{send:function(r,s){var o,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(a in r)l.setRequestHeader(a,r[a])}catch(u){}l.send(i.hasContent&&i.data||null),n=function(e,r){var a,u,h,c;try{if(n&&(r||4===l.readyState))if(n=t,o&&(l.onreadystatechange=w.noop,Hi&&delete Gi[o]),r)4!==l.readyState&&l.abort();else{c={},a=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(c.text=l.responseText);try{h=l.statusText}catch(f){h=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=c.text?200:404}}catch(d){r||s(-1,d)}c&&s(a,h,c,u)},i.async?4===l.readyState?setTimeout(n):(o=++Bi,Hi&&(Gi||(Gi={},w(e).unload(Hi)),Gi[o]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(t,!0)}}}});var zi,Wi,qi=/^(?:toggle|show|hide)$/,Yi=RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),Ji=/queueHooks$/,Ui=[tn],$i={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),r=Yi.exec(t),s=r&&r[3]||(w.cssNumber[e]?"":"px"),o=(w.cssNumber[e]||"px"!==s&&+n)&&Yi.exec(w.css(i.elem,e)),a=1,l=20;if(o&&o[3]!==s){s=s||o[3],r=r||[],o=+n||1;do a=a||".5",o/=a,w.style(i.elem,e,o+s);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return r&&(o=i.start=+o||+n||0,i.unit=s,i.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),i}]};function Ki(){return setTimeout(function(){zi=t}),zi=w.now()}function Qi(e,t,i){var n,r=($i[t]||[]).concat($i["*"]),s=0,o=r.length;for(;o>s;s++)if(n=r[s].call(i,t,e))return n}function Zi(e,t,i){var n,r,s=0,o=Ui.length,a=w.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;var t=zi||Ki(),i=Math.max(0,u.startTime+u.duration-t),n=i/u.duration||0,s=1-n,o=0,l=u.tweens.length;for(;l>o;o++)u.tweens[o].run(s);return a.notifyWith(e,[u,s,i]),1>s&&l?i:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:zi||Ki(),duration:i.duration,tweens:[],createTween:function(t,i){var n=w.Tween(e,u.opts,t,i,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var i=0,n=t?u.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)u.tweens[i].run(1);return t?a.resolveWith(e,[u,t]):a.rejectWith(e,[u,t]),this}}),h=u.props;for(en(h,u.opts.specialEasing);o>s;s++)if(n=Ui[s].call(u,e,h,u.opts))return n;return w.map(h,Qi,u),w.isFunction(u.opts.start)&&u.opts.start.call(e,u),w.fx.timer(w.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function en(e,t){var i,n,r,s,o;for(i in e)if(n=w.camelCase(i),r=t[n],s=e[i],w.isArray(s)&&(r=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),o=w.cssHooks[n],o&&"expand"in o){s=o.expand(s),delete e[n];for(i in s)i in e||(e[i]=s[i],t[i]=r)}else t[n]=r}w.Animation=w.extend(Zi,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var i,n=0,r=e.length;for(;r>n;n++)i=e[n],$i[i]=$i[i]||[],$i[i].unshift(t)},prefilter:function(e,t){t?Ui.unshift(e):Ui.push(e)}});function tn(e,t,i){var n,r,s,o,a,l,u=this,h={},c=e.style,f=e.nodeType&&ii(e),d=w._data(e,"fxshow");i.queue||(a=w._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[c.overflow,c.overflowX,c.overflowY],"inline"===w.css(e,"display")&&"none"===w.css(e,"float")&&(w.support.inlineBlockNeedsLayout&&"inline"!==ai(e.nodeName)?c.zoom=1:c.display="inline-block")),i.overflow&&(c.overflow="hidden",w.support.shrinkWrapBlocks||u.always(function(){c.overflow=i.overflow[0],c.overflowX=i.overflow[1],c.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],qi.exec(r)){if(delete t[n],s=s||"toggle"===r,r===(f?"hide":"show"))continue;h[n]=d&&d[n]||w.style(e,n)}if(!w.isEmptyObject(h)){d?"hidden"in d&&(f=d.hidden):d=w._data(e,"fxshow",{}),s&&(d.hidden=!f),f?w(e).show():u.done(function(){w(e).hide()}),u.done(function(){var t;w._removeData(e,"fxshow");for(t in h)w.style(e,t,h[t])});for(n in h)o=Qi(f?d[n]:0,n,u),n in d||(d[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function nn(e,t,i,n,r){return new nn.prototype.init(e,t,i,n,r)}w.Tween=nn,nn.prototype={constructor:nn,init:function(e,t,i,n,r,s){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(w.cssNumber[i]?"":"px")},cur:function(){var e=nn.propHooks[this.prop];return e&&e.get?e.get(this):nn.propHooks._default.get(this)},run:function(e){var t,i=nn.propHooks[this.prop];return this.pos=t=this.options.duration?w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):nn.propHooks._default.set(this),this}},nn.prototype.init.prototype=nn.prototype,nn.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=w.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[w.cssProps[e.prop]]||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},nn.propHooks.scrollTop=nn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var i=w.fn[t];w.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(rn(t,!0),e,n,r)}}),w.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ii).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=w.isEmptyObject(e),s=w.speed(t,i,n),o=function(){var t=Zi(this,w.extend({},e),s);(r||w._data(this,"finish"))&&t.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,i,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=w.timers,o=w._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&Ji.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&w.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=w._data(this),n=i[e+"queue"],r=i[e+"queueHooks"],s=w.timers,o=n?n.length:0;for(i.finish=!0,w.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}});function rn(e,t){var i,n={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)i=Zt[r],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}w.each({slideDown:rn("show"),slideUp:rn("hide"),slideToggle:rn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),w.speed=function(e,t,i){var n=e&&"object"==typeof e?w.extend({},e):{complete:i||!i&&t||w.isFunction(e)&&e,duration:e,easing:i&&t||t&&!w.isFunction(t)&&t};return n.duration=w.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in w.fx.speeds?w.fx.speeds[n.duration]:w.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){w.isFunction(n.old)&&n.old.call(this),n.queue&&w.dequeue(this,n.queue)},n},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=nn.prototype.init,w.fx.tick=function(){var e,i=w.timers,n=0;for(zi=w.now();i.length>n;n++)e=i[n],e()||i[n]!==e||i.splice(n--,1);i.length||w.fx.stop(),zi=t},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Wi||(Wi=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Wi),Wi=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){w.offset.setOffset(this,e,t)});var i,n,s={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a)return i=a.documentElement,w.contains(i,o)?(typeof o.getBoundingClientRect!==r&&(s=o.getBoundingClientRect()),n=sn(a),{top:s.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:s.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):s},w.offset={setOffset:function(e,t,i){var n=w.css(e,"position");"static"===n&&(e.style.position="relative");var r=w(e),s=r.offset(),o=w.css(e,"top"),a=w.css(e,"left"),l=("absolute"===n||"fixed"===n)&&w.inArray("auto",[o,a])>-1,u={},h={},c,f;l?(h=r.position(),c=h.top,f=h.left):(c=parseFloat(o)||0,f=parseFloat(a)||0),w.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(u.top=t.top-s.top+c),null!=t.left&&(u.left=t.left-s.left+f),"using"in t?t.using.call(e,u):r.css(u)}},w.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===w.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(i=e.offset()),i.top+=w.css(e[0],"borderTopWidth",!0),i.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-w.css(n,"marginTop",!0),left:t.left-i.left-w.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||a;while(e&&!w.nodeName(e,"html")&&"static"===w.css(e,"position"))e=e.offsetParent;return e||a})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);w.fn[e]=function(r){return w.access(this,function(e,r,s){var o=sn(e);return s===t?o?i in o?o[i]:o.document.documentElement[r]:e[r]:(o?o.scrollTo(n?w(o).scrollLeft():s,n?s:w(o).scrollTop()):e[r]=s,t)},e,r,arguments.length,null)}});function sn(e){return w.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}w.each({Height:"height",Width:"width"},function(e,i){w.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,r){w.fn[r]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||s===!0?"margin":"border");return w.access(this,function(i,n,r){var s;return w.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(s=i.documentElement,Math.max(i.body["scroll"+e],s["scroll"+e],i.body["offset"+e],s["offset"+e],s["client"+e])):r===t?w.css(i,n,a):w.style(i,n,r,a)},i,o?r:t,o,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=w:(e.jQuery=e.$=w,"function"==typeof define&&define.amd&&define("jquery",[],function(){return w}))})(window);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,n,r){return jQuery.easing[jQuery.easing.def](e,t,i,n,r)},easeInQuad:function(e,t,i,n,r){return n*(t/=r)*t+i},easeOutQuad:function(e,t,i,n,r){return-n*(t/=r)*(t-2)+i},easeInOutQuad:function(e,t,i,n,r){if((t/=r/2)<1){return n/2*t*t+i}return-n/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,n,r){return n*(t/=r)*t*t+i},easeOutCubic:function(e,t,i,n,r){return n*((t=t/r-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,n,r){if((t/=r/2)<1){return n/2*t*t*t+i}return n/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,n,r){return n*(t/=r)*t*t*t+i},easeOutQuart:function(e,t,i,n,r){return-n*((t=t/r-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,n,r){if((t/=r/2)<1){return n/2*t*t*t*t+i}return-n/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,n,r){return n*(t/=r)*t*t*t*t+i},easeOutQuint:function(e,t,i,n,r){return n*((t=t/r-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,n,r){if((t/=r/2)<1){return n/2*t*t*t*t*t+i}return n/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+i},easeOutSine:function(e,t,i,n,r){return n*Math.sin(t/r*(Math.PI/2))+i},easeInOutSine:function(e,t,i,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+i},easeInExpo:function(e,t,i,n,r){return t==0?i:n*Math.pow(2,10*(t/r-1))+i},easeOutExpo:function(e,t,i,n,r){return t==r?i+n:n*(-Math.pow(2,-10*t/r)+1)+i},easeInOutExpo:function(e,t,i,n,r){if(t==0){return i}if(t==r){return i+n}if((t/=r/2)<1){return n/2*Math.pow(2,10*(t-1))+i}return n/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(e,t,i,n,r){return-n*(Math.sqrt(1-(t/=r)*t)-1)+i},easeOutCirc:function(e,t,i,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+i},easeInOutCirc:function(e,t,i,n,r){if((t/=r/2)<1){return-n/2*(Math.sqrt(1-t*t)-1)+i}return n/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,n,r){var s=1.70158;var o=0;var a=n;if(t==0){return i}if((t/=r)==1){return i+n}if(!o){o=r*.3}if(a<Math.abs(n)){a=n;var s=o/4}else{var s=o/(2*Math.PI)*Math.asin(n/a)}return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*2*Math.PI/o))+i},easeOutElastic:function(e,t,i,n,r){var s=1.70158;var o=0;var a=n;if(t==0){return i}if((t/=r)==1){return i+n}if(!o){o=r*.3}if(a<Math.abs(n)){a=n;var s=o/4}else{var s=o/(2*Math.PI)*Math.asin(n/a)}return a*Math.pow(2,-10*t)*Math.sin((t*r-s)*2*Math.PI/o)+n+i},easeInOutElastic:function(e,t,i,n,r){var s=1.70158;var o=0;var a=n;if(t==0){return i}if((t/=r/2)==2){return i+n}if(!o){o=r*.3*1.5}if(a<Math.abs(n)){a=n;var s=o/4}else{var s=o/(2*Math.PI)*Math.asin(n/a)}if(t<1){return-.5*a*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*2*Math.PI/o)+i}return a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-s)*2*Math.PI/o)*.5+n+i},easeInBack:function(e,t,i,n,r,s){if(s==undefined){s=1.70158}return n*(t/=r)*t*((s+1)*t-s)+i},easeOutBack:function(e,t,i,n,r,s){if(s==undefined){s=1.70158}return n*((t=t/r-1)*t*((s+1)*t+s)+1)+i},easeInOutBack:function(e,t,i,n,r,s){if(s==undefined){s=1.70158}if((t/=r/2)<1){return n/2*t*t*(((s*=1.525)+1)*t-s)+i}return n/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+i},easeInBounce:function(e,t,i,n,r){return n-jQuery.easing.easeOutBounce(e,r-t,0,n,r)+i
},easeOutBounce:function(e,t,i,n,r){if((t/=r)<1/2.75){return n*7.5625*t*t+i}else{if(t<2/2.75){return n*(7.5625*(t-=1.5/2.75)*t+.75)+i}else{if(t<2.5/2.75){return n*(7.5625*(t-=2.25/2.75)*t+.9375)+i}else{return n*(7.5625*(t-=2.625/2.75)*t+.984375)+i}}}},easeInOutBounce:function(e,t,i,n,r){if(t<r/2){return jQuery.easing.easeInBounce(e,t*2,0,n,r)*.5+i}return jQuery.easing.easeOutBounce(e,t*2-r,0,n,r)*.5+n*.5+i}});window.me=window.me||{};(function(e){var t=e.document;me={mod:"melonJS",version:"0.9.10"};me.sys={fps:60,interpolation:false,scale:null,scalingInterpolation:false,gravity:undefined,stopOnAudioError:true,pauseOnBlur:true,resumeOnFocus:true,stopOnBlur:false,preRender:false,checkVersion:function(e,t){t=t||me.version;var i=e.split(".");var n=t.split(".");var r=Math.min(i.length,n.length);var s=0;for(var o=0;o<r;o++){if(s=+i[o]-+n[o]){break}}return s?s:i.length-n.length}};var i=false;var n=false,r=false,s=[];function o(){if(!r){if(!t.body){return setTimeout(o,13)}if(t.removeEventListener){t.removeEventListener("DOMContentLoaded",o,false)}else{e.removeEventListener("load",o,false)}r=true;for(var i=0;i<s.length;i++){s[i].call(e,[])}s.length=0}}function a(){if(n){return}n=true;if(t.readyState==="complete"){return o()}else{if(t.addEventListener){t.addEventListener("DOMContentLoaded",o,false)}e.addEventListener("load",o,false)}}e.onReady=function(t){a();if(r){t.call(e,[])}else{s.push(function(){return t.call(e,[])})}return this};e.onReady(function(){d()});var l=false,u=/var xyz/.test(function(){var e})?/\bparent\b/:/[\D|\d]*/;Object.extend=function(e){var t=this.prototype;l=true;var i=new this;l=false;for(var n in e){i[n]=typeof e[n]==="function"&&typeof t[n]==="function"&&u.test(e[n])?function(e,i){return function(){var n=this.parent;this.parent=t[e];var r=i.apply(this,arguments);this.parent=n;return r}}(n,e[n]):e[n]}function r(){if(!l&&this.init){this.init.apply(this,arguments)}}r.prototype=i;r.constructor=r;r.extend=Object.extend;return r};if(typeof Object.create!=="function"){Object.create=function(e){function t(){}t.prototype=e;return new t}}if(!Function.prototype.bind){function h(){}Function.prototype.bind=function c(e){var t=this;if(typeof t!=="function"){throw new TypeError("Function.prototype.bind called on incompatible "+t)}var i=Array.prototype.slice.call(arguments,1);var n=function(){if(this instanceof n){var r=t.apply(this,i.concat(Array.prototype.slice.call(arguments)));if(Object(r)===r){return r}return this}else{return t.apply(e,i.concat(Array.prototype.slice.call(arguments)))}};if(t.prototype){h.prototype=t.prototype;n.prototype=new h;h.prototype=null}return n}}if(!window.throttle){window.throttle=function(e,t,i,n){var r=Date.now(),s;if(typeof t!=="boolean"){t=false}return function(){var n=Date.now();var o=n-r;var a=arguments;if(o<e){if(t===false){clearTimeout(s);s=setTimeout(function(){r=n;return i.apply(null,a)},o)}}else{r=n;return i.apply(null,a)}}}}if(typeof Date.now==="undefined"){Date.now=function(){return(new Date).getTime()}}if(typeof console==="undefined"){console={log:function(){},info:function(){},error:function(){alert(Array.prototype.slice.call(arguments).join(", "))}}}Function.prototype.defer=function(){var e=this,t=Array.prototype.slice.call(arguments);return window.setTimeout(function(){return e.apply(e,t)},.01)};if(!Object.defineProperty){Object.defineProperty=function(e,t,i){if(e.__defineGetter__){if(i.get){e.__defineGetter__(t,i.get)}if(i.set){e.__defineSetter__(t,i.set)}}else{throw"melonJS: Object.defineProperty not supported"}}}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}}String.prototype.isNumeric=function(){return this!==null&&!isNaN(this)&&this.trim()!==""};String.prototype.isBoolean=function(){return this!==null&&("true"===this.trim()||"false"===this.trim())};String.prototype.contains=function(e){return this.indexOf(e)>-1};String.prototype.toHex=function(){var e="",t=0;while(t<this.length){e+=this.charCodeAt(t++).toString(16)}return e};Number.prototype.clamp=function(e,t){return this<e?e:this>t?t:+this};Number.prototype.random=function(e,t){return~~(Math.random()*(t-e+1))+e};Number.prototype.round=function(){var e=arguments.length<2?this:arguments[0];var t=Math.pow(10,arguments[1]||arguments[0]||0);return Math.round(e*t)/t};Number.prototype.toHex=function(){return"0123456789ABCDEF".charAt(this-this%16>>4)+"0123456789ABCDEF".charAt(this%16)};Number.prototype.sign=function(){return this<0?-1:this>0?1:0};Number.prototype.degToRad=function(e){return(e||this)/180*Math.PI};Number.prototype.radToDeg=function(e){return(e||this)*(180/Math.PI)};Array.prototype.remove=function(e){var t=Array.prototype.indexOf.call(this,e);if(t!==-1){Array.prototype.splice.call(this,t,1)}return this};if(!Array.prototype.forEach){Array.prototype.forEach=function(e,t){for(var i=0,n=this.length;n--;i++){e.call(t||this,this[i],i,this)}}}Object.defineProperty(me,"initialized",{get:function f(){return i}});function d(){if(i){return}me.device._check();me.save._init();me.loader.setNocache(t.location.href.match(/\?nocache/)||false);me.timer.init();me.mapReader=new me.TMXMapReader;me.state.init();me.entityPool.init();me.levelDirector.reset();i=true}me.game=function(){var e={};var t=null;var i=false;var n=null;var r=true;e.viewport=null;e.collisionMap=null;e.currentLevel=null;e.world=null;e.mergeGroup=true;e.sortOn="z";e.renderer=null;e.NO_OBJECT=0;e.ENEMY_OBJECT=1;e.COLLECTABLE_OBJECT=2;e.ACTION_OBJECT=3;e.onLevelLoaded=null;e.init=function(n,s){if(!i){n=n||me.video.getWidth();s=s||me.video.getHeight();e.viewport=new me.Viewport(0,0,n,s);e.world=new me.ObjectContainer(0,0,n,s);e.world.name="rootContainer";t=me.video.getSystemContext();me.event.publish(me.event.GAME_INIT);r=true;i=true}};e.reset=function(){e.removeAll();if(e.viewport){e.viewport.reset()}t.setTransform(1,0,0,1,0,0);e.currentLevel={pos:{x:0,y:0}}};e.loadTMXLevel=function(i){e.world.autoSort=false;e.currentLevel=i;e.collisionMap=e.currentLevel.getLayerByName("collision");if(!e.collisionMap||!e.collisionMap.isCollisionMap){console.error("WARNING : no collision map detected")}var n=e.currentLevel.getLayers();for(var r=n.length;r--;){if(n[r].visible){e.add(n[r])}}e.viewport.setBounds(Math.max(e.currentLevel.width,e.viewport.width),Math.max(e.currentLevel.height,e.viewport.height));var s=e.world;var o=e.currentLevel.getObjectGroups();for(var a=0;a<o.length;a++){var l=o[a];if(e.mergeGroup===false){s=new me.ObjectContainer;s.name=l.name;s.visible=l.visible;s.z=l.z;s.setOpacity(l.opacity);s.autoSort=false}for(var u=0;u<l.objects.length;u++){var h=l.objects[u];var c=me.entityPool.newInstanceOf(h.name,h.x,h.y,h);if(c){c.z=l.z;c.visible=l.visible===true;if(e.mergeGroup===true&&c.isRenderable===true){c.setOpacity(c.getOpacity()*l.opacity);if(c.renderable!==null){c.renderable.setOpacity(c.renderable.getOpacity()*l.opacity)}}s.addChild(c)}}if(e.mergeGroup===false){e.world.addChild(s);s.autoSort=true}}e.world.sort(true);e.world.autoSort=true;if(e.currentLevel.pos.x!==e.currentLevel.pos.y){t.translate(e.currentLevel.pos.x,e.currentLevel.pos.y)}if(e.onLevelLoaded){e.onLevelLoaded.call(e.onLevelLoaded,i.name)}me.event.publish(me.event.LEVEL_LOADED,[i.name])};e.add=function(t,i){if(typeof i!=="undefined"){t.z=i}e.world.addChild(t)};e.getEntityByName=function(t){return e.world.getEntityByProp("name",t)};e.getEntityByGUID=function(t){var i=e.world.getEntityByProp("GUID",t);return i.length>0?i[0]:null};e.getEntityByProp=function(t,i){return e.world.getEntityByProp(t,i)};e.getEntityContainer=function(e){return e.ancestor};e.remove=function(e,t){if(e.ancestor){if(t===true){e.ancestor.removeChild(e)}else{e.visible=e.inViewport=false;n=function(e){if(typeof e.ancestor!=="undefined"){e.ancestor.removeChild(e)}n=null}.defer(e)}}};e.removeAll=function(){if(n){clearTimeout(n);n=null}e.world.destroy()};e.sort=function(){e.world.sort()};e.collide=function(t,i){return e.world.collide(t,i)};e.collideType=function(t,i,n){return e.world.collideType(t,i,n)};e.repaint=function(){r=true};e.update=function(){r=e.world.update()||r;r=e.viewport.update(r)||r;return r};e.draw=function(){if(r){e.viewport.screenX=e.viewport.pos.x+~~e.viewport.offset.x;e.viewport.screenY=e.viewport.pos.y+~~e.viewport.offset.y;t.save();t.translate(-e.viewport.screenX,-e.viewport.screenY);e.viewport.screenX-=e.currentLevel.pos.x;e.viewport.screenY-=e.currentLevel.pos.y;e.world.draw(t,e.viewport);t.restore();e.viewport.draw(t)}r=false};return e}()})(window);(function(e){me.device=function(){var t={};var i=false;var n=false;var r=null;t._check=function(){me.audio.detectCapabilities();navigator.pointerEnabled=navigator.pointerEnabled||navigator.msPointerEnabled;navigator.maxTouchPoints=navigator.maxTouchPoints||navigator.msMaxTouchPoints||0;e.gesture=e.gesture||e.MSGesture;me.device.touch="createTouch"in document||"ontouchstart"in e||navigator.isCocoonJS||navigator.maxTouchPoints>0;me.device.isMobile=me.device.ua.match(/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone|Mobi/i);me.device.hasAccelerometer=typeof e.DeviceMotionEvent!=="undefined"||typeof e.Windows!=="undefined"&&typeof Windows.Devices.Sensors.Accelerometer==="function";if(e.DeviceOrientationEvent){me.device.hasDeviceOrientation=true}try{t.localStorage=typeof e.localStorage!=="undefined"}catch(i){t.localStorage=false}};t.ua=navigator.userAgent;t.sound=false;t.localStorage=false;t.hasAccelerometer=false;t.hasDeviceOrientation=false;t.nativeBase64=typeof e.atob==="function";t.touch=false;t.isMobile=false;t.orientation=0;t.accelerationX=0;t.accelerationY=0;t.accelerationZ=0;t.gamma=0;t.beta=0;t.alpha=0;t.getPixelRatio=function(){if(r===null){var t=me.video.getScreenContext();var i=e.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;r=i/n}return r};t.getStorage=function(e){e=e||"local";switch(e){case"local":return me.save;default:break}throw"melonJS : storage type "+e+" not supported"};function s(e){if(e.reading){t.accelerationX=e.reading.accelerationX;t.accelerationY=e.reading.accelerationY;t.accelerationZ=e.reading.accelerationZ}else{t.accelerationX=e.accelerationIncludingGravity.x;t.accelerationY=e.accelerationIncludingGravity.y;t.accelerationZ=e.accelerationIncludingGravity.z}}function o(e){t.gamma=e.gamma;t.beta=e.beta;t.alpha=e.alpha}t.watchAccelerometer=function(){if(me.device.hasAccelerometer){if(!i){if(typeof Windows==="undefined"){e.addEventListener("devicemotion",s,false)}else{var t=Windows.Devices.Sensors.Accelerometer.getDefault();if(t){var n=t.minimumReportInterval;var r=n>=16?n:25;t.reportInterval=r;t.addEventListener("readingchanged",s,false)}}i=true}return true}return false};t.unwatchAccelerometer=function(){if(i){if(typeof Windows==="undefined"){e.removeEventListener("devicemotion",s,false)}else{var t=Windows.Device.Sensors.Accelerometer.getDefault();t.removeEventListener("readingchanged",s,false)}i=false}};t.watchDeviceOrientation=function(){if(me.device.hasDeviceOrientation&&!n){e.addEventListener("deviceorientation",o,false);n=true}return false};t.unwatchDeviceOrientation=function(){if(n){e.removeEventListener("deviceorientation",o,false);n=false}};return t}()})(window);(function(e){me.timer=function(){var e={};var t=0;var i=0;var n=0;var r=0;var s=0;var o=Math.ceil(1e3/me.sys.fps);var a=1e3/me.sys.fps*1.25;e.tick=1;e.fps=0;e.init=function(){e.reset()};e.reset=function(){r=n=Date.now();i=0;t=0};e.getTime=function(){return r};e.countFPS=function(){t++;i+=s;if(t%10===0){this.fps=(~~(1e3*t/i)).clamp(0,me.sys.fps);i=0;t=0}};e.update=function(){n=r;r=Date.now();s=r-n;e.tick=s>a&&me.sys.interpolation?s/o:1};return e}()})(window);(function(e){me.Vector2d=Object.extend({x:0,y:0,init:function(e,t){this.x=e||0;this.y=t||0},set:function(e,t){this.x=e;this.y=t;return this},setZero:function(){return this.set(0,0)},setV:function(e){this.x=e.x;this.y=e.y;return this},add:function(e){this.x+=e.x;this.y+=e.y;return this},sub:function(e){this.x-=e.x;this.y-=e.y;return this},scale:function(e){this.x*=e.x;this.y*=e.y;return this},div:function(e){this.x/=e;this.y/=e;return this},abs:function(){if(this.x<0)this.x=-this.x;if(this.y<0)this.y=-this.y;return this},clamp:function(e,t){return new me.Vector2d(this.x.clamp(e,t),this.y.clamp(e,t))},clampSelf:function(e,t){this.x=this.x.clamp(e,t);this.y=this.y.clamp(e,t);return this},minV:function(e){this.x=this.x<e.x?this.x:e.x;this.y=this.y<e.y?this.y:e.y;return this},maxV:function(e){this.x=this.x>e.x?this.x:e.x;this.y=this.y>e.y?this.y:e.y;return this},floor:function(){return new me.Vector2d(~~this.x,~~this.y)},floorSelf:function(){this.x=~~this.x;this.y=~~this.y;return this},ceil:function(){return new me.Vector2d(Math.ceil(this.x),Math.ceil(this.y))},ceilSelf:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},negate:function(){return new me.Vector2d(-this.x,-this.y)},negateSelf:function(){this.x=-this.x;this.y=-this.y;return this},copy:function(e){this.x=e.x;this.y=e.y;return this},equals:function(e){return this.x===e.x&&this.y===e.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var e=this.length();if(e<Number.MIN_VALUE){return 0}var t=1/e;this.x*=t;this.y*=t;return e},dotProduct:function(e){return this.x*e.x+this.y*e.y},distance:function(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))},angle:function(e){return Math.atan2(e.y-this.y,e.x-this.x)},clone:function(){return new me.Vector2d(this.x,this.y)},toString:function(){return"x:"+this.x+",y:"+this.y}})})(window);(function(e){me.Rect=Object.extend({pos:null,colPos:null,width:0,height:0,hWidth:0,hHeight:0,shapeType:"Rectangle",offset:null,init:function(e,t,i){if(this.pos===null){this.pos=new me.Vector2d}this.pos.setV(e);if(this.offset===null){this.offset=new me.Vector2d}this.offset.set(0,0);if(this.colPos===null){this.colPos=new me.Vector2d}this.colPos.setV(0,0);this.width=t;this.height=i;this.hWidth=~~(t/2);this.hHeight=~~(i/2);Object.defineProperty(this,"left",{get:function(){return this.pos.x},configurable:true});Object.defineProperty(this,"right",{get:function(){return this.pos.x+this.width},configurable:true});Object.defineProperty(this,"top",{get:function(){return this.pos.y},configurable:true});Object.defineProperty(this,"bottom",{get:function(){return this.pos.y+this.height},configurable:true})},set:function(e,t,i){this.pos.setV(e);this.width=t;this.height=i;this.hWidth=~~(t/2);this.hHeight=~~(i/2);this.offset.set(0,0)},getBounds:function(){return this.clone()},clone:function(){return new me.Rect(this.pos.clone(),this.width,this.height)},translate:function(e,t){this.pos.x+=e;this.pos.y+=t;return this},translateV:function(e){this.pos.add(e);return this},union:function(e){var t=Math.min(this.pos.x,e.pos.x);var i=Math.min(this.pos.y,e.pos.y);this.width=Math.ceil(Math.max(this.pos.x+this.width,e.pos.x+e.width)-t);this.height=Math.ceil(Math.max(this.pos.y+this.height,e.pos.y+e.height)-i);this.pos.x=~~t;this.pos.y=~~i;return this},adjustSize:function(e,t,i,n){if(e!==-1){this.colPos.x=e;this.width=t;this.hWidth=~~(this.width/2);if(this.left!==this.pos.x+this.colPos.x){Object.defineProperty(this,"left",{get:function(){return this.pos.x+this.colPos.x},configurable:true})}if(this.right!==this.pos.x+this.colPos.x+this.width){Object.defineProperty(this,"right",{get:function(){return this.pos.x+this.colPos.x+this.width},configurable:true})}}if(i!==-1){this.colPos.y=i;this.height=n;this.hHeight=~~(this.height/2);if(this.top!==this.pos.y+this.colPos.y){Object.defineProperty(this,"top",{get:function(){return this.pos.y+this.colPos.y},configurable:true})}if(this.bottom!==this.pos.y+this.colPos.y+this.height){Object.defineProperty(this,"bottom",{get:function(){return this.pos.y+this.colPos.y+this.height},configurable:true})}}},flipX:function(e){this.colPos.x=e-this.width-this.colPos.x;this.hWidth=~~(this.width/2)},flipY:function(e){this.colPos.y=e-this.height-this.colPos.y;this.hHeight=~~(this.height/2)},equals:function(e){return this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom},overlaps:function(e){return this.left<e.right&&e.left<this.right&&this.top<e.bottom&&e.top<this.bottom},within:function(e){return e.left<=this.left&&e.right>=this.right&&e.top<=this.top&&e.bottom>=this.bottom},contains:function(e){return e.left>=this.left&&e.right<=this.right&&e.top>=this.top&&e.bottom<=this.bottom},containsPointV:function(e){return this.containsPoint(e.x,e.y)},containsPoint:function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom},collideWithRectangle:function(e){var t=new me.Vector2d(0,0);if(this.overlaps(e)){var i=this.left+this.hWidth-e.left-e.hWidth;var n=this.top+this.hHeight-e.top-e.hHeight;t.x=e.hWidth+this.hWidth-(i<0?-i:i);t.y=e.hHeight+this.hHeight-(n<0?-n:n);if(t.x<t.y){t.y=0;t.x=i<0?-t.x:t.x}else{t.x=0;t.y=n<0?-t.y:t.y}}return t},draw:function(e,t){e.strokeStyle=t||"red";e.strokeRect(this.left,this.top,this.width,this.height)}});me.Ellipse=Object.extend({pos:null,radius:null,shapeType:"Ellipse",init:function(e,t,i){if(this.pos===null){this.pos=new me.Vector2d}if(this.radius===null){this.radius=new me.Vector2d}this.set(e,t,i)},set:function(e,t,i){this.radius.set(t/2,i/2);this.pos.setV(e).add(this.radius);this.offset=new me.Vector2d},getBounds:function(){return new me.Rect(this.pos.clone().sub(this.radius),this.radius.x*2,this.radius.y*2)},clone:function(){return new me.Ellipse(this.pos.clone(),this.radius.x*2,this.radius.y*2)},draw:function(e,t){e.save();e.beginPath();e.translate(this.pos.x-this.radius.x,this.pos.y-this.radius.y);e.scale(this.radius.x,this.radius.y);e.arc(1,1,1,0,2*Math.PI,false);e.restore();e.strokeStyle=t||"red";e.stroke()}});me.PolyShape=Object.extend({offset:null,pos:null,points:null,closed:null,shapeType:"PolyShape",init:function(e,t,i){if(this.pos===null){this.pos=new me.Vector2d}if(this.offset===null){this.offset=new me.Vector2d}this.set(e,t,i)},set:function(e,t,i){this.pos.setV(e);this.points=t;this.closed=i===true;this.offset.set(0,0);this.getBounds()},getBounds:function(){var e=this.offset,t=0,i=0;this.points.forEach(function(n){e.x=Math.min(e.x,n.x);e.y=Math.min(e.y,n.y);t=Math.max(t,n.x);i=Math.max(i,n.y)});return new me.Rect(e,t-e.x,i-e.y)},clone:function(){return new me.PolyShape(this.pos.clone(),this.points,this.closed)},draw:function(e,t){e.save();e.translate(-this.offset.x,-this.offset.y);e.strokeStyle=t||"red";e.beginPath();e.moveTo(this.points[0].x,this.points[0].y);this.points.forEach(function(t){e.lineTo(t.x,t.y);e.moveTo(t.x,t.y)});if(this.closed===true){e.lineTo(this.points[0].x,this.points[0].y)}e.stroke();e.restore()}})})(window);(function(e){me.debug={renderCollisionMap:false}})(window);(function(e){me.Renderable=me.Rect.extend({isRenderable:true,visible:true,inViewport:false,alwaysUpdate:false,updateWhenPaused:false,isPersistent:false,floating:false,z:0,anchorPoint:null,alpha:1,init:function(e,t,i){this.parent(e,t,i);if(this.anchorPoint===null){this.anchorPoint=new me.Vector2d}this.anchorPoint.set(.5,.5);this.setOpacity(1)},getOpacity:function(){return this.alpha},setOpacity:function(e){if(typeof e==="number"){this.alpha=e.clamp(0,1)}},update:function(){return false},draw:function(e,t){this.parent(e,t)}})})(window);(function(e){me.SpriteObject=me.Renderable.extend({scale:null,scaleFlag:false,lastflipX:false,lastflipY:false,z:0,offset:null,angle:0,_sourceAngle:0,image:null,flickering:false,flickerTimer:-1,flickercb:null,flickerState:false,init:function(e,t,i,n,r){this.isSprite=true;this.parent(new me.Vector2d(e,t),n||i.width,r||i.height);this.image=i;this.scale=new me.Vector2d(1,1);this.lastflipX=this.lastflipY=false;this.scaleFlag=false;this.offset=new me.Vector2d(0,0);this.visible=true;this.isPersistent=false;this.flickering=false},setTransparency:function(e){e=e.charAt(0)==="#"?e.substring(1,7):e;this.image=me.video.applyRGBFilter(this.image,"transparent",e.toUpperCase()).canvas},isFlickering:function(){return this.flickering},flicker:function(e,t){this.flickerTimer=e;if(this.flickerTimer<0){this.flickering=false;this.flickercb=null}else if(!this.flickering){this.flickercb=t;this.flickering=true}},flipX:function(e){if(e!==this.lastflipX){this.lastflipX=e;this.scale.x=-this.scale.x;this.scaleFlag=this.scale.x!==1||this.scale.y!==1}},flipY:function(e){if(e!==this.lastflipY){this.lastflipY=e;this.scale.y=-this.scale.y;this.scaleFlag=this.scale.x!==1||this.scale.y!==1}},resize:function(e){if(e>0){this.scale.x=this.scale.x<0?-e:e;this.scale.y=this.scale.y<0?-e:e;this.scaleFlag=this.scale.x!==1||this.scale.y!==1}},update:function(){if(this.flickering){this.flickerTimer-=me.timer.tick;if(this.flickerTimer<0){if(this.flickercb)this.flickercb();this.flicker(-1)}return true}return false},draw:function(e){if(this.flickering){this.flickerState=!this.flickerState;if(!this.flickerState)return}e.save();e.globalAlpha*=this.getOpacity();var t=~~this.pos.x,i=~~this.pos.y;var n=this.width,r=this.height;var s=this.angle+this._sourceAngle;if(this.scaleFlag||s!==0){var o=n*this.anchorPoint.x,a=r*this.anchorPoint.y;e.translate(t+o,i+a);if(this.scaleFlag)e.scale(this.scale.x,this.scale.y);if(s!==0)e.rotate(s);if(this._sourceAngle!==0){n=this.height;r=this.width;t=-a;i=-o}else{t=-o;i=-a}}e.drawImage(this.image,this.offset.x,this.offset.y,n,r,t,i,n,r);e.restore()},destroy:function(){this.onDestroyEvent.apply(this,arguments)},onDestroyEvent:function(){}});me.AnimationSheet=me.SpriteObject.extend({spacing:0,margin:0,animationpause:false,animationspeed:100,init:function(e,t,i,n,r,s,o,a,l){this.anim={};this.resetAnim=null;this.current=null;this.animationspeed=100;this.spacing=s||0;this.margin=o||0;this.parent(e,t,i,n,r,s,o);this.textureAtlas=null;this.atlasIndices=null;this.buildLocalAtlas(a||undefined,l||undefined);this.addAnimation("default",null);this.setCurrentAnimation("default")},buildLocalAtlas:function(e,t){if(e!==undefined){this.textureAtlas=e;this.atlasIndices=t}else{this.textureAtlas=[];var i=new me.Vector2d(~~((this.image.width-this.margin)/(this.width+this.spacing)),~~((this.image.height-this.margin)/(this.height+this.spacing)));for(var n=0,r=i.x*i.y;n<r;n++){this.textureAtlas[n]={name:""+n,offset:new me.Vector2d(this.margin+(this.spacing+this.width)*(n%i.x),this.margin+(this.spacing+this.height)*~~(n/i.x)),width:this.width,height:this.height,angle:0}}}},addAnimation:function(e,t,i){this.anim[e]={name:e,frame:[],idx:0,length:0,animationspeed:i||this.animationspeed,nextFrame:0};if(t==null){t=[];var n=0;this.textureAtlas.forEach(function(){t[n]=n++})}for(var r=0,s=t.length;r<s;r++){if(typeof t[r]==="number"){this.anim[e].frame[r]=this.textureAtlas[t[r]]}else{if(this.atlasIndices===null){throw"melonjs: string parameters for addAnimation are only allowed for TextureAtlas "}else{this.anim[e].frame[r]=this.textureAtlas[this.atlasIndices[t[r]]]}}}this.anim[e].length=this.anim[e].frame.length},setCurrentAnimation:function(e,t){if(this.anim[e]){this.current=this.anim[e];this.resetAnim=t||null;this.setAnimationFrame(this.current.idx);this.current.nextFrame=me.timer.getTime()+this.current.animationspeed}else{throw"melonJS: animation id '"+e+"' not defined"}},isCurrentAnimation:function(e){return this.current.name===e},setAnimationFrame:function(e){this.current.idx=(e||0)%this.current.length;var t=this.current.frame[this.current.idx];this.offset=t.offset;this.width=t.width;this.height=t.height;this._sourceAngle=t.angle},getCurrentAnimationFrame:function(){return this.current.idx},update:function(){if(!this.animationpause&&me.timer.getTime()>=this.current.nextFrame){this.setAnimationFrame(++this.current.idx);if(this.current.idx===0&&this.resetAnim){if(typeof this.resetAnim==="string")this.setCurrentAnimation(this.resetAnim);else if(typeof this.resetAnim==="function"&&this.resetAnim()===false){this.current.idx=this.current.length-1;this.setAnimationFrame(this.current.idx);this.parent();return false}}this.current.nextFrame=me.timer.getTime()+this.current.animationspeed;return this.parent()||true}return this.parent()}})})(window);(function(e){var t=-(Math.PI/2);me.TextureAtlas=Object.extend({format:null,texture:null,atlas:null,init:function(e,t){if(e&&e.meta){if(e.meta.app.contains("texturepacker")){this.format="texturepacker";if(t===undefined){var i=me.utils.getBasename(e.meta.image);this.texture=me.loader.getImage(i);if(this.texture===null){throw"melonjs: Atlas texture '"+i+"' not found"}}else{this.texture=t}}if(e.meta.app.contains("ShoeBox")){if(!e.meta.exporter||!e.meta.exporter.contains("melonJS")){throw"melonjs: ShoeBox requires the JSON exporter : https://github.com/melonjs/melonJS/tree/master/media/shoebox_JSON_export.sbx"}this.format="ShoeBox";this.texture=t}this.atlas=this.initFromTexturePacker(e)}if(this.atlas===null){throw"melonjs: texture atlas format not supported"}},initFromTexturePacker:function(e){var t={};e.frames.forEach(function(e){if(e.hasOwnProperty("filename")){t[e.filename]={frame:new me.Rect(new me.Vector2d(e.frame.x,e.frame.y),e.frame.w,e.frame.h),source:new me.Rect(new me.Vector2d(e.spriteSourceSize.x,e.spriteSourceSize.y),e.spriteSourceSize.w,e.spriteSourceSize.h),rotated:e.rotated===true,trimmed:e.trimmed===true}}});return t},getTexture:function(){return this.texture},getRegion:function(e){var i=this.atlas[e];if(i){return{name:e,pos:i.source.pos.clone(),offset:i.frame.pos.clone(),width:i.frame.width,height:i.frame.height,angle:i.rotated===true?t:0}}return null},createSpriteFromName:function(e){var t=this.getRegion(e);if(t){var i=new me.SpriteObject(0,0,this.getTexture(),t.width,t.height);i.offset.setV(t.offset);i._sourceAngle=t.angle;return i}throw"melonjs: TextureAtlas - region for "+e+" not found"},createAnimationFromName:function(e){var t=[],i={};for(var n=0;n<e.length;++n){t[n]=this.getRegion(e[n]);i[e[n]]=n;if(t[n]==null){throw"melonjs: TextureAtlas - region for "+e[n]+" not found"}}return new me.AnimationSheet(0,0,this.texture,0,0,0,0,t,i)}})})(window);(function(e){var t=Math.min,i=Math.max;me.Viewport=me.Rect.extend({AXIS:{NONE:0,HORIZONTAL:1,VERTICAL:2,BOTH:3},limits:null,target:null,follow_axis:0,shaking:false,_shake:null,_fadeIn:null,_fadeOut:null,_deadwidth:0,_deadheight:0,_limitwidth:0,_limitheight:0,screenX:0,screenY:0,init:function(e,t,i,n,r,s){this.parent(new me.Vector2d(e,t),i-e,n-t);this.limits=new me.Vector2d(r||this.width,s||this.height);this.offset=new me.Vector2d;this.target=null;this.follow_axis=this.AXIS.NONE;this._shake={intensity:0,duration:0,axis:this.AXIS.BOTH,onComplete:null,start:0};this._fadeOut={color:0,alpha:0,duration:0,tween:null};this._fadeIn={color:0,alpha:1,duration:0,tween:null};this.setDeadzone(this.width/6,this.height/6)},_followH:function(e){var n=this.pos.x;if(e.x-this.pos.x>this._deadwidth){this.pos.x=~~t(e.x-this._deadwidth,this._limitwidth)}else if(e.x-this.pos.x<this.deadzone.x){this.pos.x=~~i(e.x-this.deadzone.x,0)}return n!==this.pos.x},_followV:function(e){var n=this.pos.y;if(e.y-this.pos.y>this._deadheight){this.pos.y=~~t(e.y-this._deadheight,this._limitheight)}else if(e.y-this.pos.y<this.deadzone.y){this.pos.y=~~i(e.y-this.deadzone.y,0)}return n!==this.pos.y},reset:function(e,t){this.pos.x=e||0;this.pos.y=t||0;this.target=null;this.follow_axis=null},setDeadzone:function(e,t){this.deadzone=new me.Vector2d(~~((this.width-e)/2),~~((this.height-t)/2-t*.25));this._deadwidth=this.width-this.deadzone.x;this._deadheight=this.height-this.deadzone.y;this.update(true)},setBounds:function(e,t){this.limits.set(e,t);this._limitwidth=this.limits.x-this.width;this._limitheight=this.limits.y-this.height},follow:function(e,t){if(e instanceof me.ObjectEntity)this.target=e.pos;else if(e instanceof me.Vector2d)this.target=e;else throw"melonJS: invalid target for viewport.follow";this.follow_axis=typeof t==="undefined"?this.AXIS.BOTH:t;this.update(true)},move:function(e,t){var i=~~(this.pos.x+e);var n=~~(this.pos.y+t);this.pos.x=i.clamp(0,this._limitwidth);this.pos.y=n.clamp(0,this._limitheight);me.event.publish(me.event.VIEWPORT_ONCHANGE,[this.pos])},update:function(e){var t=false;if(this.target&&e){switch(this.follow_axis){case this.AXIS.NONE:break;case this.AXIS.HORIZONTAL:t=this._followH(this.target);break;case this.AXIS.VERTICAL:t=this._followV(this.target);break;case this.AXIS.BOTH:t=this._followH(this.target);t=this._followV(this.target)||t;break;default:break}}if(this.shaking===true){var i=me.timer.getTime()-this._shake.start;if(i>=this._shake.duration){this.shaking=false;this.offset.setZero();if(typeof this._shake.onComplete==="function"){this._shake.onComplete()}}else{if(this._shake.axis===this.AXIS.BOTH||this._shake.axis===this.AXIS.HORIZONTAL){this.offset.x=(Math.random()-.5)*this._shake.intensity}if(this._shake.axis===this.AXIS.BOTH||this._shake.axis===this.AXIS.VERTICAL){this.offset.y=(Math.random()-.5)*this._shake.intensity}}t=true}if(t===true){me.event.publish(me.event.VIEWPORT_ONCHANGE,[this.pos])}if(this._fadeIn.tween!=null||this._fadeOut.tween!=null){t=true}return t},shake:function(e,t,i,n){if(this.shaking)return;this.shaking=true;this._shake={intensity:e,duration:t,axis:i||this.AXIS.BOTH,onComplete:n||null,start:me.timer.getTime()}},fadeOut:function(e,t,i){this._fadeOut.color=e;this._fadeOut.duration=t||1e3;this._fadeOut.alpha=1;this._fadeOut.tween=new me.Tween(this._fadeOut).to({alpha:0},this._fadeOut.duration).onComplete(i||null);this._fadeOut.tween.start()},fadeIn:function(e,t,i){this._fadeIn.color=e;this._fadeIn.duration=t||1e3;this._fadeIn.alpha=0;this._fadeIn.tween=new me.Tween(this._fadeIn).to({alpha:1},this._fadeIn.duration).onComplete(i||null);this._fadeIn.tween.start()},getWidth:function(){return this.width},getHeight:function(){return this.height},focusOn:function(e){this.pos.x=e.x-this.width*.5;this.pos.y=e.y-this.height*.5},isVisible:function(e){return e.overlaps(this)},localToWorld:function(e,t){return new me.Vector2d(e,t).add(this.pos).sub(me.game.currentLevel.pos)},worldToLocal:function(e,t){return new me.Vector2d(e,t).sub(this.pos).add(me.game.currentLevel.pos)},draw:function(e){if(this._fadeIn.tween){e.globalAlpha=this._fadeIn.alpha;me.video.clearSurface(e,me.utils.HexToRGB(this._fadeIn.color));e.globalAlpha=1;if(this._fadeIn.alpha===1)this._fadeIn.tween=null}if(this._fadeOut.tween){e.globalAlpha=this._fadeOut.alpha;me.video.clearSurface(e,me.utils.HexToRGB(this._fadeOut.color));e.globalAlpha=1;if(this._fadeOut.alpha===0)this._fadeOut.tween=null}me.video.blitSurface()}})})(window);(function(e){me.GUI_Object=me.SpriteObject.extend({isClickable:true,updated:false,init:function(e,t,i){this.parent(e,t,typeof i.image==="string"?me.loader.getImage(i.image):i.image,i.spritewidth,i.spriteheight);this.floating=true;me.input.registerPointerEvent("mousedown",this,this.clicked.bind(this))},update:function(){if(this.updated){this.updated=false;return true}return false},clicked:function(e){if(this.isClickable){this.updated=true;return this.onClick(e)}},onClick:function(e){return false},onDestroyEvent:function(){me.input.releasePointerEvent("mousedown",this)}})})(window);(function(e){var t=new me.Rect(new me.Vector2d,0,0);var i=0;me.ObjectContainer=me.Renderable.extend({sortOn:"z",autoSort:true,pendingSort:null,children:null,collidable:true,init:function(e,t,i,n){this.parent(new me.Vector2d(e||0,t||0),i||Infinity,n||Infinity);this.children=[];this.sortOn=me.game.sortOn;this.autoSort=true},addChild:function(e){if(typeof e.ancestor!=="undefined"){e.ancestor.removeChild(e)}e.ancestor=this;this.children.push(e);if(this.autoSort===true){this.sort()}},addChildAt:function(e,t){if(t>=0&&t<this.children.length){if(typeof e.ancestor!=="undefined"){e.ancestor.removeChild(e)}e.ancestor=this;this.children.splice(t,0,e)}else{throw"melonJS (me.ObjectContainer): Index ("+t+") Out Of Bounds for addChildAt()"}},swapChildren:function(e,t){var i=this.getChildIndex(e);var n=this.getChildIndex(t);if(i!==-1&&n!==-1){var r=e.z;e.z=t.z;t.z=r;this.children[i]=t;this.children[n]=e}else{throw"melonJS (me.ObjectContainer): "+e+" Both the supplied entities must be a child of the caller "+this
}},getChildAt:function(e){if(e>=0&&e<this.children.length){return this.children[e]}else{throw"melonJS (me.ObjectContainer): Index ("+e+") Out Of Bounds for getChildAt()"}},getChildIndex:function(e){return this.children.indexOf(e)},hasChild:function(e){return this===e.ancestor},getEntityByProp:function(e,t){var i=[];var n=new RegExp(t,"i");for(var r=this.children.length,s;r--,s=this.children[r];){if(s instanceof me.ObjectContainer){i=i.concat(s.getEntityByProp(e,t))}else if(s.isEntity){if(typeof s[e]==="string"){if(s[e].match(n)){i.push(s)}}else if(s[e]===t){i.push(s)}}}return i},removeChild:function(e,t){if(this.hasChild(e)){e.ancestor=undefined;if(!t){if(typeof e.destroy==="function"){e.destroy()}me.entityPool.freeInstance(e)}this.children.splice(this.getChildIndex(e),1)}else{throw"melonJS (me.ObjectContainer): "+e+" The supplied entity must be a child of the caller "+this}},setChildsProperty:function(e,t,i){for(var n=this.children.length,r;n--,r=this.children[n];){if(i===true&&r instanceof me.ObjectContainer){r.setChildsProperty(e,t,i)}r[e]=t}},moveUp:function(e){var t=this.getChildIndex(e);if(t-1>=0){this.swapChildren(e,this.getChildAt(t-1))}},moveDown:function(e){var t=this.getChildIndex(e);if(t+1<this.children.length){this.swapChildren(e,this.getChildAt(t+1))}},moveToTop:function(e){var t=this.getChildIndex(e);if(t>0){this.splice(0,0,this.splice(t,1)[0]);e.z=this.children[1].z+1}},moveToBottom:function(e){var t=this.getChildIndex(e);if(t<this.children.length-1){this.splice(this.children.length-1,0,this.splice(t,1)[0]);e.z=this.children[this.children.length-2].z-1}},collide:function(e,t){return this.collideType(e,null,t)},collideType:function(e,t,i){var n,r;i=i===true?true:false;if(i===true){r=[]}for(var s=this.children.length,o;s--,o=this.children[s];){if((o.inViewport||o.alwaysUpdate)&&o.collidable){if(o instanceof me.ObjectContainer){n=o.collideType(e,t,i);if(i){r.concat(n)}else if(n){return n}}else if(o!==e&&(!t||o.type===t)){n=o.collisionBox["collideWith"+e.shapeType].call(o.collisionBox,e.collisionBox);if(n.x!==0||n.y!==0){o.onCollision.call(o,n,e);n.type=o.type;n.obj=o;if(!i){return n}r.push(n)}}}}return i?r:null},sort:function(e){if(this.pendingSort===null){if(e===true){for(var t=this.children.length,i;t--,i=this.children[t];){if(i instanceof me.ObjectContainer){i.sort(e)}}}this.pendingSort=function(e){e.children.sort(e["_sort"+e.sortOn.toUpperCase()]);e.pendingSort=null;me.game.repaint()}.defer(this)}},_sortZ:function(e,t){return t.z-e.z},_sortX:function(e,t){var i=t.z-e.z;return i?i:(t.pos&&t.pos.x)-(e.pos&&e.pos.x)||0},_sortY:function(e,t){var i=t.z-e.z;return i?i:(t.pos&&t.pos.y)-(e.pos&&e.pos.y)||0},destroy:function(){if(this.pendingSort){clearTimeout(this.pendingSort);this.pendingSort=null}for(var e=this.children.length,t;e--,t=this.children[e];){if(!t.isPersistent){this.removeChild(t)}}},update:function(){var e=false;var n=false;var r=me.state.isPaused();var s;var o;var a;var l=me.game.viewport;for(var u=this.children.length,h;u--,h=this.children[u];){if(r&&!h.updateWhenPaused){continue}if(h.floating){i++}n=i>0;s=h.visible&&!n;if(s){o=h.pos.x;a=h.pos.y;t.translateV(h.pos);t.set(t.pos,h.width,h.height)}h.inViewport=h.visible&&(n||h.getBounds&&l.isVisible(t));e|=(h.inViewport||h.alwaysUpdate)&&h.update();if(s){t.translate(-o,-a)}if(i>0){i--}}return e},draw:function(e,t){var i=me.game.viewport;var n=false;this.drawCount=0;e.save();e.globalAlpha*=this.getOpacity();e.translate(this.pos.x,this.pos.y);for(var r=this.children.length,s;r--,s=this.children[r];){n=s.floating;if((s.inViewport||n)&&s.isRenderable){if(n===true){e.save();e.translate(i.screenX-this.pos.x,i.screenY-this.pos.y)}s.draw(e,t);if(n===true){e.restore()}this.drawCount++}}e.restore()}})})(window);(function(e){me.ObjectSettings={name:null,image:null,transparent_color:null,spritewidth:null,spriteheight:null,type:0,collidable:true};me.entityPool=function(){var e={};var t={};e.init=function(){e.add("me.ObjectEntity",me.ObjectEntity);e.add("me.CollectableEntity",me.CollectableEntity);e.add("me.LevelEntity",me.LevelEntity)};e.add=function(e,i,n){if(!n){t[e.toLowerCase()]={"class":i,pool:undefined};return}t[e.toLowerCase()]={"class":i,pool:[],active:[]}};e.newInstanceOf=function(e){var i=typeof e==="string"?e.toLowerCase():undefined;if(i&&t[i]){var n;if(!t[i]["pool"]){n=t[i]["class"];arguments[0]=n;return new(n.bind.apply(n,arguments))}var r,s=t[i];n=s["class"];if(s["pool"].length>0){r=s["pool"].pop();r.init.apply(r,Array.prototype.slice.call(arguments,1))}else{arguments[0]=n;r=new(n.bind.apply(n,arguments));r.className=i}s["active"].push(r);return r}var o=arguments[3];if(o&&o.gid&&o.image){return new me.SpriteObject(o.x,o.y,o.image)}if(i){console.error("Cannot instantiate entity of type '"+e+"': Class not found!")}return null};e.purge=function(){for(var e in t){t[e]["pool"]=[]}};e.freeInstance=function(e){var i=e.className;if(!i||!t[i]){return}var n=true;for(var r=0,s=t[i]["active"].length;r<s;r++){if(t[i]["active"][r]===e){n=false;t[i]["active"].splice(r,1);break}}if(n){return}t[i]["pool"].push(e)};return e}();me.ObjectEntity=me.Renderable.extend({GUID:null,type:0,collidable:true,collisionBox:null,shapes:null,renderable:null,lastflipX:false,lastflipY:false,init:function(e,t,i){if(this.pos===null){this.pos=new me.Vector2d}this.parent(this.pos.set(e,t),~~i.spritewidth||~~i.width,~~i.spriteheight||~~i.height);if(i.image){var n=typeof i.image==="string"?me.loader.getImage(i.image):i.image;this.renderable=new me.AnimationSheet(0,0,n,~~i.spritewidth,~~i.spriteheight,~~i.spacing,~~i.margin);if(i.transparent_color){this.renderable.setTransparency(i.transparent_color)}}this.GUID=me.utils.createGUID();this.name=i.name?i.name.toLowerCase():"";if(this.vel===undefined){this.vel=new me.Vector2d}this.vel.set(0,0);if(this.accel===undefined){this.accel=new me.Vector2d}this.accel.set(0,0);if(this.friction===undefined){this.friction=new me.Vector2d}this.friction.set(0,0);if(this.maxVel===undefined){this.maxVel=new me.Vector2d}this.maxVel.set(1e3,1e3);this.gravity=me.sys.gravity!==undefined?me.sys.gravity:.98;this.isEntity=true;this.alive=true;this.visible=true;this.floating=false;this.isPersistent=false;this.falling=false;this.jumping=true;this.slopeY=0;this.onslope=false;this.onladder=false;this.disableTopLadderCollision=false;this.collidable=typeof i.collidable!=="undefined"?i.collidable:true;this.type=i.type||0;this.lastflipX=this.lastflipY=false;this.collisionMap=me.game.collisionMap;this.canBreakTile=false;this.onTileBreak=null;if(i.isEllipse===true){this.addShape(new me.Ellipse(new me.Vector2d(0,0),this.width,this.height))}else if(i.isPolygon===true||i.isPolyline===true){this.addShape(new me.PolyShape(new me.Vector2d(0,0),i.points,i.isPolygon));this.width=this.collisionBox.width;this.height=this.collisionBox.height}else{this.addShape(new me.Rect(new me.Vector2d(0,0),this.width,this.height))}},updateColRect:function(e,t,i,n){this.collisionBox.adjustSize(e,t,i,n)},addShape:function(e){if(this.shapes===null){this.shapes=[]}this.shapes.push(e);if(this.shapes.length===1){this.collisionBox=this.shapes[0].getBounds();this.collisionBox.pos=this.pos;this.pos.add(this.shapes[0].offset)}},onCollision:function(e,t){if(this.collidable&&this.type===me.game.COLLECTABLE_OBJECT)me.game.remove(this)},setVelocity:function(e,t){this.accel.x=e!==0?e:this.accel.x;this.accel.y=t!==0?t:this.accel.y;this.setMaxVelocity(e,t)},setMaxVelocity:function(e,t){this.maxVel.x=e;this.maxVel.y=t},setFriction:function(e,t){this.friction.x=e||0;this.friction.y=t||0},flipX:function(e){if(e!==this.lastflipX){this.lastflipX=e;if(this.renderable&&this.renderable.flipX){this.renderable.flipX(e)}this.collisionBox.flipX(this.width)}},flipY:function(e){if(e!==this.lastflipY){this.lastflipY=e;if(this.renderable&&this.renderable.flipY){this.renderable.flipY(e)}this.collisionBox.flipY(this.height)}},doWalk:function(e){this.flipX(e);this.vel.x+=e?-this.accel.x*me.timer.tick:this.accel.x*me.timer.tick},doClimb:function(e){if(this.onladder){this.vel.y=e?-this.accel.x*me.timer.tick:this.accel.x*me.timer.tick;this.disableTopLadderCollision=!e;return true}return false},doJump:function(){if(!this.jumping&&!this.falling){this.vel.y=-this.maxVel.y*me.timer.tick;this.jumping=true;return true}return false},forceJump:function(){this.jumping=this.falling=false;this.doJump()},distanceTo:function(e){var t=this.pos.x+this.hWidth-(e.pos.x+e.hWidth);var i=this.pos.y+this.hHeight-(e.pos.y+e.hHeight);return Math.sqrt(t*t+i*i)},distanceToPoint:function(e){var t=this.pos.x+this.hWidth-e.x;var i=this.pos.y+this.hHeight-e.y;return Math.sqrt(t*t+i*i)},angleTo:function(e){var t=e.pos.x+e.hWidth-(this.pos.x+this.hWidth);var i=e.pos.y+e.hHeight-(this.pos.y+this.hHeight);return Math.atan2(i,t)},angleToPoint:function(e){var t=e.x-(this.pos.x+this.hWidth);var i=e.y-(this.pos.y+this.hHeight);return Math.atan2(i,t)},checkSlope:function(e,t){this.pos.y=e.pos.y-this.height;if(t)this.slopeY=e.height-(this.collisionBox.right+this.vel.x-e.pos.x);else this.slopeY=this.collisionBox.left+this.vel.x-e.pos.x;this.vel.y=0;this.pos.y+=this.slopeY.clamp(0,e.height)},computeVelocity:function(e){if(this.gravity){e.y+=!this.onladder?this.gravity*me.timer.tick:0;this.falling=e.y>0;this.jumping=this.falling?false:this.jumping}if(this.friction.x)e.x=me.utils.applyFriction(e.x,this.friction.x);if(this.friction.y)e.y=me.utils.applyFriction(e.y,this.friction.y);if(e.y!==0)e.y=e.y.clamp(-this.maxVel.y,this.maxVel.y);if(e.x!==0)e.x=e.x.clamp(-this.maxVel.x,this.maxVel.x)},updateMovement:function(){this.computeVelocity(this.vel);var e;if(this.collidable){e=this.collisionMap.checkCollision(this.collisionBox,this.vel);this.onslope=e.yprop.isSlope||e.xprop.isSlope;this.onladder=false;if(e.y){this.onladder=e.yprop.isLadder||e.yprop.isTopLadder;if(e.y>0){if(e.yprop.isSolid||e.yprop.isPlatform&&this.collisionBox.bottom-1<=e.ytile.pos.y||e.yprop.isTopLadder&&!this.disableTopLadderCollision){this.pos.y=~~this.pos.y;this.vel.y=this.falling?e.ytile.pos.y-this.collisionBox.bottom:0;this.falling=false}else if(e.yprop.isSlope&&!this.jumping){this.checkSlope(e.ytile,e.yprop.isLeftSlope);this.falling=false}else if(e.yprop.isBreakable){if(this.canBreakTile){me.game.currentLevel.clearTile(e.ytile.col,e.ytile.row);if(this.onTileBreak)this.onTileBreak()}else{this.pos.y=~~this.pos.y;this.vel.y=this.falling?e.ytile.pos.y-this.collisionBox.bottom:0;this.falling=false}}}else if(e.y<0){if(!e.yprop.isPlatform&&!e.yprop.isLadder&&!e.yprop.isTopLadder){this.falling=true;this.vel.y=0}}}if(e.x){this.onladder=e.xprop.isLadder||e.yprop.isTopLadder;if(e.xprop.isSlope&&!this.jumping){this.checkSlope(e.xtile,e.xprop.isLeftSlope);this.falling=false}else{if(!e.xprop.isPlatform&&!e.xprop.isLadder&&!e.xprop.isTopLadder){if(e.xprop.isBreakable&&this.canBreakTile){me.game.currentLevel.clearTile(e.xtile.col,e.xtile.row);if(this.onTileBreak){this.onTileBreak()}}else{this.vel.x=0}}}}}this.pos.add(this.vel);return e},collide:function(e){return me.game.collide(this,e||false)},collideType:function(e,t){return me.game.collideType(this,e,t||false)},update:function(){if(this.renderable){return this.renderable.update()}return false},getBounds:function(){if(this.renderable){return this.renderable.getBounds().translateV(this.pos)}return null},draw:function(e){if(this.renderable){var t=~~(this.pos.x+this.anchorPoint.x*(this.width-this.renderable.width));var i=~~(this.pos.y+this.anchorPoint.y*(this.height-this.renderable.height));e.translate(t,i);this.renderable.draw(e);e.translate(-t,-i)}},destroy:function(){if(this.renderable){this.renderable.destroy.apply(this.renderable,arguments);this.renderable=null}this.onDestroyEvent.apply(this,arguments);this.collisionBox=null;this.shapes=[]},onDestroyEvent:function(){}});me.CollectableEntity=me.ObjectEntity.extend({init:function(e,t,i){this.parent(e,t,i);this.type=me.game.COLLECTABLE_OBJECT}});me.LevelEntity=me.ObjectEntity.extend({init:function(e,t,i){this.parent(e,t,i);this.nextlevel=i.to;this.fade=i.fade;this.duration=i.duration;this.fading=false;this.gotolevel=i.to},onFadeComplete:function(){me.levelDirector.loadLevel(this.gotolevel);me.game.viewport.fadeOut(this.fade,this.duration)},goTo:function(e){this.gotolevel=e||this.nextlevel;if(this.fade&&this.duration){if(!this.fading){this.fading=true;me.game.viewport.fadeIn(this.fade,this.duration,this.onFadeComplete.bind(this))}}else{me.levelDirector.loadLevel(this.gotolevel)}},onCollision:function(){this.goTo()}})})(window);(function(e){me.ScreenObject=me.Renderable.extend({addAsObject:false,visible:false,frame:0,z:999,init:function(e,t){this.parent(new me.Vector2d(0,0),0,0);this.addAsObject=this.visible=e===true||false;this.isPersistent=this.visible&&t===true||false},reset:function(){me.game.reset();this.frame=0;this.frameRate=Math.round(60/me.sys.fps);this.onResetEvent.apply(this,arguments);if(this.addAsObject){this.visible=true;this.floating=true;this.set(new me.Vector2d,me.game.viewport.width,me.game.viewport.height);me.game.add(this,this.z)}me.game.sort()},destroy:function(){this.onDestroyEvent.apply(this,arguments)},update:function(){return false},onUpdateFrame:function(){if(++this.frame%this.frameRate===0){this.frame=0;me.timer.update();me.game.update()}me.game.draw()},draw:function(){},onResetEvent:function(){},onDestroyEvent:function(){}});(function(){var e=0;var t=["ms","moz","webkit","o"];var i=window.requestAnimationFrame;var n=window.cancelAnimationFrame;for(var r=0;r<t.length;++r){if(i&&n){break}i=window[t[r]+"RequestAnimationFrame"];n=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"]}if(!i||!n){i=function(t,i){var n=Date.now();var r=Math.max(0,16-(n-e));var s=window.setTimeout(function(){t(n+r)},r);e=n+r;return s};n=function(e){window.clearTimeout(e)}}window.requestAnimationFrame=i;window.cancelAnimationFrame=n})();me.state=function(){var e={};var t=-1;var i=-1;var n=false;var r={};var s={color:"",duration:0};var o=null;var a=null;var l=null;function u(){if(i===-1&&t!==-1){me.timer.reset();i=window.requestAnimationFrame(f)}}function h(){if(n&&t!==-1){me.timer.reset();n=false}}function c(){n=true}function f(){l();if(i!==-1){i=window.requestAnimationFrame(f)}}function d(){window.cancelAnimationFrame(i);i=-1}function p(e){d();if(r[t]){if(r[t].screen.visible){me.game.remove.call(me.game,r[t].screen,true)}else{r[t].screen.destroy()}}if(r[e]){t=e;r[t].screen.reset.apply(r[t].screen,a);l=r[t].screen.onUpdateFrame.bind(r[t].screen);u();if(o){o()}me.game.repaint()}}e.LOADING=0;e.MENU=1;e.READY=2;e.PLAY=3;e.GAMEOVER=4;e.GAME_END=5;e.SCORE=6;e.CREDITS=7;e.SETTINGS=8;e.USER=100;e.onPause=null;e.onResume=null;e.onStop=null;e.onRestart=null;e.init=function(){e.set(e.LOADING,new me.DefaultLoadingScreen)};e.stop=function(e){d();if(e)me.audio.pauseTrack()};e.pause=function(e){c();if(e)me.audio.pauseTrack()};e.restart=function(e){u();if(e)me.audio.resumeTrack()};e.resume=function(e){h();if(e)me.audio.resumeTrack()};e.isRunning=function(){return i!==-1};e.isPaused=function(){return n};e.set=function(e,t){r[e]={};r[e].screen=t;r[e].transition=true};e.current=function(){return r[t].screen};e.transition=function(e,t,i){if(e==="fade"){s.color=t;s.duration=i}};e.setTransition=function(e,t){r[e].transition=t};e.change=function(e){if(typeof r[e]==="undefined"){throw"melonJS : Undefined ScreenObject for state '"+e+"'"}a=null;if(arguments.length>1){a=Array.prototype.slice.call(arguments,1)}if(s.duration&&r[e].transition){o=function(){me.game.viewport.fadeOut(s.color,s.duration)};me.game.viewport.fadeIn(s.color,s.duration,function(){p.defer(e)})}else{p.defer(e)}};e.isCurrent=function(e){return t===e};return e}()})(window);(function(e){me.DefaultLoadingScreen=me.ScreenObject.extend({init:function(){this.parent(true);this.invalidate=false;this.handle=null},onResetEvent:function(){this.logo1=new me.Font("century gothic",32,"white","middle");this.logo2=new me.Font("century gothic",32,"#55aa00","middle");this.logo2.bold();this.logo1.textBaseline=this.logo2.textBaseline="alphabetic";this.barHeight=4;this.handle=me.event.subscribe(me.event.LOADER_PROGRESS,this.onProgressUpdate.bind(this));this.loadPercent=0},onDestroyEvent:function(){this.logo1=this.logo2=null;if(this.handle){me.event.unsubscribe(this.handle);this.handle=null}},onProgressUpdate:function(e){this.loadPercent=e;this.invalidate=true},update:function(){if(this.invalidate===true){this.invalidate=false;return true}return false},drawLogo:function(e,t,i){e.save();e.translate(t,i);e.restore()},draw:function(e){var t=this.logo1.measureText(e,"melon").width;var i=(me.video.getWidth()-t-this.logo2.measureText(e,"JS").width)/2;var n=me.video.getHeight()/2+this.logo2.measureText(e,"melon").height;me.video.clearSurface(e,"#202020");this.drawLogo(e,(me.video.getWidth()-100)/2,me.video.getHeight()/2-this.barHeight/2-90);i+=t;var r=Math.floor(this.loadPercent*me.video.getWidth());e.fillStyle="black";e.fillRect(0,me.video.getHeight()/2-this.barHeight/2,me.video.getWidth(),this.barHeight);e.fillStyle="#55aa00";e.fillRect(2,me.video.getHeight()/2-this.barHeight/2,r,this.barHeight)}})})(window);(function(e){me.loader=function(){var e={};var t={};var i={};var n={};var r={};var s={};var o=0;var a=0;var l=0;function u(){if(a===o){if(e.onload){clearTimeout(l);setTimeout(function(){e.onload();me.event.publish(me.event.LOADER_COMPLETE)},300)}else console.error("no load callback defined")}else{l=setTimeout(u,100)}}function h(i,n,r){t[i.name]=new Image;t[i.name].onload=n;t[i.name].onerror=r;t[i.name].src=i.src+e.nocache}function c(t,n,r){var s=new XMLHttpRequest;var o=me.utils.getFileExtension(t.src).toLowerCase();if(s.overrideMimeType){if(o==="json"){s.overrideMimeType("application/json")}else{s.overrideMimeType("text/xml")}}s.open("GET",t.src+e.nocache,true);if(t.type==="tmx"){me.levelDirector.addTMXLevel(t.name)}s.ontimeout=r;s.onreadystatechange=function(){if(s.readyState===4){if(s.status===200||s.status===0&&s.responseText){var e=null;switch(o){case"xml":case"tmx":if(me.device.ua.match(/msie/i)||!s.responseXML){e=(new DOMParser).parseFromString(s.responseText,"text/xml")}else{e=s.responseXML}o="xml";break;case"json":e=JSON.parse(s.responseText);break;default:throw"melonJS: TMX file format "+o+"not supported !"}i[t.name]={data:e,isTMX:t.type==="tmx",format:o};n()}else{r()}}};s.send(null)}function f(t,i,n){var r=new XMLHttpRequest;if(r.overrideMimeType){r.overrideMimeType("application/json")}r.open("GET",t.src+e.nocache,true);r.ontimeout=n;r.onreadystatechange=function(){if(r.readyState===4){if(r.status===200||r.status===0&&r.responseText){s[t.name]=JSON.parse(r.responseText);i()}else{n()}}};r.send(null)}function d(t,i,r){var s=new XMLHttpRequest;s.open("GET",t.src+e.nocache,true);s.responseType="arraybuffer";s.onerror=r;s.onload=function(e){var r=s.response;if(r){var o=new Uint8Array(r);var a=[];for(var l=0;l<o.byteLength;l++){a[l]=String.fromCharCode(o[l])}n[t.name]=a.join("");i()}};s.send()}e.nocache="";e.onload=undefined;e.onProgress=undefined;e.onResourceLoaded=function(t){a++;var i=e.getLoadProgress();if(e.onProgress){e.onProgress(i)}me.event.publish(me.event.LOADER_PROGRESS,[i])};e.onLoadingError=function(e){throw"melonJS: Failed loading resource "+e.src};e.setNocache=function(t){e.nocache=t?"?"+parseInt(Math.random()*1e7,10):""};e.preload=function(t){for(var i=0;i<t.length;i++){o+=e.load(t[i],e.onResourceLoaded.bind(e),e.onLoadingError.bind(e,t[i]))}u()};e.load=function(e,t,i){e.name=e.name.toLowerCase();switch(e.type){case"binary":d.call(this,e,t,i);return 1;case"image":h.call(this,e,t,i);return 1;case"json":f.call(this,e,t,i);return 1;case"tmx":case"tsx":c.call(this,e,t,i);return 1;case"audio":if(me.audio.isAudioEnable()){me.audio.load(e,t,i);return 1}break;default:throw"melonJS: me.loader.load : unknown or invalid resource type : "+e.type}return 0};e.unload=function(e){e.name=e.name.toLowerCase();switch(e.type){case"binary":if(!(e.name in n))return false;delete n[e.name];return true;case"image":if(!(e.name in t))return false;if(typeof t[e.name].dispose==="function"){t[e.name].dispose()}delete t[e.name];return true;case"json":if(!(e.name in s))return false;delete s[e.name];return true;case"tmx":case"tsx":if(!(e.name in i))return false;delete i[e.name];return true;case"audio":return me.audio.unload(e.name);default:throw"melonJS: me.loader.unload : unknown or invalid resource type : "+e.type}};e.unloadAll=function(){var o;for(o in n)e.unload(o);for(o in t)e.unload(o);for(o in i)e.unload(o);for(o in r)e.unload(o);for(o in s)e.unload(o);me.audio.unloadAll()};e.getTMXFormat=function(e){e=e.toLowerCase();if(e in i)return i[e].format;else{return null}};e.getTMX=function(e){e=e.toLowerCase();if(e in i)return i[e].data;else{return null}};e.getBinary=function(e){e=e.toLowerCase();if(e in n)return n[e];else{return null}};e.getImage=function(e){e=e.toLowerCase();if(e in t){return t[e]}else{return null}};e.getJSON=function(e){e=e.toLowerCase();if(e in s){return s[e]}else{return null}};e.getLoadProgress=function(){return a/o};return e}()})(window);(function(e){me.Font=me.Renderable.extend({font:null,fontSize:null,color:null,textAlign:"left",textBaseline:"top",lineHeight:1,init:function(e,t,i,n){this.pos=new me.Vector2d;this.fontSize=new me.Vector2d;this.set(e,t,i,n);this.parent(this.pos,0,this.fontSize.y)},bold:function(){this.font="bold "+this.font},italic:function(){this.font="italic "+this.font},set:function(e,t,i,n){var r=e.split(",");for(var s=0;s<r.length;s++){r[s]="'"+r[s]+"'"}this.fontSize.y=parseInt(t,10);this.height=this.fontSize.y;if(typeof t==="number"){t=""+t+"px"}this.font=t+" "+r.join(",");this.color=i;if(n){this.textAlign=n}},measureText:function(e,t){e.font=this.font;e.fillStyle=this.color;e.textAlign=this.textAlign;e.textBaseline=this.textBaseline;this.height=this.width=0;var i=(""+t).split("\n");for(var n=0;n<i.length;n++){this.width=Math.max(e.measureText(i[n].trim()).width,this.width);this.height+=this.fontSize.y*this.lineHeight}return{width:this.width,height:this.height}},draw:function(e,t,i,n){this.pos.set(i,n);e.font=this.font;e.fillStyle=this.color;e.textAlign=this.textAlign;e.textBaseline=this.textBaseline;var r=(""+t).split("\n");for(var s=0;s<r.length;s++){e.fillText(r[s].trim(),~~i,~~n);n+=this.fontSize.y*this.lineHeight}}});me.BitmapFont=me.Font.extend({sSize:null,firstChar:32,charCount:0,init:function(e,t,i,n){this.parent(e,null,null);this.sSize=new me.Vector2d;this.firstChar=n||32;this.loadFontMetrics(e,t);this.textAlign="left";this.textBaseline="top";if(i){this.resize(i)}},loadFontMetrics:function(e,t){this.font=me.loader.getImage(e);this.fontSize.x=t.x||t;this.fontSize.y=t.y||this.font.height;this.sSize.copy(this.fontSize);this.height=this.sSize.y;this.charCount=~~(this.font.width/this.fontSize.x)},set:function(e,t){this.textAlign=e;if(t){this.resize(t)}},resize:function(e){this.sSize.setV(this.fontSize);this.sSize.x*=e;this.sSize.y*=e;this.height=this.sSize.y},measureText:function(e,t){var i=(""+t).split("\n");this.height=this.width=0;for(var n=0;n<i.length;n++){this.width=Math.max(i[n].trim().length*this.sSize.x,this.width);this.height+=this.sSize.y*this.lineHeight}return{width:this.width,height:this.height}},draw:function(e,t,i,n){var r=(""+t).split("\n");var s=i;var o=this.sSize.y*this.lineHeight;this.pos.set(i,n);for(var a=0;a<r.length;a++){i=s;var l=r[a].trim();var u=l.length*this.sSize.x;switch(this.textAlign){case"right":i-=u;break;case"center":i-=u*.5;break;default:break}switch(this.textBaseline){case"middle":n-=o*.5;break;case"ideographic":case"alphabetic":case"bottom":n-=o;break;default:break}for(var h=0,c=l.length;h<c;h++){var f=l.charCodeAt(h)-this.firstChar;if(f>=0){e.drawImage(this.font,this.fontSize.x*(f%this.charCount),this.fontSize.y*~~(f/this.charCount),this.fontSize.x,this.fontSize.y,~~i,~~n,this.sSize.x,this.sSize.y)}i+=this.sSize.x}n+=o}}})})(window);(function(e){me.audio=function(){var e={};var t={};var i=-1;var n=null;var r=null;var s=true;var o=0;var a=0;var l={volume:1,muted:false};var u=false;var h=[];function c(t){var i="";var n=t.length;if(me.device.sound){var r="";for(var o=0;o<n;o++){r=t[o].toLowerCase().trim();if(e.capabilities[r]&&e.capabilities[r].canPlay&&(i===""||e.capabilities[r].canPlayType==="probably")){i=r;if(e.capabilities[r].canPlayType==="probably"){break}}}}if(i===""){s=false}return i}function f(e){var i=t[e];for(var n=0,r;r=i[n++];){if(r.ended||!r.currentTime){r.currentTime=o;return r}}i[0].pause();i[0].currentTime=o;return i[0]}function d(e,n){if(a++>3){var r="melonJS: failed loading "+e+"."+i;if(me.sys.stopOnAudioError===false){me.audio.disable();if(n){n()}console.log(r+", disabling audio")}else{throw r}}else{t[e][0].load()}}function p(e,i,n){a=0;if(i>1){var r=t[e][0];for(var s=1;s<i;s++){t[e][s]=new Audio(r.src);t[e][s].preload="auto";t[e][s].load()}}if(n){n()}}function m(e,t,i,n){var r=f(e.toLowerCase());r.loop=t||false;r.volume=n?parseFloat(n).clamp(0,1):l.volume;r.muted=l.muted;r.play();if(i&&!t){r.addEventListener("ended",function s(e){r.removeEventListener("ended",s,false);i()},false)}return r}function g(e,t,i){if(i&&!t){setTimeout(i,2e3)}return null}e.capabilities={mp3:{codec:"audio/mpeg",canPlay:false,canPlayType:"no"},ogg:{codec:'audio/ogg; codecs="vorbis"',canPlay:false,canPlayType:"no"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',canPlay:false,canPlayType:"no"},wav:{codec:'audio/wav; codecs="1"',canPlay:false,canPlayType:"no"}};e.detectCapabilities=function(){var t=document.createElement("audio");if(t.canPlayType){for(var i in e.capabilities){var n=t.canPlayType(e.capabilities[i].codec);if(n!==""&&n!=="no"){e.capabilities[i].canPlay=true;e.capabilities[i].canPlayType=n}me.device.sound|=e.capabilities[i].canPlay}}};e.init=function(t){if(!me.initialized){throw"melonJS: me.audio.init() called before engine initialization."}t=typeof t==="string"?t:"mp3";t=t.split(",");i=c(t);if(me.device.isMobile&&!navigator.isCocoonJS){s=false}e.play=e.isAudioEnable()?m:g;return e.isAudioEnable()};e.isAudioEnable=function(){return s};e.enable=function(){s=me.device.sound;if(s)e.play=m;else e.play=g};e.disable=function(){me.audio.stopTrack();e.play=g;s=false};e.load=function(n,r,s){if(i===-1)return 0;if(me.device.isMobile&&!navigator.isCocoonJS){if(u){h.push([n,r,s]);return}u=true}var o=n.channel||1;var a="canplaythrough";if(n.stream===true&&!me.device.isMobile){o=1;a="canplay"}var l=new Audio(n.src+n.name+"."+i+me.loader.nocache);l.preload="auto";l.addEventListener(a,function c(t){l.removeEventListener(a,c,false);u=false;p.call(me.audio,n.name,o,r);var i=h.shift();if(i){e.load.apply(e,i)}},false);l.addEventListener("error",function(e){d.call(me.audio,n.name,s)},false);l.load();t[n.name]=[l];return 1};e.stop=function(e){if(s){var i=t[e.toLowerCase()];for(var n=i.length;n--;){i[n].pause();i[n].currentTime=o}}};e.pause=function(e){if(s){var i=t[e.toLowerCase()];for(var n=i.length;n--;){i[n].pause()}}};e.playTrack=function(e,t){r=me.audio.play(e,true,null,t);n=e.toLowerCase()};e.stopTrack=function(){if(s&&r){r.pause();n=null;r=null}};e.setVolume=function(e){if(typeof e==="number"){l.volume=e.clamp(0,1)}};e.getVolume=function(){return l.volume};e.mute=function(e,i){i=i===undefined?true:!!i;var n=t[e.toLowerCase()];for(var r=0,s;s=n[r++];){s.muted=i}};e.unmute=function(t){e.mute(t,false)};e.muteAll=function(){l.muted=true;for(var i in t){e.mute(i,l.muted)}};e.unmuteAll=function(){l.muted=false;for(var i in t){e.mute(i,l.muted)}};e.getCurrentTrack=function(){return n};e.pauseTrack=function(){if(s&&r){r.pause()}};e.resumeTrack=function(){if(s&&r){r.play()}};e.unload=function(i){i=i.toLowerCase();if(!(i in t))return false;if(n===i){e.stopTrack()}else{e.stop(i)}delete t[i];return true};e.unloadAll=function(){for(var i in t){e.unload(i)}};return e}()})(window);(function(e){me.video=function(){var e={};var t=null;var i=null;var n=null;var r=null;var s=null;var o=-1;var a=false;var l=0;var u=0;var h=false;var c=true;var f=Infinity;var d=Infinity;function p(){if(navigator.isCocoonJS){return"screencanvas"}return"canvas"}e.init=function(o,f,d,p,m,g){if(!me.initialized){throw"melonJS: me.video.init() called before engine initialization."}a=p||false;h=m==="auto"||false;c=g!==undefined?g:true;m=m!=="auto"?parseFloat(m||1):1;me.sys.scale=new me.Vector2d(m,m);if(h||m!==1){a=true}l=f*me.sys.scale.x;u=d*me.sys.scale.y;window.addEventListener("resize",function(e){me.event.publish(me.event.WINDOW_ONRESIZE,[e])},false);window.addEventListener("orientationchange",function(e){me.event.publish(me.event.WINDOW_ONORIENTATION_CHANGE,[e])},false);me.event.subscribe(me.event.WINDOW_ONRESIZE,me.video.onresize.bind(me.video));me.event.subscribe(me.event.WINDOW_ONORIENTATION_CHANGE,me.video.onresize.bind(me.video));t=e.createCanvas(l,u,true);if(o){s=document.getElementById(o)}if(!s){s=document.body}s.appendChild(t);if(!t.getContext)return false;i=e.getContext2d(t);if(me.device.getPixelRatio()>1){t.style.width=t.width/me.device.getPixelRatio()+"px";t.style.height=t.height/me.device.getPixelRatio()+"px"}if(a){n=e.createCanvas(f,d,false);r=e.getContext2d(n)}else{n=t;r=i}if(window.getComputedStyle){var y=window.getComputedStyle(t,null);me.video.setMaxSize(parseInt(y.maxWidth,10),parseInt(y.maxHeight,10))}me.video.onresize(null);me.game.init();return true};e.getWrapper=function(){return s};e.getWidth=function(){return n.width};e.getPos=function(e){e=e||t;return e.getBoundingClientRect?e.getBoundingClientRect():{left:0,top:0}};e.getHeight=function(){return n.height};e.setMaxSize=function(e,t){f=e||Infinity;d=t||Infinity};e.createCanvas=function(e,t,i){if(e===0||t===0){throw new Error("melonJS: width or height was zero, Canvas could not be initialized !")}var r=i===true?p():"canvas";var s=document.createElement(r);s.width=e||n.width;s.height=t||n.height;return s};e.getContext2d=function(e){var t;if(navigator.isCocoonJS){t=e.getContext("2d",{antialias:me.sys.scalingInterpolation})}else{t=e.getContext("2d")}if(!t.canvas){t.canvas=e}me.video.setImageSmoothing(t,me.sys.scalingInterpolation);return t};e.getScreenCanvas=function(){return t};e.getScreenContext=function(){return i};e.getSystemCanvas=function(){return n};e.getSystemContext=function(){return r};e.onresize=function(e){var t=1,i=1;if(typeof window.orientation!=="undefined"){me.device.orientation=window.orientation}else{me.device.orientation=window.outerWidth>window.outerHeight?90:0}if(h){var n=me.video.getScreenCanvas().parentNode;var r=Math.min(f,n.width||window.innerWidth);var s=Math.min(d,n.height||window.innerHeight);if(c){var a=me.video.getWidth()/me.video.getHeight();var l=r/s;if(l<a)t=i=r/me.video.getWidth();else t=i=s/me.video.getHeight()}else{t=r/me.video.getWidth();i=s/me.video.getHeight()}t*=me.device.getPixelRatio();i*=me.device.getPixelRatio();if(t!==1||i!==1){if(o>=0){clearTimeout(o)}o=me.video.updateDisplaySize.defer(t,i);return}}me.input.offset=me.video.getPos()};e.updateDisplaySize=function(r,s){me.sys.scale.set(r,s);t.width=l=n.width*r;t.height=u=n.height*s;if(me.device.getPixelRatio()>1){t.style.width=t.width/me.device.getPixelRatio()+"px";t.style.height=t.height/me.device.getPixelRatio()+"px"}me.video.setImageSmoothing(i,me.sys.scalingInterpolation);me.input.offset=me.video.getPos();e.blitSurface();o=-1};e.clearSurface=function(e,t){var i=e.canvas.width;var n=e.canvas.height;e.save();e.setTransform(1,0,0,1,0,0);if(t.substr(0,4)==="rgba"){e.clearRect(0,0,i,n)}e.fillStyle=t;e.fillRect(0,0,i,n);e.restore()};e.setImageSmoothing=function(e,t){var i=["ms","moz","webkit","o"];for(var n=0;n<i.length;++n){if(e[i[n]+"ImageSmoothingEnabled"]!==undefined){e[i[n]+"ImageSmoothingEnabled"]=t===true}}e.imageSmoothingEnabled=t===true};e.setAlpha=function(e,t){e.globalCompositeOperation=t?"source-over":"copy"};e.blitSurface=function(){if(a){e.blitSurface=function(){i.drawImage(n,0,0,n.width,n.height,0,0,l,u)}}else{e.blitSurface=function(){}}e.blitSurface()};e.applyRGBFilter=function(t,i,n){var r=e.getContext2d(e.createCanvas(t.width,t.height,false));var s=me.utils.getPixels(t);var o=s.data;var a,l;switch(i){case"b&w":for(a=0,l=o.length;a<l;a+=4){var u=3*o[a]+4*o[a+1]+o[a+2]>>>3;
o[a]=u;o[a+1]=u;o[a+2]=u}break;case"brightness":var h=Math.abs(n).clamp(0,1);for(a=0,l=o.length;a<l;a+=4){o[a]*=h;o[a+1]*=h;o[a+2]*=h}break;case"transparent":for(a=0,l=o.length;a<l;a+=4){if(me.utils.RGBToHex(o[a],o[a+1],o[a+2])===n){o[a+3]=0}}break;default:return null}r.putImageData(s,0,0);return r};return e}()})(window);(function(e){me.input=function(){var t={};var i={};var n={};var r={};var s={};var o={};var a=false;var l=false;var u="mousewheel";var h=0;var c=null;var f=["mousewheel","mousemove","mousedown","mouseup",undefined,"click","dblclick"];var d=[undefined,"touchmove","touchstart","touchend","touchcancel","tap","dbltap"];var p=["mousewheel","PointerMove","PointerDown","PointerUp","PointerCancel",undefined,undefined];function m(){if(!a){e.addEventListener("keydown",T,false);e.addEventListener("keyup",w,false);a=true}}function g(e,t){for(var i=2;i<e.length;++i){if(e[i]!==undefined){me.video.getScreenCanvas().addEventListener(e[i],t,false)}}}function y(){if(!l){t.changedTouches.push({x:0,y:0});t.mouse.pos=new me.Vector2d(0,0);t.offset=me.video.getPos();e.addEventListener("scroll",throttle(100,false,function(e){t.offset=me.video.getPos();me.event.publish(me.event.WINDOW_ONSCROLL,[e])}),false);if(e.navigator.pointerEnabled){c=p;var i=e.navigator.msPointerEnabled;for(var n=1;n<c.length;++n){if(c[n]&&!c[n].contains("MS")){c[n]=i?"MS"+c[n]:c[n].toLowerCase()}e.addEventListener(c[0],A,false)}g(c,S)}else{if(me.device.touch){c=d;g(c,S)}else{c=f;g(c,S);u="onwheel"in document.createElement("div")?"wheel":"mousewheel";e.addEventListener(u,A,false)}}if(t.throttlingInterval===undefined){t.throttlingInterval=Math.floor(1e3/me.sys.fps)}if(t.throttlingInterval<17){me.video.getScreenCanvas().addEventListener(c[1],M,false)}else{me.video.getScreenCanvas().addEventListener(c[1],throttle(t.throttlingInterval,false,function(e){M(e)}),false)}l=true}}function v(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}return false}function T(e,t){var o=i[t||e.keyCode||e.which];if(o){if(!s[o]){n[o]=true;s[o]=r[o];me.event.publish(me.event.KEYDOWN,[o])}return v(e)}return true}function w(e,t){var r=i[t||e.keyCode||e.which];if(r){n[r]=false;s[r]=false;me.event.publish(me.event.KEYUP,[r]);return v(e)}return true}function b(e){var i=false;var n=o[e.type];if(!n){if(e.type==="touchcancel"){n=o["touchend"]}else if(e.type==="PointerCancel"){n=o["PointerUp"]}else{n=o[e.type]}}if(n){var r=me.game.viewport.localToWorld(0,0);for(var s=0,a=t.changedTouches.length;s<a;s++){if(typeof e.timeStamp!=="undefined"){if(e.timeStamp<h)continue;h=e.timeStamp}if(!navigator.pointerEnabled){e.pointerId=t.changedTouches[s].id}e.gameScreenX=t.changedTouches[s].x;e.gameScreenY=t.changedTouches[s].y;e.gameWorldX=e.gameScreenX+r.x;e.gameWorldY=e.gameScreenY+r.y;for(var l=n.length,u;l--,u=n[l];){if(u.floating===true){e.gameX=e.gameScreenX;e.gameY=e.gameScreenY}else{e.gameX=e.gameWorldX;e.gameY=e.gameWorldY}if(u.rect===null||u.rect.containsPoint(e.gameX,e.gameY)){if(u.cb(e)===false){i=true;break}}}}}return i}function x(e){var i;t.changedTouches.length=0;if(!e.touches){i=t.globalToLocal(e.clientX,e.clientY);i.id=e.pointerId||1;t.changedTouches.push(i)}else{for(var n=0,r=e.changedTouches.length;n<r;n++){var s=e.changedTouches[n];i=t.globalToLocal(s.clientX,s.clientY);i.id=s.identifier;t.changedTouches.push(i)}}if(e.isPrimary===false){return}t.mouse.pos.set(t.changedTouches[0].x,t.changedTouches[0].y)}function A(e){if(e.target===me.video.getScreenCanvas()){var t={deltaMode:1,type:"mousewheel",deltaX:e.deltaX,deltaY:e.deltaY,deltaZ:e.deltaZ};if(u==="mousewheel"){t.deltaY=-1/40*e.wheelDelta;e.wheelDeltaX&&(t.deltaX=-1/40*e.wheelDeltaX)}if(b(t)){return v(e)}}return true}function M(e){x(e);if(b(e)){return v(e)}return true}function S(e){x(e);if(b(e)){return v(e)}var i=t.mouse.bind[e.button||0];if(i){if(e.type===c[2])return T(e,i);else return w(e,i)}return true}t.mouse={pos:null,LEFT:0,MIDDLE:1,RIGHT:2,bind:[0,0,0]};t.offset=null;t.throttlingInterval=undefined;t.changedTouches=[];t.KEY={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,TAB:9,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,ESC:27,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90};t.isKeyPressed=function(e){if(n[e]){if(r[e]){s[e]=true;n[e]=false}return true}return false};t.keyStatus=function(e){return s[e]===true?true:n[e]};t.triggerKeyEvent=function(e,t){if(t){T({},e)}else{w({},e)}};t.bindKey=function(e,t,o){m();i[e]=t;n[t]=false;r[t]=o?o:false;s[t]=false};t.unlockKey=function(e){s[e]=false};t.unbindKey=function(e){n[i[e]]=false;r[i[e]]=false;i[e]=null};t.globalToLocal=function(e,i){var n=t.offset;var r=me.device.getPixelRatio();e-=n.left;i-=n.top;var s=me.sys.scale;if(s.x!==1||s.y!==1){e/=s.x;i/=s.y}return new me.Vector2d(e*r,i*r)};t.bindMouse=function(e,n){y();if(!i[n])throw"melonJS : no action defined for keycode "+n;t.mouse.bind[e]=n};t.unbindMouse=function(e){t.mouse.bind[e]=null};t.bindTouch=function(e){t.bindMouse(me.input.mouse.LEFT,e)};t.unbindTouch=function(){t.unbindMouse(me.input.mouse.LEFT)};t.registerPointerEvent=function(t,i,n,r){y();if(f.indexOf(t)!==-1&&(me.device.touch||e.navigator.pointerEnabled)){t=c[f.indexOf(t)]}if(t&&c.indexOf(t)!==-1){if(!o[t]){o[t]=[]}var s=i.floating===true?true:false;if(r){s=r===true?true:false}o[t].push({rect:i||null,cb:n,floating:s});return}throw"melonJS : invalid event type : "+t};t.releasePointerEvent=function(t,i){if(f.indexOf(t)!==-1&&(me.device.touch||e.navigator.pointerEnabled)){t=c[f.indexOf(t)]}if(t&&c.indexOf(t)!==-1){if(!o[t]){o[t]=[]}var n=o[t];if(n){for(var r=n.length,s;r--,s=n[r];){if(s.rect===i){s.rect=s.cb=s.floating=null;o[t].splice(r,1)}}}return}throw"melonJS : invalid event type : "+t};return t}()})(window);(function(e){var t=function(){var t={};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.decode=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");if(me.device.nativeBase64){return e.atob(t)}else{var n=[],r,s,o,a,l,u,h,c=0;while(c<t.length){a=i.indexOf(t.charAt(c++));l=i.indexOf(t.charAt(c++));u=i.indexOf(t.charAt(c++));h=i.indexOf(t.charAt(c++));r=a<<2|l>>4;s=(l&15)<<4|u>>2;o=(u&3)<<6|h;n.push(String.fromCharCode(r));if(u!==64){n.push(String.fromCharCode(s))}if(h!==64){n.push(String.fromCharCode(o))}}n=n.join("");return n}};return t}();me.utils=function(){var e={};var i={};var n="";var r=0;var s=/^.*(\\|\/|\:)/;var o=/\.[^\.]*$/;e.decodeBase64=function(e){return t.decode(e)};e.decodeBase64AsArray=function(e,i){i=i||1;var n=t.decode(e),r,s,o;var a;if(typeof window.Uint32Array==="function"){a=new Uint32Array(n.length/i)}else{a=[]}for(r=0,o=n.length/i;r<o;r++){a[r]=0;for(s=i-1;s>=0;--s){a[r]+=n.charCodeAt(r*i+s)<<(s<<3)}}return a};e.decompress=function(e,t){throw"melonJS: GZIP/ZLIB compressed TMX Tile Map not supported!"};e.decodeCSV=function(e,t){e=e.trim().split("\n");var i=[];for(var n=0;n<e.length;n++){var r=e[n].split(",",t);for(var s=0;s<r.length;s++){i.push(+r[s])}}return i};e.getBasename=function(e){return e.replace(s,"").replace(o,"")};e.getFileExtension=function(e){return e.substring(e.lastIndexOf(".")+1,e.length)};e.HexToRGB=function(e,t){if(e.charAt(0)!=="#"){return e}e=e.substring(1,e.length);if(i[e]==null){var n,r,s;if(e.length<6){n=e.charAt(0)+e.charAt(0);r=e.charAt(1)+e.charAt(1);s=e.charAt(2)+e.charAt(2)}else{n=e.substring(0,2);r=e.substring(2,4);s=e.substring(4,6)}i[e]=parseInt(n,16)+","+parseInt(r,16)+","+parseInt(s,16)}return(t?"rgba(":"rgb(")+i[e]+(t?","+t+")":")")};e.RGBToHex=function(e,t,i){return e.toHex()+t.toHex()+i.toHex()};e.getPixels=function(e){if(e instanceof HTMLImageElement){var t=me.video.getContext2d(me.video.createCanvas(e.width,e.height));t.drawImage(e,0,0);return t.getImageData(0,0,e.width,e.height)}else{return e.getContext("2d").getImageData(0,0,e.width,e.height)}};e.resetGUID=function(e){n=e.toString().toUpperCase().toHex();r=0};e.createGUID=function(){return n+"-"+r++};e.applyFriction=function(e,t){return e+t<0?e+t*me.timer.tick:e-t>0?e-t*me.timer.tick:0};return e}()})(window);(function(e){me.save=function(){var e={};function t(e){return e==="add"||e==="delete"}var i={_init:function(){if(me.device.localStorage===true){var t=JSON.parse(localStorage.getItem("me.save"))||[];t.forEach(function(t){e[t]=JSON.parse(localStorage.getItem("me.save."+t))})}},add:function(n){Object.keys(n).forEach(function(r){if(t(r))return;(function(t){Object.defineProperty(i,t,{enumerable:true,get:function(){return e[t]},set:function(i){if(typeof e[t]!=="object"){e[t]=i;if(me.device.localStorage===true){localStorage.setItem("me.save."+t,JSON.stringify(e[t]))}}}})})(r);if(!(r in e)){i[r]=n[r]}})},"delete":function(i){if(!t(i)){if(typeof e[i]!=="undefined"){delete e[i];if(me.device.localStorage===true){localStorage.removeItem("me.save."+i)}}}}};return i}()})(window);(function(e){me.COLLISION_LAYER="collision";me.TMX_TAG_MAP="map";me.TMX_TAG_NAME="name";me.TMX_TAG_VALUE="value";me.TMX_TAG_VERSION="version";me.TMX_TAG_ORIENTATION="orientation";me.TMX_TAG_WIDTH="width";me.TMX_TAG_HEIGHT="height";me.TMX_TAG_OPACITY="opacity";me.TMX_TAG_TRANS="trans";me.TMX_TAG_TILEWIDTH="tilewidth";me.TMX_TAG_TILEHEIGHT="tileheight";me.TMX_TAG_TILEOFFSET="tileoffset";me.TMX_TAG_FIRSTGID="firstgid";me.TMX_TAG_GID="gid";me.TMX_TAG_TILE="tile";me.TMX_TAG_ID="id";me.TMX_TAG_DATA="data";me.TMX_TAG_COMPRESSION="compression";me.TMX_TAG_GZIP="gzip";me.TMX_TAG_ZLIB="zlib";me.TMX_TAG_ENCODING="encoding";me.TMX_TAG_ATTR_BASE64="base64";me.TMX_TAG_CSV="csv";me.TMX_TAG_SPACING="spacing";me.TMX_TAG_MARGIN="margin";me.TMX_TAG_PROPERTIES="properties";me.TMX_TAG_PROPERTY="property";me.TMX_TAG_IMAGE="image";me.TMX_TAG_SOURCE="source";me.TMX_TAG_VISIBLE="visible";me.TMX_TAG_TILESET="tileset";me.TMX_TAG_LAYER="layer";me.TMX_TAG_TILE_LAYER="tilelayer";me.TMX_TAG_IMAGE_LAYER="imagelayer";me.TMX_TAG_OBJECTGROUP="objectgroup";me.TMX_TAG_OBJECT="object";me.TMX_TAG_X="x";me.TMX_TAG_Y="y";me.TMX_TAG_WIDTH="width";me.TMX_TAG_HEIGHT="height";me.TMX_TAG_POLYGON="polygon";me.TMX_TAG_POLYLINE="polyline";me.TMX_TAG_ELLIPSE="ellipse";me.TMX_TAG_POINTS="points";me.TMX_BACKGROUND_COLOR="backgroundcolor"})(window);(function(e){me.TMXUtils=function(){function e(e){if(!e||e.isBoolean()){e=e?e==="true":true}else if(e.isNumeric()){e=Number(e)}else if(e.match(/^json:/i)){var t=e.split(/^json:/i)[1];try{e=JSON.parse(t)}catch(i){throw"Unable to parse JSON: "+t}}return e}var t={};t.applyTMXPropertiesFromXML=function(t,i){var n=i.getElementsByTagName(me.TMX_TAG_PROPERTIES)[0];if(n){var r=n.getElementsByTagName(me.TMX_TAG_PROPERTY);for(var s=0;s<r.length;s++){var o=me.mapReader.TMXParser.getStringAttribute(r[s],me.TMX_TAG_NAME);var a=me.mapReader.TMXParser.getStringAttribute(r[s],me.TMX_TAG_VALUE);t[o]=e(a)}}};t.applyTMXPropertiesFromJSON=function(t,i){var n=i[me.TMX_TAG_PROPERTIES];if(n){for(var r in n){if(n.hasOwnProperty(r)){t[r]=e(n[r])}}}};t.mergeProperties=function(e,t,i){for(var n in t){if(i||e[n]===undefined)e[n]=t[n]}return e};return t}()})(window);(function(e){me.TMXObjectGroup=Object.extend({name:null,width:0,height:0,visible:false,z:0,objects:[],initFromXML:function(e,t,i,n){this.name=e;this.width=me.mapReader.TMXParser.getIntAttribute(t,me.TMX_TAG_WIDTH);this.height=me.mapReader.TMXParser.getIntAttribute(t,me.TMX_TAG_HEIGHT);this.visible=me.mapReader.TMXParser.getIntAttribute(t,me.TMX_TAG_VISIBLE,1)===1;this.opacity=me.mapReader.TMXParser.getFloatAttribute(t,me.TMX_TAG_OPACITY,1).clamp(0,1);this.z=n;this.objects=[];if(t.firstChild&&t.firstChild.nextSibling.nodeName===me.TMX_TAG_PROPERTIES){me.TMXUtils.applyTMXPropertiesFromXML(this,t)}var r=t.getElementsByTagName(me.TMX_TAG_OBJECT);for(var s=0;s<r.length;s++){var o=new me.TMXObject;o.initFromXML(r[s],i,n);this.objects.push(o)}},initFromJSON:function(e,t,i,n){var r=this;this.name=e;this.width=t[me.TMX_TAG_WIDTH];this.height=t[me.TMX_TAG_HEIGHT];this.visible=t[me.TMX_TAG_VISIBLE];this.opacity=parseFloat(t[me.TMX_TAG_OPACITY]||1).clamp(0,1);this.z=n;this.objects=[];me.TMXUtils.applyTMXPropertiesFromJSON(this,t);t["objects"].forEach(function(e){var t=new me.TMXObject;t.initFromJSON(e,i,n);r.objects.push(t)})},reset:function(){this.objects=null},getObjectCount:function(){return this.objects.length},getObjectByIndex:function(e){return this.objects[e]}});me.TMXObject=Object.extend({name:null,x:0,y:0,width:0,height:0,z:0,gid:undefined,isPolygon:false,isPolyline:false,points:undefined,initFromXML:function(e,t,i){this.name=me.mapReader.TMXParser.getStringAttribute(e,me.TMX_TAG_NAME);this.x=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_X);this.y=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_Y);this.z=i;this.width=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_WIDTH,0);this.height=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_HEIGHT,0);this.gid=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_GID,null);this.isEllipse=false;this.isPolygon=false;this.isPolyline=false;if(this.gid){this.setImage(this.gid,t)}else{if(e.getElementsByTagName(me.TMX_TAG_ELLIPSE).length){this.isEllipse=true}else{var n=e.getElementsByTagName(me.TMX_TAG_POLYGON);if(n.length){this.isPolygon=true}else{n=e.getElementsByTagName(me.TMX_TAG_POLYLINE);if(n.length){this.isPolyline=true}}if(n.length){this.points=[];var r=me.mapReader.TMXParser.getStringAttribute(n[0],me.TMX_TAG_POINTS).split(" ");for(var s=0,o;s<r.length;s++){o=r[s].split(",");this.points.push(new me.Vector2d(+o[0],+o[1]))}}}}me.game.renderer.adjustPosition(this);me.TMXUtils.applyTMXPropertiesFromXML(this,e)},initFromJSON:function(e,t,i){this.name=e[me.TMX_TAG_NAME];this.x=parseInt(e[me.TMX_TAG_X],10);this.y=parseInt(e[me.TMX_TAG_Y],10);this.z=parseInt(i,10);this.width=parseInt(e[me.TMX_TAG_WIDTH]||0,10);this.height=parseInt(e[me.TMX_TAG_HEIGHT]||0,10);this.gid=parseInt(e[me.TMX_TAG_GID],10)||null;this.isEllipse=false;this.isPolygon=false;this.isPolyline=false;if(this.gid){this.setImage(this.gid,t)}else{if(e[me.TMX_TAG_ELLIPSE]!==undefined){this.isEllipse=true}else{var n=e[me.TMX_TAG_POLYGON];if(n!==undefined){this.isPolygon=true}else{n=e[me.TMX_TAG_POLYLINE];if(n!==undefined){this.isPolyline=true}}if(n!==undefined){this.points=[];var r=this;n.forEach(function(e){r.points.push(new me.Vector2d(parseInt(e.x,10),parseInt(e.y,10)))})}}}me.game.renderer.adjustPosition(this);me.TMXUtils.applyTMXPropertiesFromJSON(this,e)},setImage:function(e,t){var i=t.getTilesetByGid(this.gid);this.width=i.tilewidth;this.height=i.tileheight;this.spritewidth=this.width;var n=new me.Tile(this.x,this.y,i.tilewidth,i.tileheight,this.gid);this.image=i.getTileImage(n)},getObjectPropertyByName:function(e){return this[e]}})})(window);(function(e){var t=2147483648;var i=1073741824;var n=536870912;me.Tile=me.Rect.extend({tileId:null,tileset:null,init:function(e,r,s,o,a){this.parent(new me.Vector2d(e*s,r*o),s,o);this.col=e;this.row=r;this.tileId=a;this.flipX=(this.tileId&t)!==0;this.flipY=(this.tileId&i)!==0;this.flipAD=(this.tileId&n)!==0;this.flipped=this.flipX||this.flipY||this.flipAD;this.tileId&=~(t|i|n)}});me.TMXTileset=Object.extend({type:{SOLID:"solid",PLATFORM:"platform",L_SLOPE:"lslope",R_SLOPE:"rslope",LADDER:"ladder",TOPLADDER:"topladder",BREAKABLE:"breakable"},init:function(){this.TileProperties=[];this.tileXOffset=[];this.tileYOffset=[]},initFromXML:function(e){this.firstgid=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_FIRSTGID);var t=me.mapReader.TMXParser.getStringAttribute(e,me.TMX_TAG_SOURCE);if(t){t=me.utils.getBasename(t);e=me.loader.getTMX(t);if(!e){throw"melonJS:"+t+" TSX tileset not found"}me.mapReader.TMXParser.parseFromString(e);e=me.mapReader.TMXParser.getFirstElementByTagName("tileset")}this.name=me.mapReader.TMXParser.getStringAttribute(e,me.TMX_TAG_NAME);this.tilewidth=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_TILEWIDTH);this.tileheight=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_TILEHEIGHT);this.spacing=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_SPACING,0);this.margin=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_MARGIN,0);this.tileoffset=new me.Vector2d(0,0);var i=e.getElementsByTagName(me.TMX_TAG_TILEOFFSET);if(i.length>0){this.tileoffset.x=me.mapReader.TMXParser.getIntAttribute(i[0],me.TMX_TAG_X);this.tileoffset.y=me.mapReader.TMXParser.getIntAttribute(i[0],me.TMX_TAG_Y)}var n=e.getElementsByTagName(me.TMX_TAG_TILE);for(var r=0;r<n.length;r++){var s=me.mapReader.TMXParser.getIntAttribute(n[r],me.TMX_TAG_ID)+this.firstgid;var o={};me.TMXUtils.applyTMXPropertiesFromXML(o,n[r]);this.setTileProperty(s,o)}var a=e.getElementsByTagName(me.TMX_TAG_IMAGE)[0].getAttribute(me.TMX_TAG_SOURCE);var l=a?me.loader.getImage(me.utils.getBasename(a)):null;if(!l){console.log("melonJS: '"+a+"' file for tileset '"+this.name+"' not found!")}var u=e.getElementsByTagName(me.TMX_TAG_IMAGE)[0].getAttribute(me.TMX_TAG_TRANS);this.initFromImage(l,u)},initFromJSON:function(e){this.firstgid=e[me.TMX_TAG_FIRSTGID];var t=e[me.TMX_TAG_SOURCE];if(t){t=me.utils.getBasename(t);e=me.loader.getTMX(t);if(!e){throw"melonJS:"+t+" TSX tileset not found"}}this.name=e[me.TMX_TAG_NAME];this.tilewidth=parseInt(e[me.TMX_TAG_TILEWIDTH],10);this.tileheight=parseInt(e[me.TMX_TAG_TILEHEIGHT],10);this.spacing=parseInt(e[me.TMX_TAG_SPACING]||0,10);this.margin=parseInt(e[me.TMX_TAG_MARGIN]||0,10);this.tileoffset=new me.Vector2d(0,0);var i=e[me.TMX_TAG_TILEOFFSET];if(i){this.tileoffset.x=parseInt(i[me.TMX_TAG_X],10);this.tileoffset.y=parseInt(i[me.TMX_TAG_Y],10)}var n=e["tileproperties"];for(var r in n){var s={};me.TMXUtils.mergeProperties(s,n[r]);this.setTileProperty(parseInt(r,10)+this.firstgid,s)}var o=me.utils.getBasename(e[me.TMX_TAG_IMAGE]);var a=o?me.loader.getImage(o):null;if(!a){console.log("melonJS: '"+o+"' file for tileset '"+this.name+"' not found!")}var l=e[me.TMX_TAG_TRANS]||null;this.initFromImage(a,l)},initFromImage:function(e,t){if(e){this.image=e;this.hTileCount=~~((this.image.width-this.margin)/(this.tilewidth+this.spacing));this.vTileCount=~~((this.image.height-this.margin)/(this.tileheight+this.spacing))}this.lastgid=this.firstgid+(this.hTileCount*this.vTileCount-1||0);if(t!==null&&this.image){this.image=me.video.applyRGBFilter(this.image,"transparent",t.toUpperCase()).canvas}},setTileProperty:function(e,t){t.isSolid=t.type?t.type.toLowerCase()===this.type.SOLID:false;t.isPlatform=t.type?t.type.toLowerCase()===this.type.PLATFORM:false;t.isLeftSlope=t.type?t.type.toLowerCase()===this.type.L_SLOPE:false;t.isRightSlope=t.type?t.type.toLowerCase()===this.type.R_SLOPE:false;t.isBreakable=t.type?t.type.toLowerCase()===this.type.BREAKABLE:false;t.isLadder=t.type?t.type.toLowerCase()===this.type.LADDER:false;t.isTopLadder=t.type?t.type.toLowerCase()===this.type.TOPLADDER:false;t.isSlope=t.isLeftSlope||t.isRightSlope;t.isCollidable=!!t.type;this.TileProperties[e]=t},contains:function(e){return e>=this.firstgid&&e<=this.lastgid},getTileImage:function(e){var t=me.video.getContext2d(me.video.createCanvas(this.tilewidth,this.tileheight));this.drawTile(t,0,0,e);return t.canvas},getTileProperties:function(e){return this.TileProperties[e]},isTileCollidable:function(e){return this.TileProperties[e].isCollidable},getTileOffsetX:function(e){var t=this.tileXOffset[e];if(typeof t==="undefined"){t=this.tileXOffset[e]=this.margin+(this.spacing+this.tilewidth)*(e%this.hTileCount)}return t},getTileOffsetY:function(e){var t=this.tileYOffset[e];if(typeof t==="undefined"){t=this.tileYOffset[e]=this.margin+(this.spacing+this.tileheight)*~~(e/this.hTileCount)}return t},drawTile:function(e,t,i,n){if(n.flipped){var r=1;var s=0;var o=0;var a=1;var l=t;var u=i;t=i=0;e.save();if(n.flipAD){r=0;s=1;o=1;a=0;u+=this.tileheight-this.tilewidth}if(n.flipX){r=-r;o=-o;l+=n.flipAD?this.tileheight:this.tilewidth}if(n.flipY){s=-s;a=-a;u+=n.flipAD?this.tilewidth:this.tileheight}e.transform(r,s,o,a,l,u)}var h=n.tileId-this.firstgid;e.drawImage(this.image,this.getTileOffsetX(h),this.getTileOffsetY(h),this.tilewidth,this.tileheight,t,i,this.tilewidth,this.tileheight);if(n.flipped){e.restore()}}});me.TMXTilesetGroup=Object.extend({init:function(){this.tilesets=[]},add:function(e){this.tilesets.push(e)},getTilesetByIndex:function(e){return this.tilesets[e]},getTilesetByGid:function(e){var t=-1;for(var i=0,n=this.tilesets.length;i<n;i++){if(this.tilesets[i].contains(e))return this.tilesets[i];if(this.tilesets[i].firstgid===this.tilesets[i].lastgid){if(e>=this.tilesets[i].firstgid)t=i}}if(t!==-1)return this.tilesets[t];else throw"no matching tileset found for gid "+e}})})(window);(function(e){me.TMXOrthogonalRenderer=Object.extend({init:function(e,t,i,n){this.cols=e;this.rows=t;this.tilewidth=i;this.tileheight=n},canRender:function(e){return e.orientation==="orthogonal"&&this.cols===e.cols&&this.rows===e.rows&&this.tilewidth===e.tilewidth&&this.tileheight===e.tileheight},pixelToTileCoords:function(e,t){return new me.Vector2d(e/this.tilewidth,t/this.tileheight)},tileToPixelCoords:function(e,t){return new me.Vector2d(e*this.tilewidth,t*this.tileheight)},adjustPosition:function(e){if(typeof e.gid==="number"){e.y-=e.height}},drawTile:function(e,t,i,n,r){r.drawTile(e,r.tileoffset.x+t*this.tilewidth,r.tileoffset.y+(i+1)*this.tileheight-r.tileheight,n)},drawTileLayer:function(e,t,i){var n=this.pixelToTileCoords(i.pos.x,i.pos.y).floorSelf();var r=this.pixelToTileCoords(i.pos.x+i.width+this.tilewidth,i.pos.y+i.height+this.tileheight).ceilSelf();r.x=r.x>this.cols?this.cols:r.x;r.y=r.y>this.rows?this.rows:r.y;for(var s=n.y;s<r.y;s++){for(var o=n.x;o<r.x;o++){var a=t.layerData[o][s];if(a){this.drawTile(e,o,s,a,a.tileset)}}}}});me.TMXIsometricRenderer=Object.extend({init:function(e,t,i,n){this.cols=e;this.rows=t;this.tilewidth=i;this.tileheight=n;this.hTilewidth=i/2;this.hTileheight=n/2;this.originX=this.rows*this.hTilewidth},canRender:function(e){return e.orientation==="isometric"&&this.cols===e.cols&&this.rows===e.rows&&this.tilewidth===e.tilewidth&&this.tileheight===e.tileheight},pixelToTileCoords:function(e,t){e-=this.originX;var i=t/this.tileheight;var n=e/this.tilewidth;return new me.Vector2d(i+n,i-n)},tileToPixelCoords:function(e,t){return new me.Vector2d((e-t)*this.hTilewidth+this.originX,(e+t)*this.hTileheight)},adjustPosition:function(e){var t=e.x/this.hTilewidth;var i=e.y/this.tileheight;var n=this.tileToPixelCoords(t,i);n.x-=e.width/2;n.y-=e.height;e.x=n.x;e.y=n.y},drawTile:function(e,t,i,n,r){r.drawTile(e,(this.cols-1)*r.tilewidth+(t-i)*r.tilewidth>>1,-r.tilewidth+(t+i)*r.tileheight>>2,n)},drawTileLayer:function(e,t,i){var n=t.tileset;var r=n.tileoffset;var s=this.pixelToTileCoords(i.pos.x-n.tilewidth,i.pos.y-n.tileheight).floorSelf();var o=this.pixelToTileCoords(i.pos.x+i.width+n.tilewidth,i.pos.y+i.height+n.tileheight).ceilSelf();var a=this.tileToPixelCoords(o.x,o.y);var l=this.tileToPixelCoords(s.x,s.y);l.x-=this.hTilewidth;l.y+=this.tileheight;var u=l.y-i.pos.y>this.hTileheight;var h=i.pos.x-l.x<this.hTilewidth;if(u){if(h){s.x--;l.x-=this.hTilewidth}else{s.y--;l.x+=this.hTilewidth}l.y-=this.hTileheight}var c=u^h;var f=s.clone();for(var d=l.y;d-this.tileheight<a.y;d+=this.hTileheight){f.setV(s);for(var p=l.x;p<a.x;p+=this.tilewidth){if(f.x>=0&&f.y>=0&&f.x<this.cols&&f.y<this.rows){var m=t.layerData[f.x][f.y];if(m){n=m.tileset;r=n.tileoffset;n.drawTile(e,r.x+p,r.y+d-n.tileheight,m)}}f.x++;f.y--}if(!c){s.x++;l.x+=this.hTilewidth;c=true}else{s.y++;l.x-=this.hTilewidth;c=false}}}})})(window);(function(e){me.ColorLayer=me.Renderable.extend({init:function(e,t,i){this.parent(new me.Vector2d(0,0),Infinity,Infinity);this.name=e;this.color=me.utils.HexToRGB(t);this.z=i},reset:function(){},update:function(){return false},draw:function(e,t){var i=e.globalAlpha;e.globalAlpha*=this.getOpacity();e.fillStyle=this.color;e.fillRect(t.left,t.top,t.width,t.height);e.globalAlpha=i}});me.ImageLayer=me.Renderable.extend({init:function(e,t,i,n,r,s){this.name=e;this.image=n?me.loader.getImage(me.utils.getBasename(n)):null;if(!this.image){throw"melonJS: '"+n+"' file for Image Layer '"+this.name+"' not found!"}this.imagewidth=this.image.width;this.imageheight=this.image.height;var o=me.game.viewport;t=t?Math.min(o.width,t):o.width;i=i?Math.min(o.height,i):o.height;this.parent(new me.Vector2d(0,0),t,i);this.z=r;this.ratio=new me.Vector2d(1,1);if(s){if(typeof s==="number"){this.ratio.set(s,s)}else{this.ratio.setV(s)}}this.lastpos=o.pos.clone();this.floating=true;this._repeat="repeat";this.repeatX=true;this.repeatY=true;Object.defineProperty(this,"repeat",{get:function a(){return this._repeat},set:function l(e){this._repeat=e;switch(this._repeat){case"no-repeat":this.repeatX=false;this.repeatY=false;break;case"repeat-x":this.repeatX=true;this.repeatY=false;break;case"repeat-y":this.repeatX=false;this.repeatY=true;break;default:this.repeatX=true;this.repeatY=true;break}}});this.anchorPoint.set(0,0);this.handle=me.event.subscribe(me.event.VIEWPORT_ONCHANGE,this.updateLayer.bind(this))},reset:function(){if(this.handle){me.event.unsubscribe(this.handle);this.handle=null}this.image=null;this.lastpos=null},updateLayer:function(e){if(0===this.ratio.x&&0===this.ratio.y){return}else{this.pos.x+=(e.x-this.lastpos.x)*this.ratio.x%this.imagewidth;this.pos.x=(this.imagewidth+this.pos.x)%this.imagewidth;this.pos.y+=(e.y-this.lastpos.y)*this.ratio.y%this.imageheight;this.pos.y=(this.imageheight+this.pos.y)%this.imageheight;this.lastpos.setV(e)}},update:function(){return false},draw:function(e,t){e.save();if(this.anchorPoint.y!==0||this.anchorPoint.x!==0){e.translate(~~(this.anchorPoint.x*(this.viewport.width-this.imagewidth)),~~(this.anchorPoint.y*(this.viewport.height-this.imageheight)))}e.globalAlpha*=this.getOpacity();var i,n;if(0===this.ratio.x&&0===this.ratio.y){i=Math.min(t.width,this.imagewidth);n=Math.min(t.height,this.imageheight);e.drawImage(this.image,t.left,t.top,i,n,t.left,t.top,i,n)}else{var r=~~this.pos.x;var s=~~this.pos.y;var o=0;var a=0;i=Math.min(this.imagewidth-r,this.width);n=Math.min(this.imageheight-s,this.height);do{do{e.drawImage(this.image,r,s,i,n,o,a,i,n);s=0;a+=n;n=Math.min(this.imageheight,this.height-a)}while(this.repeatY&&a<this.height);o+=i;if(!this.repeatX||o>=this.width){break}r=0;i=Math.min(this.imagewidth,this.width-o);s=~~this.pos.y;a=0;n=Math.min(this.imageheight-~~this.pos.y,this.height)}while(true)}e.restore()},destroy:function(){this.reset()}});me.CollisionTiledLayer=me.Renderable.extend({init:function(e,t){this.parent(new me.Vector2d(0,0),e,t);this.isCollisionMap=true},reset:function(){},checkCollision:function(e,t){var i=t.x<0?e.left+t.x:e.right+t.x;var n=t.y<0?e.top+t.y:e.bottom+t.y;var r={x:0,y:0,xprop:{},yprop:{}};if(i<=0||i>=this.width){r.x=t.x}if(n<=0||n>=this.height){r.y=t.y}return r}});me.TMXLayer=me.Renderable.extend({layerData:null,init:function(e,t,i,n,r){this.parent(new me.Vector2d(0,0),0,0);this.tilewidth=e;this.tileheight=t;this.orientation=i;this.tilesets=n;this.tileset=this.tilesets?this.tilesets.getTilesetByIndex(0):null;this.z=r},initFromXML:function(e){this.name=me.mapReader.TMXParser.getStringAttribute(e,me.TMX_TAG_NAME);this.visible=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_VISIBLE,1)===1;this.cols=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_WIDTH);this.rows=me.mapReader.TMXParser.getIntAttribute(e,me.TMX_TAG_HEIGHT);this.setOpacity(me.mapReader.TMXParser.getFloatAttribute(e,me.TMX_TAG_OPACITY,1));this.width=this.cols*this.tilewidth;this.height=this.rows*this.tileheight;me.TMXUtils.applyTMXPropertiesFromXML(this,e);if(typeof this.preRender==="undefined"){this.preRender=me.sys.preRender}this.isCollisionMap=this.name.toLowerCase().contains(me.COLLISION_LAYER);if(this.isCollisionMap&&!me.debug.renderCollisionMap){this.visible=false}if(this.preRender===true){this.layerCanvas=me.video.createCanvas(this.cols*this.tilewidth,this.rows*this.tileheight);this.layerSurface=me.video.getContext2d(this.layerCanvas)}},initFromJSON:function(e){this.name=e[me.TMX_TAG_NAME];this.visible=e[me.TMX_TAG_VISIBLE];this.cols=parseInt(e[me.TMX_TAG_WIDTH],10);this.rows=parseInt(e[me.TMX_TAG_HEIGHT],10);this.setOpacity(parseFloat(e[me.TMX_TAG_OPACITY]));this.width=this.cols*this.tilewidth;this.height=this.rows*this.tileheight;me.TMXUtils.applyTMXPropertiesFromJSON(this,e);if(typeof this.preRender==="undefined"){this.preRender=me.sys.preRender}this.isCollisionMap=this.name.toLowerCase().contains(me.COLLISION_LAYER);if(this.isCollisionMap&&!me.debug.renderCollisionMap){this.visible=false}if(this.preRender===true){this.layerCanvas=me.video.createCanvas(this.cols*this.tilewidth,this.rows*this.tileheight);this.layerSurface=me.video.getContext2d(this.layerCanvas)}},reset:function(){if(this.preRender){this.layerCanvas=null;this.layerSurface=null}this.renderer=null;this.layerData=null;this.tileset=null;this.tilesets=null},setRenderer:function(e){this.renderer=e},initArray:function(e,t){this.layerData=[];for(var i=0;i<e;i++){this.layerData[i]=[];for(var n=0;n<t;n++){this.layerData[i][n]=null}}},getTileId:function(e,t){var i=this.getTile(e,t);return i?i.tileId:null},getTile:function(e,t){return this.layerData[~~(e/this.tilewidth)][~~(t/this.tileheight)]},setTile:function(e,t,i){var n=new me.Tile(e,t,this.tilewidth,this.tileheight,i);if(!this.tileset.contains(n.tileId)){n.tileset=this.tileset=this.tilesets.getTilesetByGid(n.tileId)}else{n.tileset=this.tileset}this.layerData[e][t]=n;return n},clearTile:function(e,t){this.layerData[e][t]=null;if(this.visible&&this.preRender){this.layerSurface.clearRect(e*this.tilewidth,t*this.tileheight,this.tilewidth,this.tileheight)}},checkCollision:function(e,t){var i=t.x<0?~~(e.left+t.x):Math.ceil(e.right-1+t.x);var n=t.y<0?~~(e.top+t.y):Math.ceil(e.bottom-1+t.y);var r={x:0,xtile:undefined,xprop:{},y:0,ytile:undefined,yprop:{}};if(i<=0||i>=this.width){r.x=t.x}else if(t.x!==0){r.xtile=this.getTile(i,Math.ceil(e.bottom-1));if(r.xtile&&this.tileset.isTileCollidable(r.xtile.tileId)){r.x=t.x;r.xprop=this.tileset.getTileProperties(r.xtile.tileId)}else{r.xtile=this.getTile(i,~~e.top);if(r.xtile&&this.tileset.isTileCollidable(r.xtile.tileId)){r.x=t.x;r.xprop=this.tileset.getTileProperties(r.xtile.tileId)}}}r.ytile=this.getTile(t.x<0?~~e.left:Math.ceil(e.right-1),n);if(r.ytile&&this.tileset.isTileCollidable(r.ytile.tileId)){r.y=t.y||1;r.yprop=this.tileset.getTileProperties(r.ytile.tileId)}else{r.ytile=this.getTile(t.x<0?Math.ceil(e.right-1):~~e.left,n);if(r.ytile&&this.tileset.isTileCollidable(r.ytile.tileId)){r.y=t.y||1;r.yprop=this.tileset.getTileProperties(r.ytile.tileId)}}return r},update:function(){return false},draw:function(e,t){if(this.preRender){var i=Math.min(t.width,this.width);var n=Math.min(t.height,this.height);this.layerSurface.globalAlpha=e.globalAlpha*this.getOpacity();e.drawImage(this.layerCanvas,t.pos.x,t.pos.y,i,n,t.pos.x,t.pos.y,i,n)}else{var r=e.globalAlpha;e.globalAlpha*=this.getOpacity();this.renderer.drawTileLayer(e,this,t);e.globalAlpha=r}}})})(window);(function(e){me.TMXTileMap=me.Renderable.extend({init:function(e){this.levelId=e;this.z=0;this.name=null;this.cols=0;this.rows=0;this.tilewidth=0;this.tileheight=0;this.tilesets=null;this.mapLayers=[];this.objectGroups=[];this.initialized=false;this.version="";this.orientation="";this.tilesets=null;this.parent(new me.Vector2d,0,0)},reset:function(){if(this.initialized===true){var e;for(e=this.mapLayers.length;e--;){this.mapLayers[e].reset();this.mapLayers[e]=null}for(e=this.objectGroups.length;e--;){this.objectGroups[e].reset();this.objectGroups[e]=null}this.tilesets=null;this.mapLayers.length=0;this.objectGroups.length=0;this.pos.set(0,0);this.initialized=false}},getObjectGroupByName:function(e){var t=null;e=e.trim().toLowerCase();for(var i=this.objectGroups.length;i--;){if(this.objectGroups[i].name.toLowerCase().contains(e)){t=this.objectGroups[i];break}}return t},getObjectGroups:function(){return this.objectGroups},getLayers:function(){return this.mapLayers},getLayerByName:function(e){var t=null;e=e.trim().toLowerCase();for(var i=this.mapLayers.length;i--;){if(this.mapLayers[i].name.toLowerCase().contains(e)){t=this.mapLayers[i];
break}}if(e.toLowerCase().contains(me.COLLISION_LAYER)&&t==null){t=new me.CollisionTiledLayer(me.game.currentLevel.width,me.game.currentLevel.height)}return t},clearTile:function(e,t){for(var i=this.mapLayers.length;i--;){if(this.mapLayers[i]instanceof me.TMXLayer){this.mapLayers[i].clearTile(e,t)}}}})})(window);(function(e){me.TMXMapReader=Object.extend({XMLReader:null,JSONReader:null,TMXParser:null,readMap:function(e){if(e.initialized){return}if(me.loader.getTMXFormat(e.levelId)==="xml"){if(this.XMLReader===null){this.XMLReader=new i}this.TMXParser=this.XMLReader.TMXParser;this.XMLReader.readXMLMap(e,me.loader.getTMX(e.levelId))}else{if(this.JSONReader===null){this.JSONReader=new n}this.JSONReader.readJSONMap(e,me.loader.getTMX(e.levelId))}if(e.width<me.game.viewport.width||e.height<me.game.viewport.height){var t=~~((me.game.viewport.width-e.width)/2);var r=~~((me.game.viewport.height-e.height)/2);e.pos.add({x:t>0?t:0,y:r>0?r:0})}e.initialized=true},getNewDefaultRenderer:function(e){switch(e.orientation){case"orthogonal":return new me.TMXOrthogonalRenderer(e.cols,e.rows,e.tilewidth,e.tileheight);case"isometric":return new me.TMXIsometricRenderer(e.cols,e.rows,e.tilewidth,e.tileheight);default:throw"melonJS: "+e.orientation+" type TMX Tile Map not supported!"}},setLayerData:function(e,t,i,n){e.initArray(e.cols,e.rows);switch(i){case null:t=t.getElementsByTagName(me.TMX_TAG_TILE);break;case"json":break;case me.TMX_TAG_CSV:case me.TMX_TAG_ATTR_BASE64:var r="";for(var s=0,o=t.childNodes.length;s<o;s++){r+=t.childNodes[s].nodeValue}if(i===me.TMX_TAG_CSV){t=me.utils.decodeCSV(r,e.cols)}else{t=me.utils.decodeBase64AsArray(r,4);if(n!==null){t=me.utils.decompress(t,n)}}r=null;break;default:throw"melonJS: TMX Tile Map "+i+" encoding not supported!"}var a=0;for(var l=0;l<e.rows;l++){for(var u=0;u<e.cols;u++){var h=i==null?this.TMXParser.getIntAttribute(t[a++],me.TMX_TAG_GID):t[a++];if(h!==0){var c=e.setTile(u,l,h);if(e.visible&&e.preRender){e.renderer.drawTile(e.layerSurface,u,l,c,c.tileset)}}}}}});function t(){var e={tmxDoc:null,setData:function(e){this.tmxDoc=e},getFirstElementByTagName:function(e){return this.tmxDoc?this.tmxDoc.getElementsByTagName(e)[0]:null},getAllTagElements:function(){return this.tmxDoc?this.tmxDoc.getElementsByTagName("*"):null},getStringAttribute:function(e,t,i){var n=e.getAttribute(t);return n?n.trim():i},getIntAttribute:function(e,t,i){var n=this.getStringAttribute(e,t,i);return n?parseInt(n,10):i},getFloatAttribute:function(e,t,i){var n=this.getStringAttribute(e,t,i);return n?parseFloat(n):i},getBooleanAttribute:function(e,t,i){var n=this.getStringAttribute(e,t,i);return n?n==="true":i},free:function(){this.tmxDoc=null}};return e}var i=me.TMXMapReader.extend({TMXParser:null,init:function(){if(!this.TMXParser){this.TMXParser=new t}},readXMLMap:function(e,t){if(!t){throw"melonJS:"+e.levelId+" TMX map not found"}var i=0;this.TMXParser.setData(t);var n=this.TMXParser.getAllTagElements();for(var r=0;r<n.length;r++){switch(n.item(r).nodeName){case me.TMX_TAG_MAP:var s=n.item(r);e.version=this.TMXParser.getStringAttribute(s,me.TMX_TAG_VERSION);e.orientation=this.TMXParser.getStringAttribute(s,me.TMX_TAG_ORIENTATION);e.cols=this.TMXParser.getIntAttribute(s,me.TMX_TAG_WIDTH);e.rows=this.TMXParser.getIntAttribute(s,me.TMX_TAG_HEIGHT);e.tilewidth=this.TMXParser.getIntAttribute(s,me.TMX_TAG_TILEWIDTH);e.tileheight=this.TMXParser.getIntAttribute(s,me.TMX_TAG_TILEHEIGHT);e.width=e.cols*e.tilewidth;e.height=e.rows*e.tileheight;e.backgroundcolor=this.TMXParser.getStringAttribute(s,me.TMX_BACKGROUND_COLOR);e.z=i++;me.TMXUtils.applyTMXPropertiesFromXML(e,s);e.background_color=e.backgroundcolor?e.backgroundcolor:e.background_color;if(e.background_color){e.mapLayers.push(new me.ColorLayer("background_color",e.background_color,i++))}if(e.background_image){e.mapLayers.push(new me.ImageLayer("background_image",e.width,e.height,e.background_image,i++))}if(me.game.renderer===null||!me.game.renderer.canRender(e)){me.game.renderer=this.getNewDefaultRenderer(e)}break;case me.TMX_TAG_TILESET:if(!e.tilesets){e.tilesets=new me.TMXTilesetGroup}e.tilesets.add(this.readTileset(n.item(r)));break;case me.TMX_TAG_IMAGE_LAYER:e.mapLayers.push(this.readImageLayer(e,n.item(r),i++));break;case me.TMX_TAG_LAYER:e.mapLayers.push(this.readLayer(e,n.item(r),i++));break;case me.TMX_TAG_OBJECTGROUP:e.objectGroups.push(this.readObjectGroup(e,n.item(r),i++));break;default:break}}this.TMXParser.free()},readLayer:function(e,t,i){var n=new me.TMXLayer(e.tilewidth,e.tileheight,e.orientation,e.tilesets,i);n.initFromXML(t);var r=t.getElementsByTagName(me.TMX_TAG_DATA)[0];var s=this.TMXParser.getStringAttribute(r,me.TMX_TAG_ENCODING,null);var o=this.TMXParser.getStringAttribute(r,me.TMX_TAG_COMPRESSION,null);if(s===""){s=null}if(o===""){o=null}if(!n.isCollisionMap||me.debug.renderCollisionMap){if(!me.game.renderer.canRender(n)){n.setRenderer(me.mapReader.getNewDefaultRenderer(n))}else{n.setRenderer(me.game.renderer)}}this.setLayerData(n,r,s,o);r=null;return n},readImageLayer:function(e,t,i){var n=this.TMXParser.getStringAttribute(t,me.TMX_TAG_NAME);var r=this.TMXParser.getIntAttribute(t,me.TMX_TAG_WIDTH);var s=this.TMXParser.getIntAttribute(t,me.TMX_TAG_HEIGHT);var o=t.getElementsByTagName(me.TMX_TAG_IMAGE)[0].getAttribute(me.TMX_TAG_SOURCE);var a=new me.ImageLayer(n,r*e.tilewidth,s*e.tileheight,o,i);a.visible=this.TMXParser.getIntAttribute(t,me.TMX_TAG_VISIBLE,1)===1;a.setOpacity(this.TMXParser.getFloatAttribute(t,me.TMX_TAG_OPACITY,1));me.TMXUtils.applyTMXPropertiesFromXML(a,t);if(typeof a.ratio==="number"){a.ratio=new me.Vector2d(parseFloat(a.ratio),parseFloat(a.ratio))}return a},readTileset:function(e){var t=new me.TMXTileset;t.initFromXML(e);return t},readObjectGroup:function(e,t,i){var n=this.TMXParser.getStringAttribute(t,me.TMX_TAG_NAME);var r=new me.TMXObjectGroup;r.initFromXML(n,t,e.tilesets,i);return r}});var n=me.TMXMapReader.extend({readJSONMap:function(e,t){if(!t){throw"melonJS:"+e.levelId+" TMX map not found"}var i=0;var n=this;e.version=t[me.TMX_TAG_VERSION];e.orientation=t[me.TMX_TAG_ORIENTATION];e.cols=parseInt(t[me.TMX_TAG_WIDTH],10);e.rows=parseInt(t[me.TMX_TAG_HEIGHT],10);e.tilewidth=parseInt(t[me.TMX_TAG_TILEWIDTH],10);e.tileheight=parseInt(t[me.TMX_TAG_TILEHEIGHT],10);e.width=e.cols*e.tilewidth;e.height=e.rows*e.tileheight;e.backgroundcolor=t[me.TMX_BACKGROUND_COLOR];e.z=i++;me.TMXUtils.applyTMXPropertiesFromJSON(e,t);e.background_color=e.backgroundcolor?e.backgroundcolor:e.background_color;if(e.background_color){e.mapLayers.push(new me.ColorLayer("background_color",e.background_color,i++))}if(e.background_image){e.mapLayers.push(new me.ImageLayer("background_image",e.width,e.height,e.background_image,i++))}if(me.game.renderer===null||!me.game.renderer.canRender(e)){me.game.renderer=this.getNewDefaultRenderer(e)}if(!e.tilesets){e.tilesets=new me.TMXTilesetGroup}t["tilesets"].forEach(function(t){e.tilesets.add(n.readTileset(t))});t["layers"].forEach(function(t){switch(t.type){case me.TMX_TAG_IMAGE_LAYER:e.mapLayers.push(n.readImageLayer(e,t,i++));break;case me.TMX_TAG_TILE_LAYER:e.mapLayers.push(n.readLayer(e,t,i++));break;case me.TMX_TAG_OBJECTGROUP:e.objectGroups.push(n.readObjectGroup(e,t,i++));break;default:break}})},readLayer:function(e,t,i){var n=new me.TMXLayer(e.tilewidth,e.tileheight,e.orientation,e.tilesets,i);n.initFromJSON(t);if(!n.isCollisionMap){if(!me.game.renderer.canRender(n)){n.setRenderer(me.mapReader.getNewDefaultRenderer(n))}else{n.setRenderer(me.game.renderer)}}this.setLayerData(n,t[me.TMX_TAG_DATA],"json",null);return n},readImageLayer:function(e,t,i){var n=t[me.TMX_TAG_NAME];var r=parseInt(t[me.TMX_TAG_WIDTH],10);var s=parseInt(t[me.TMX_TAG_HEIGHT],10);var o=t[me.TMX_TAG_IMAGE];var a=new me.ImageLayer(n,r*e.tilewidth,s*e.tileheight,o,i);a.visible=t[me.TMX_TAG_VISIBLE];a.setOpacity(parseFloat(t[me.TMX_TAG_OPACITY]));me.TMXUtils.applyTMXPropertiesFromJSON(a,t);if(typeof a.ratio==="number"){a.ratio=new me.Vector2d(parseFloat(a.ratio),parseFloat(a.ratio))}return a},readTileset:function(e){var t=new me.TMXTileset;t.initFromJSON(e);return t},readObjectGroup:function(e,t,i){var n=new me.TMXObjectGroup;n.initFromJSON(t[me.TMX_TAG_NAME],t,e.tilesets,i);return n}})})(window);(function(e){me.levelDirector=function(){var e={};var t={};var i=[];var n=0;e.reset=function(){};e.addLevel=function(e){throw"melonJS: no level loader defined"};e.addTMXLevel=function(e,n){if(t[e]==null){t[e]=new me.TMXTileMap(e);t[e].name=e;i.push(e)}else{return false}if(n){n()}return true};e.loadLevel=function(r){r=r.toString().toLowerCase();if(t[r]===undefined){throw"melonJS: level "+r+" not found"}if(t[r]instanceof me.TMXTileMap){var s=me.state.isRunning();if(s){me.state.stop()}me.game.reset();me.utils.resetGUID(r);if(t[e.getCurrentLevelId()]){t[e.getCurrentLevelId()].reset()}me.mapReader.readMap(t[r]);n=i.indexOf(r);me.game.loadTMXLevel(t[r]);if(s){me.state.restart.defer()}}else{throw"melonJS: no level loader defined"}return true};e.getCurrentLevelId=function(){return i[n]};e.reloadLevel=function(){return e.loadLevel(e.getCurrentLevelId())};e.nextLevel=function(){if(n+1<i.length){return e.loadLevel(i[n+1])}else{return false}};e.previousLevel=function(){if(n-1>=0){return e.loadLevel(i[n-1])}else{return false}};e.levelCount=function(){return i.length};return e}()})(window);(function(){me.Tween=function(e){var t=e;var i={};var n={};var r={};var s=1e3;var o=0;var a=false;var l=false;var u=0;var h=null;var c=0;var f=me.Tween.Easing.Linear.None;var d=me.Tween.Interpolation.Linear;var p=[];var m=null;var g=false;var y=null;var v=null;this.alwaysUpdate=true;for(var T in e){i[T]=parseFloat(e[T],10)}this.to=function(e,t){if(t!==undefined){s=t}n=e;return this};this.start=function(){g=false;me.game.add(this,999);h=me.timer.getTime()+u;c=0;for(var e in n){if(n[e]instanceof Array){if(n[e].length===0){continue}n[e]=[t[e]].concat(n[e])}i[e]=t[e];if(i[e]instanceof Array===false){i[e]*=1}r[e]=i[e]||0}return this};this.stop=function(){me.game.remove(this,true);return this};this.delay=function(e){u=e;return this};me.event.subscribe(me.event.STATE_PAUSE,function w(){if(h){c=me.timer.getTime()}});me.event.subscribe(me.event.STATE_RESUME,function b(){if(h&&c){h+=me.timer.getTime()-c}});this.repeat=function(e){o=e;return this};this.yoyo=function(e){a=e;return this};this.easing=function(e){if(typeof e!=="function"){throw"melonJS: invalid easing function for me.Tween.easing()"}f=e;return this};this.interpolation=function(e){d=e;return this};this.chain=function(){p=arguments;return this};this.onStart=function(e){m=e;return this};this.onUpdate=function(e){y=e;return this};this.onComplete=function(e){v=e;return this};this.update=function(){var e;var c=me.timer.getTime();if(c<h){return true}if(g===false){if(m!==null){m.call(t)}g=true}var T=(c-h)/s;T=T>1?1:T;var w=f(T);for(e in n){var b=i[e]||0;var x=n[e];if(x instanceof Array){t[e]=d(x,w)}else{if(typeof x==="string"){x=b+parseFloat(x,10)}if(typeof x==="number"){t[e]=b+(x-b)*w}}}if(y!==null){y.call(t,w)}if(T===1){if(o>0){if(isFinite(o)){o--}for(e in r){if(typeof n[e]==="string"){r[e]=r[e]+parseFloat(n[e],10)}if(a){var A=r[e];r[e]=n[e];n[e]=A;l=!l}i[e]=r[e]}h=c+u;return true}else{me.game.remove(this,true);if(v!==null){v.call(t)}for(var M=0,S=p.length;M<S;M++){p[M].start(c)}return false}}return true}};me.Tween.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){if((e*=2)<1)return.5*e*e;return-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){if((e*=2)<1)return.5*e*e*e;return.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){if((e*=2)<1)return.5*e*e*e*e;return-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){if((e*=2)<1)return.5*e*e*e*e*e;return.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){if(e===0)return 0;if(e===1)return 1;if((e*=2)<1)return.5*Math.pow(1024,e-1);return.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){if((e*=2)<1)return-.5*(Math.sqrt(1-e*e)-1);return.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,i=.1,n=.4;if(e===0)return 0;if(e===1)return 1;if(!i||i<1){i=1;t=n/4}else t=n*Math.asin(1/i)/(2*Math.PI);return-(i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/n))},Out:function(e){var t,i=.1,n=.4;if(e===0)return 0;if(e===1)return 1;if(!i||i<1){i=1;t=n/4}else t=n*Math.asin(1/i)/(2*Math.PI);return i*Math.pow(2,-10*e)*Math.sin((e-t)*2*Math.PI/n)+1},InOut:function(e){var t,i=.1,n=.4;if(e===0)return 0;if(e===1)return 1;if(!i||i<1){i=1;t=n/4}else t=n*Math.asin(1/i)/(2*Math.PI);if((e*=2)<1)return-.5*i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/n);return i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*2*Math.PI/n)*.5+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=1.70158*1.525;if((e*=2)<1)return.5*e*e*((t+1)*e-t);return.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-me.Tween.Easing.Bounce.Out(1-e)},Out:function(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}},InOut:function(e){if(e<.5)return me.Tween.Easing.Bounce.In(e*2)*.5;return me.Tween.Easing.Bounce.Out(e*2-1)*.5+.5}}};me.Tween.Interpolation={Linear:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n),s=me.Tween.Interpolation.Utils.Linear;if(t<0)return s(e[0],e[1],n);if(t>1)return s(e[i],e[i-1],i-n);return s(e[r],e[r+1>i?i:r+1],n-r)},Bezier:function(e,t){var i=0,n=e.length-1,r=Math.pow,s=me.Tween.Interpolation.Utils.Bernstein,o;for(o=0;o<=n;o++){i+=r(1-t,n-o)*r(t,o)*e[o]*s(n,o)}return i},CatmullRom:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n),s=me.Tween.Interpolation.Utils.CatmullRom;if(e[0]===e[i]){if(t<0)r=Math.floor(n=i*(1+t));return s(e[(r-1+i)%i],e[r],e[(r+1)%i],e[(r+2)%i],n-r)}else{if(t<0)return e[0]-(s(e[0],e[0],e[1],e[1],-n)-e[0]);if(t>1)return e[i]-(s(e[i],e[i],e[i-1],e[i-1],n-i)-e[i]);return s(e[r?r-1:0],e[r],e[i<r+1?i:r+1],e[i<r+2?i:r+2],n-r)}},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=me.Tween.Interpolation.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:function(){var e=[1];return function(t){var i=1,n;if(e[t])return e[t];for(n=t;n>1;n--)i*=n;return e[t]=i}}(),CatmullRom:function(e,t,i,n,r){var s=(i-e)*.5,o=(n-t)*.5,a=r*r,l=r*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*r+t}}}})();(function(){me.event=function(){var e={};var t={};e.STATE_PAUSE="me.state.onPause";e.STATE_RESUME="me.state.onResume";e.STATE_STOP="me.state.onStop";e.STATE_RESTART="me.state.onRestart";e.GAME_INIT="me.game.onInit";e.LEVEL_LOADED="me.game.onLevelLoaded";e.LOADER_COMPLETE="me.loader.onload";e.LOADER_PROGRESS="me.loader.onProgress";e.KEYDOWN="me.input.keydown";e.KEYUP="me.input.keyup";e.WINDOW_ONRESIZE="window.onresize";e.WINDOW_ONORIENTATION_CHANGE="window.orientationchange";e.WINDOW_ONSCROLL="window.onscroll";e.VIEWPORT_ONCHANGE="viewport.onchange";e.publish=function(e,i){var n=t[e],r=n?n.length:0;while(r--){n[r].apply(window,i||[])}};e.subscribe=function(e,i){if(!t[e]){t[e]=[]}t[e].push(i);return[e,i]};e.unsubscribe=function(e,i){var n=t[i?e:e[0]],r=n?n.length:0;i=i||e[1];while(r--){if(n[r]===i){n.splice(r,1)}}};return e}()})();(function(){me.plugin=function(){var e={};e.Base=Object.extend({version:undefined,init:function(){}});e.patch=function(e,t,i){if(e.prototype!==undefined){e=e.prototype}if(typeof e[t]==="function"){var n=e[t];e[t]=function(e,t){return function(){var e=this.parent;this.parent=n;var i=t.apply(this,arguments);this.parent=e;return i}}(t,i)}else{console.error(t+" is not an existing function")}};e.register=function(e,t){if(me.plugin[t]){console.error("plugin "+t+" already registered")}if(e.prototype.version===undefined){throw"melonJS: Plugin version not defined !"}else if(me.sys.checkVersion(e.prototype.version)>0){throw"melonJS: Plugin version mismatch, expected: "+e.prototype.version+", got: "+me.version}var i=[];if(arguments.length>2){i=Array.prototype.slice.call(arguments,1)}i[0]=e;me.plugin[t]=new(e.bind.apply(e,i));if(!(me.plugin[t]instanceof me.plugin.Base)){throw"melonJS: Plugin should extend the me.plugin.Base Class !"}};return e}()})();(function(e){me.debug=me.debug||{};debugPanel=me.plugin.Base.extend({GUID:null,area:{},rect:null,z:Infinity,visible:false,version:"0.9.9",init:function(e,t){this.parent();this.rect=new me.Rect(new me.Vector2d(0,0),me.video.getWidth(),35);this.GUID="debug-"+me.utils.createGUID();this.name="me.debugPanel";this.isPersistent=true;this.floating=true;this.isRenderable=true;this.alwaysUpdate=true;this.font=new me.Font("courier",10,"white");this.area.renderHitBox=new me.Rect(new me.Vector2d(160,5),15,15);this.area.renderVelocity=new me.Rect(new me.Vector2d(165,18),15,15);this.area.renderDirty=new me.Rect(new me.Vector2d(270,5),15,15);this.area.renderCollisionMap=new me.Rect(new me.Vector2d(270,18),15,15);this.help_str="(s)how/(h)ide";this.help_str_len=this.font.measureText(me.video.getSystemContext(),this.help_str).width;this.fps_str_len=this.font.measureText(me.video.getSystemContext(),"00/00 fps").width;me.debug.displayFPS=true;me.input.bindKey(e||me.input.KEY.S,"show");me.input.bindKey(t||me.input.KEY.H,"hide");this.samples=[];this.patchSystemFn();this.show()},patchSystemFn:function(){me.debug.renderHitBox=me.debug.renderHitBox||false;me.debug.renderVelocity=me.debug.renderVelocity||false;me.plugin.patch(me.timer,"update",function(e){this.parent();me.timer.countFPS()});me.plugin.patch(me.SpriteObject,"draw",function(e){this.parent(e);if(me.debug.renderHitBox){e.strokeStyle="green";e.strokeRect(this.left,this.top,this.width,this.height)}});me.plugin.patch(me.ObjectEntity,"draw",function(e){this.parent(e);if(me.debug.renderHitBox&&this.shapes.length){this.collisionBox.draw(e,"red");if(this.shapes[0].shapeType!=="Rectangle"){e.translate(this.pos.x,this.pos.y);this.shapes[0].draw(e,"red");e.translate(-this.pos.x,-this.pos.y)}}if(me.debug.renderVelocity){var t=~~(this.pos.x+this.hWidth);var i=~~(this.pos.y+this.hHeight);e.strokeStyle="blue";e.lineWidth=1;e.beginPath();e.moveTo(t,i);e.lineTo(t+~~(this.vel.x*this.hWidth),i+~~(this.vel.y*this.hHeight));e.stroke()}})},show:function(){if(!this.visible){if(!me.game.getEntityByName("me.debugPanel")[0]){me.game.add(this,this.z);me.game.sort()}me.input.registerPointerEvent("mousedown",this.rect,this.onClick.bind(this),true);this.visible=true;me.game.repaint()}},hide:function(){if(this.visible){me.input.releasePointerEvent("mousedown",this.rect);this.visible=false;me.game.repaint()}},update:function(){if(me.input.isKeyPressed("show")){this.show()}else if(me.input.isKeyPressed("hide")){this.hide()}return true},getRect:function(){return this.rect},onClick:function(e){if(this.area.renderHitBox.containsPoint(e.gameX,e.gameY)){me.debug.renderHitBox=!me.debug.renderHitBox}else if(this.area.renderCollisionMap.containsPoint(e.gameX,e.gameY)){me.debug.renderCollisionMap=!me.debug.renderCollisionMap}else if(this.area.renderVelocity.containsPoint(e.gameX,e.gameY)){me.debug.renderVelocity=!me.debug.renderVelocity}me.game.repaint()},drawMemoryGraph:function(e,t,i){if(window.performance&&window.performance.memory){var n=Number.prototype.round(window.performance.memory.usedJSHeapSize/1048576,2);var r=Number.prototype.round(window.performance.memory.totalJSHeapSize/1048576,2);var s=i-t;this.samples.shift();this.samples[s]=n/r*25;for(var o=s;o--;){var a=i-(s-o);e.beginPath();e.strokeStyle="lightgreen";e.moveTo(a,30);e.lineTo(a,30-(this.samples[o]||0));e.stroke()}this.font.draw(e,n+"/"+r+" MB",t,18)}else{this.font.draw(e,"??/?? MB",t,18)}},draw:function(e){e.save();e.globalAlpha=.5;e.fillStyle="black";e.fillRect(this.rect.left,this.rect.top,this.rect.width,this.rect.height);e.globalAlpha=1;this.font.draw(e,"#objects : "+me.game.world.children.length,5,5);this.font.draw(e,"#draws   : "+me.game.world.drawCount,5,18);this.font.draw(e,"?hitbox   ["+(me.debug.renderHitBox?"x":" ")+"]",100,5);this.font.draw(e,"?velocity ["+(me.debug.renderVelocity?"x":" ")+"]",100,18);this.font.draw(e,"?dirtyRect  [ ]",200,5);this.font.draw(e,"?col. layer ["+(me.debug.renderCollisionMap?"x":" ")+"]",200,18);this.drawMemoryGraph(e,300,this.rect.width-this.help_str_len-5);this.font.draw(e,this.help_str,this.rect.width-this.help_str_len-5,18);var t=""+me.timer.fps+"/"+me.sys.fps+" fps";this.font.draw(e,t,this.rect.width-this.fps_str_len-5,5);e.restore()},onDestroyEvent:function(){this.hide();me.input.unbindKey(me.input.KEY.S);me.input.unbindKey(me.input.KEY.H)}})})(window);